[{"content":"ç®€è¦ä»‹ç» ä¼—æ‰€å‘¨çŸ¥ï¼Œç®€ä¸­äº’è”ç½‘å†…å¼€æºFediç¤¾åŒºç›¸å½“å°ä¼—ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼ŒMastodonçš„ç”¨æˆ·ä¾æ—§æ˜¯ç›¸å½“åºå¤§çš„ï¼Œè€ŒåŒä¸ºè”é‚¦å®‡å®™è½¯ä»¶ä¸€å‘˜çš„Misskeyåˆ™æ˜¯å°ä¼—ä¸­çš„å°ä¼—ã€‚\nå®é™…ä¸Šä¸­æ–‡é•¿æ¯›è±¡ç¤¾åŒºç”±äºå„ç§ä¸å¯è¯´åŸå› ç»å†äº†å‡ æ¬¡æ¬è¿æ½®ï¼Œå†åŠ ä¸Šè±¡å‹ä»¬çš„å®‰åˆ©é‚€è¯·ï¼Œæœ€ç»ˆå½¢æˆäº†ç°åœ¨çš„ç››å†µã€‚ä¹Ÿæœ‰äººè§‰å¾—Mastodonï¼ˆé•¿æ¯›è±¡ï¼‰UIç•Œé¢æ¯”è¾ƒå¥½çœ‹ï¼Œå†åŠ ä¸Šå‡ ä½çŸ¥åç«™é•¿çš„ä¸ªæ€§åŒ–é­”æ”¹\u0026amp;ç¨³å®šç»´æŠ¤å’ŒMastodonè‡ªå¸¦çš„æ¬å®¶åŠŸèƒ½ï¼Œå³ä½¿é•¿æ¯›è±¡ç›®å‰ä»…æ”¯æŒçº¯æ–‡æœ¬å‘å˜Ÿï¼Œå—ä¼—ä¾æ—§ç›¸å½“å¤šï¼Œå¾ˆå¤šäººä»¥ä¸ºè”é‚¦å®‡å®™æŒ‡çš„å°±æ˜¯Mastodonæœ¬èº«äº†ã€‚\nç„¶è€Œä»ç«™é•¿è§’åº¦æ¥è¯´ï¼ŒMastodonå¯ä»¥ç§°å¾—ä¸Šèµ„æºå ç”¨æ€ªï¼Œç›¸æ¯”Misskeyæ¥è¯´Mastodonå®åœ¨æ˜¯heavyå¾ˆå¤šï¼Œè¿™æ˜¯å› ä¸ºMastodonç”¨çš„Rubyæ¥å†™çš„ï¼ŒMisskeyç”¨çš„TypeScript(JS)æ¥å†™çš„ï¼Œè¿è¡Œä¸Šæ¥è¯´Misskeyçš„é€Ÿåº¦å’Œè¿å­˜å ç”¨ç›¸å¯¹å ä¼˜åŠ¿ã€‚å¦å¤–ï¼ŒMisskeyæ˜¯ä¸éœ€è¦é‚®ä»¶æœåŠ¡çš„ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·éœ€è¦ç‰¢è®°è‡ªå·±çš„å¯†ç ã€‚\nMisskeyæ˜¯æ—¥æœ¬å¼€å‘è€…syuiloåŸºäºFediverseå¼€å‘çš„ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ç¤¾äº¤å¹³å°ï¼Œå¯ä»¥ä¸Mastodonäº’é€šï¼Œä¸”æ‹¥æœ‰ä¸€äº›Mastodonæ²¡æœ‰çš„å¤æ‚å°ç©æ„ï¼ˆæ¯•ç«Ÿæºè‡ªéœ“è™¹å˜›ï¼‰ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£å†™å¾—çœŸçš„å¾ˆçƒ‚ï¼Œè€Œä¸”æ˜¯ä¸ªäººé¡¹ç›®ï¼Œä½†Misskeyæœ¬èº«ç¡®å®æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œè€Œä¸”ç”±äºæœ‰å…¬å¸èµ„é‡‘æ”¯æŒï¼Œè¿‘æœŸæ›´æ–°éå¸¸é¢‘ç¹ã€‚ç›¸æ¯”äºMastodonï¼ŒMisskeyæ›´é€‚åˆæ­å»ºä¸ªç«™ã€‚\næ­å»ºè¿‡ç¨‹ 2021å¹´äº†å®˜æ–¹æ•™ç¨‹å±…ç„¶åœ¨æ¨èè‡ªè¡Œbuildé•œåƒã€‚è™½ç„¶è¯´ä¹Ÿä¸æ˜¯ä¸è¡Œä½†å¯¹å°å‹æœåŠ¡å™¨çš„å‹åŠ›å¤ªå¤§äº†ï¼Œè€Œä¸”Dockerhubä¸­å·²ç»æœ‰å®˜æ–¹æ¨é€çš„Misskeyé•œåƒï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å°±å¥½ã€‚\næ³¨æ„ï¼š\næœ¬æ•™ç¨‹çœç•¥äº†ä¸€äº›ä¸Docker\u0026amp;Docker composeç›¸å…³çš„çŸ¥è¯†ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å‚è€ƒè¿™é‡Œå®‰è£…ã€‚ åœ¨ä»»æ„ç›®å½•ä¸‹æ–°å»ºdocker-compose.ymlæ–‡ä»¶ï¼š\ncd /opt \u0026amp;\u0026amp; mkdir misskey \u0026amp;\u0026amp; cd misskey nano docker-compose.yml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\nversion: \u0026quot;3\u0026quot; services: web: restart: always image: misskey/misskey:latest links: - db - redis ports: - \u0026quot;127.0.0.1:3000:3000\u0026quot; #å¦‚æœæœåŠ¡å™¨ç«¯å£3000å·²è¢«ä½¿ç”¨ï¼Œå¯æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Œä¾‹å¦‚127.0.0.1:5210:3000 networks: - internal_network - external_network volumes: - ./.config:/misskey/.config - ./files:/misskey/files #ç”¨æˆ·ä¸Šä¼ åˆ°æœ¬åœ°çš„æ–‡ä»¶ï¼Œå¦‚æœæ‚¨ä¸€å¼€å§‹å°±æ¥å…¥å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚wasabiæˆ–æ˜¯AWS S3ï¼‰æ‚¨å¯ä»¥å¿½ç•¥è¿™å—é…ç½® redis: restart: always image: redis:latest networks: - internal_network volumes: - ./redis:/data db: restart: always image: postgres:12.2-alpine networks: - internal_network env_file: - .config/docker.env volumes: - ./db:/var/lib/postgresql/data networks: internal_network: internal: true external_network: æ–°å»ºé…ç½®æ–‡ä»¶å¤¹.configï¼š\nmkdir .config cd .config è¿è¡Œnano default.ymlæ–°å»ºdefault.ymlï¼Œå¤åˆ¶å®˜æ–¹é¡¹ç›®çš„example.ymlå†…å®¹ï¼Œå›åˆ°æœåŠ¡å™¨ä¸­ç²˜è´´ï¼Œéƒ¨åˆ†æ”¹åŠ¨å¦‚ä¸‹ï¼š\n å°†urlé¡¹æ”¹ä¸ºä½ çš„åŸŸåã€‚ç”±äºåˆ†å¸ƒå¼å±æ€§ï¼Œä¸€æ—¦å¼€å¯ç«™ç‚¹åˆ™ä¸å¯æ›´æ”¹ã€‚ æ–‡ä»¶ä¸­æåˆ°çš„Option 1å’ŒOption 2ï¼Œæˆ‘ä»¬é€‰æ‹©Option 1ï¼Œå› æ­¤å°†#port: 3000 # A port that your Misskey server should listen.è¿™ä¸€è¡Œå–æ¶ˆæ³¨é‡Šï¼Œç«¯å£å·ä¸ç”¨æ›´æ”¹ã€‚ å°†dbå’ŒRedisçš„hostç”±localhoståˆ†åˆ«æ”¹ä¸ºdbå’Œredisã€‚ å°†dbé¡¹çš„userå’Œpassæ”¹ä¸ºä½ æƒ³è®¾ç½®çš„æ•°æ®åº“ç”¨æˆ·å’Œæ•°æ®åº“å¯†ç ã€‚ å¦‚æœ‰ActivityPubåè®®è¿é€šæ€§éœ€æ±‚ï¼ˆä¾‹å¦‚ä¸Mastodonç«™ç‚¹äº’åŠ¨ï¼‰éœ€è¦å¼€å¯signToActivityPubGet: trueé€‰é¡¹ï¼ˆé»˜è®¤å…³é—­ï¼‰ï¼Œä½ç½®åœ¨æ–‡ä»¶æœ«å°¾éƒ¨åˆ†ã€‚  ä¿å­˜ã€‚\nè¿è¡Œnano docker.envæ–°å»ºdocker.envï¼Œå¤åˆ¶å®˜æ–¹é¡¹ç›®çš„docker_example.envå†…å®¹ï¼Œå›åˆ°æœåŠ¡å™¨ä¸­ç²˜è´´ï¼Œå°†POSTGRES_USERå’ŒPOSTGRES_PASSWORDæ”¹ä¸ºåˆšåˆšè‡ªå·±è®¾ç½®çš„æ•°æ®åº“ç”¨æˆ·å’Œæ•°æ®åº“å¯†ç ã€‚\nå›åˆ°ä¸Šçº§ç›®å½•ï¼Œåˆå§‹åŒ–æ•°æ®åº“ï¼š\ncd ../ docker-compose run --rm web yarn run init å¯åŠ¨å®¹å™¨ä½¿ç«™ç‚¹ä¸Šçº¿ï¼š\ndocker-compose up -d Nginxåå‘ä»£ç† é¦–å…ˆå»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ï¼Œç„¶åå›åˆ°æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nsudo -i #åˆ‡æ¢è‡³rootç”¨æˆ· apt install nginx -y #å®‰è£…nginx è¿è¡Œnano /etc/nginx/conf.d/misskey.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n# Sample nginx configuration for Misskey # # 1. Replace example.tld to your domain # 2. Copy to /etc/nginx/sites-available/ and then symlink from /etc/nginx/sites-enabled/ # or copy to /etc/nginx/conf.d/ # For WebSocket map $http_upgrade $connection_upgrade { default upgrade; '' close; } proxy_cache_path /tmp/nginx_cache levels=1:2 keys_zone=cache1:16m max_size=1g inactive=720m use_temp_path=off; server { listen 80; listen [::]:80; server_name ä½ çš„åŸŸå; # For SSL domain validation root /var/www/html; location /.well-known/acme-challenge/ { allow all; } location /.well-known/pki-validation/ { allow all; } location / { return 301 https://$server_name$request_uri; } } server { listen 443 ssl http2; listen [::]:443 ssl http2; server_name ä½ çš„åŸŸå; ssl_session_cache shared:ssl_session_cache:10m; # To use Let's Encrypt certificate #ssl_certificate /etc/letsencrypt/live/ä½ çš„åŸŸå/fullchain.pem; #ssl_certificate_key /etc/letsencrypt/live/ä½ çš„åŸŸå/privkey.pem; # To use Debian/Ubuntu's self-signed certificate (For testing or before issuing a certificate) #ssl_certificate /etc/ssl/certs/ssl-cert-snakeoil.pem; #ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key; # SSL protocol settings ssl_protocols TLSv1.2; ssl_ciphers ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:AES128-SHA; ssl_prefer_server_ciphers on; # Change to your upload limit client_max_body_size 80m; # Proxy to Node location / { proxy_pass http://127.0.0.1:3000; #éœ€è¦ä¸docker-compose.ymlä¸­ç«¯å£é…ç½®ä¸€è‡´ï¼Œä¾‹å¦‚http://127.0.0.1:5210 proxy_set_header Host $host; proxy_http_version 1.1; proxy_redirect off; # If it's behind another reverse proxy or CDN, remove the following. proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto https; # For WebSocket proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $connection_upgrade; # Cache settings proxy_cache cache1; proxy_cache_lock on; proxy_cache_use_stale updating; add_header X-Cache $upstream_cache_status; } } æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx è¿è¡Œsudo certbot --nginxè·å–SSLè¯ä¹¦ã€‚\næ³¨å†Œç®¡ç†å‘˜å¸å· è®¿é—®ä½ çš„åŸŸåæ³¨å†Œä¸€ä¸ªå¸å·ï¼Œæ­¤å¸å·ä¼šè¢«è®¾ç½®ä¸ºç®¡ç†å‘˜ã€‚\nå¯ä»¥å°†æ™®é€šæƒé™å¸å·å‡çº§ä¸ºç®¡ç†å‘˜ã€‚å‚è€ƒè¿™ä¸ªissueï¼Œåœ¨æœåŠ¡å™¨ä¸­è¿è¡Œdocker-compose run --rm web node packages/backend/built/tools/mark-admin @ç”¨æˆ·åå³å¯ï¼Œæ³¨æ„éœ€è¦å…ˆæ³¨å†Œæ‰è¡Œã€‚\nå¼€å§‹é£Ÿç”¨  æœ¬æ–‡éƒ¨åˆ†å‚è€ƒï¼šä½¿ç”¨Dockeræœ€å°åŒ–éƒ¨ç½²Misskey Misskeyä½¿ç”¨æŒ‡å— Misskeyå¸–æ–‡å¯è§èŒƒå›´å’Œåˆ é™¤å¸–æ–‡è¯´æ˜  Misskeyå’ŒMastodonçš„ä¸­ç»§æ˜¯é€šç”¨çš„ï¼Œå°½æƒ…æ¢ç´¢ä½ çš„ç«™ç‚¹å§ï¼\næœ€åé™„ä¸ŠMisskeyå®˜æ–¹å®ä¾‹Misskey.ioçš„ä»‹ç»ï¼š\nMisskey.ioã¯ã€åœ°çƒã§ç”Ÿã¾ã‚ŒãŸåˆ†æ•£ãƒã‚¤ã‚¯ãƒ­ãƒ–ãƒ­ã‚°SNSã§ã™ã€‚Fediverseï¼ˆæ§˜ã€…ãªSNSã§æ§‹æˆã•ã‚Œã‚‹å®‡å®™ï¼‰ã®ä¸­ã«å­˜åœ¨ã™ã‚‹ãŸã‚ã€ä»–ã®SNSã¨ç›¸äº’ã«ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚\næš«ã—éƒ½ä¼šã®å–§é¨’ã‹ã‚‰é›¢ã‚Œã¦ã€æ–°ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«ãƒ€ã‚¤ãƒ–ã—ã¦ã¿ã¾ã›ã‚“ã‹ã€‚\n","description":"","id":0,"section":"posts","tags":["Misskey","Docker"],"title":"Misskey | åˆ©ç”¨Docker-composeæ­å»ºFediå¼€æºç¤¾äº¤å¹³å°","uri":"http://blog.tantalum.life/posts/build-misskey-in-docker/"},{"content":"ä¸€ç›´å¾ˆæƒ³è®©é•¿æ¯›è±¡æ”¯æŒ  Markdownè¯­æ³•ï¼Œä½†æˆ‘æœ¬äººå´å› ä¸ºèœå¾—çœ‹ä¸æ‡‚çœŸä»£ç è€Œå¤šæ¬¡ç¢°å£ã€‚è¿™æ¬¡ä½¿ç”¨äº†å°æ£®æ—ç«™é•¿çš„dockeré•œåƒï¼Œä¸»é¢˜å’Œç‰¹è‰²è¯·çœ‹è¿™é‡Œã€‚\næ³¨ï¼šå°æ£®æ—ç«™æºä»£ç æŒ‰ç…§AGPL3åè®®å¼€æºã€‚ä½†ç”±äº  Markdown\u0026amp;  ç¿»è¯‘ç­‰åŠŸèƒ½éœ€è¦å ç”¨å°æ£®æ—ç«™é•¿mashiroçš„æœåŠ¡å™¨èµ„æºï¼Œå› æ­¤åœ¨ä½¿ç”¨dockeré•œåƒæ—¶è¯·å¯»æ±‚æˆæƒï¼ŒåŒæ„åæ–¹å¯å‚è€ƒæœ¬æ–‡å®è·µã€‚\næœ¬æ–‡çš„åŠ³åŠ¨æˆæœéƒ¨åˆ†å±äºmashiroï¼Œæœ¬æ–‡ä»…ä½œå¤‡å¿˜ä½¿ç”¨ï¼Œé èº¬ã€‚\n å¤‡ä»½é…ç½®æ–‡ä»¶ cp docker-compose.yml docker-compose.save \u0026amp;\u0026amp; vim docker-compose.save åŸé…ç½®å¦‚ä¸‹ï¼š\nversion: '3' services: db: restart: always image: postgres:12.5-alpine shm_size: 256mb networks: - internal_network healthcheck: test: [\u0026quot;CMD\u0026quot;, \u0026quot;pg_isready\u0026quot;, \u0026quot;-U\u0026quot;, \u0026quot;postgres\u0026quot;] volumes: - ./postgres:/var/lib/postgresql/data redis: restart: always image: redis:6.0-alpine networks: - internal_network healthcheck: test: [\u0026quot;CMD\u0026quot;, \u0026quot;redis-cli\u0026quot;, \u0026quot;ping\u0026quot;] volumes: - ./redis:/data es: restart: always image: docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2 environment: - \u0026quot;ES_JAVA_OPTS=-Xms512m -Xmx512m\u0026quot; - \u0026quot;cluster.name=es-mastodon\u0026quot; - \u0026quot;discovery.type=single-node\u0026quot; - \u0026quot;bootstrap.memory_lock=true\u0026quot; networks: - internal_network healthcheck: test: [\u0026quot;CMD-SHELL\u0026quot;, \u0026quot;curl --silent --fail localhost:9200/_cluster/health || exit 1\u0026quot;] volumes: - ./elasticsearch:/usr/share/elasticsearch/data ulimits: memlock: soft: -1 hard: -1 web: build: . image: pullopen/mastodon:v3.4.4 restart: always env_file: .env.production command: bash -c \u0026quot;rm -f /mastodon/tmp/pids/server.pid; bundle exec rails s -p 3000\u0026quot; networks: - external_network - internal_network healthcheck: test: [\u0026quot;CMD-SHELL\u0026quot;, \u0026quot;wget -q --spider --proxy=off localhost:3000/health || exit 1\u0026quot;] ports: - \u0026quot;127.0.0.1:3000:3000\u0026quot; depends_on: - db - redis - es volumes: - ./public/system:/mastodon/public/system streaming: build: . image: pullopen/mastodon:v3.4.4 restart: always env_file: .env.production command: node ./streaming networks: - external_network - internal_network healthcheck: test: [\u0026quot;CMD-SHELL\u0026quot;, \u0026quot;wget -q --spider --proxy=off localhost:4000/api/v1/streaming/health || exit 1\u0026quot;] ports: - \u0026quot;127.0.0.1:4000:4000\u0026quot; depends_on: - db - redis sidekiq: build: . image: pullopen/mastodon:v3.4.4 restart: always env_file: .env.production command: bundle exec sidekiq depends_on: - db - redis networks: - external_network - internal_network volumes: - ./public/system:/mastodon/public/system ## Uncomment to enable federation with tor instances along with adding the following ENV variables ## http_proxy=http://privoxy:8118 ## ALLOW_ACCESS_TO_HIDDEN_SERVICE=true # tor: # image: sirboops/tor # networks: # - external_network # - internal_network # # privoxy: # image: sirboops/privoxy # volumes: # - ./priv-config:/opt/config # networks: # - external_network # - internal_network networks: external_network: internal_network: internal: true ç”±äºå·æ‡’æ²¡æœ‰è‡ªè¡Œåˆ¶ä½œé•œåƒï¼Œè¿™é‡Œæˆ‘ç”¨äº†pullopenç«™é•¿çš„é•œåƒpullopen/mastodon:v3.4.4ï¼Œæ„Ÿè°¢å¥¹ã€‚\ncp .env.production .env.production.save \u0026amp;\u0026amp; vim .env.production.save åŸé…ç½®å¦‚ä¸‹ï¼š\n# Generated with mastodon:setup on 2021-06-12 10:34:39 UTC LOCAL_DOMAIN=toot.tantalum.life SECRET_KEY_BASE= OTP_SECRET= VAPID_PRIVATE_KEY= VAPID_PUBLIC_KEY= DB_HOST=db DB_PORT=5432 DB_NAME=mastodon_production DB_USER=mastodon DB_PASS= REDIS_HOST=redis REDIS_PORT=6379 SMTP_SERVER=smtp.zoho.com SMTP_PORT=587 SMTP_LOGIN=notifications@yourdomain.com SMTP_PASSWORD= SMTP_AUTH_METHOD=plain SMTP_OPENSSL_VERIFY_MODE=none SMTP_FROM_ADDRESS=Mastodon \u0026lt;notifications@yourdomain.com\u0026gt; S3_ENABLED=true S3_BUCKET= AWS_ACCESS_KEY_ID= AWS_SECRET_ACCESS_KEY= S3_REGION=nl-ams S3_PROTOCOL=https S3_HOSTNAME=s3.nl-ams.scw.cloud S3_ENDPOINT=https://s3.nl-ams.scw.cloud/ S3_ALIAS_HOST= GITHUB_REPOSITORY=pullopen/mastodon AUTHORIZED_FETCH=true #å®‰å…¨æ¨¡å¼å¼€å¯ ES_ENABLED=true ES_HOST=es ES_PORT=9200 å¤‡ä»½æ•°æ®åº“é˜²æ­¢æ„å¤–ã€‚\nåŠ å…¥é­”æ”¹é…ç½® ç»å°æ£®æ—ç«™é•¿æé†’ï¼Œå¦‚æœé»˜è®¤ç”¨çš„æ˜¯è‡ªå®šä¹‰ä¸»é¢˜ï¼Œè¿ç§»å‰å…ˆæŠŠç«™ç‚¹ä¸»é¢˜æ¢æˆmastodoné»˜è®¤çš„æ·±è‰²ä¸»é¢˜ã€‚\nè¿è¡Œdocker-compose downä½¿ç«™ç‚¹ä¸‹çº¿ï¼Œå¼€å§‹æˆ‘ä»¬çš„é­”æ”¹å·¥ä½œã€‚\næ‰“å¼€docker-compose.ymlç¤ºä¾‹ä»£ç ï¼Œå¤åˆ¶æœ«å°¾çš„translateå—éƒ¨åˆ†ã€‚å›åˆ°æœåŠ¡å™¨è¿è¡Œnano docker-compose.ymlï¼Œå°†åˆšåˆšå¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°æœåŠ¡å™¨çš„docker-compose.ymlæ–‡ä»¶çš„å¯¹åº”ä½ç½®ã€‚\n å°†webï¼Œstreamingå’Œsidekiqä¸‰é¡¹çš„imageæ”¹ä¸ºmashirozx/mastodon:latestï¼ŒåŒæ—¶ä¹Ÿå°†ä¸‰ä¸ªbuildå­—æ®µæ³¨é‡Šæ‰ã€‚ å°†esé¡¹çš„imageæ”¹ä¸ºmashirozx/elasticsearch-cnplugin:7.16.1ï¼Œä¿å­˜ã€‚    å¦‚æœä½ æ²¡æœ‰å¼€å¯å…¨æ–‡æœç´¢ï¼Œè¯·å‚è€ƒè¿™ä¸ªæ•™ç¨‹å¼€å¯å…¨æ–‡æœç´¢ï¼Œç›´æ¥æŠŠimageæ”¹ä¸ºmashirozx/elasticsearch-cnplugin:7.16.1å³å¯ã€‚åœ¨æœ¬æ–‡ç»“æŸåå†è¿è¡Œdocker-compose run --rm web bin/tootctl search deployå»ºç«‹å˜Ÿæ–‡çš„æœç´¢ç´¢å¼•ã€‚\n æ‰“å¼€.env.productionç¤ºä¾‹ä»£ç ï¼Œç¬¬77è¡Œè‡³æœ«å°¾éƒ¨åˆ†æ˜¯å°æ£®æ—ç«™é•¿çš„æ”¹åŠ¨ã€‚å¤åˆ¶è¿™éƒ¨åˆ†å†…å®¹ï¼Œå›åˆ°æœåŠ¡å™¨è¿è¡Œnano .env.productionï¼Œç›´æ¥åœ¨åé¢ç²˜è´´å°±å¯ã€‚å…¶ä¸­éœ€è¦æ”¹åŠ¨çš„çš„å‡ ä¸ªåœ°æ–¹ï¼š\n MAX_TOOT_CHARS=500æ˜¯å˜Ÿæ–‡å­—æ•°æœ€å¤§å€¼ï¼Œæ”¹ä¸ºä½ å–œæ¬¢çš„æ•°å­—ã€‚ PLAUSIBLE_ANALYTICS_SITE_DOMAIN=hello.2heng.xinå»æ‰æ³¨é‡Šå¹¶æ”¹ä¸ºä½ çš„åŸŸåã€‚ æœ€æœ«å°¾çš„GITHUB_OAUTH2å’ŒGITLAB_OAUTH2é…ç½®æ˜¯Githubå’ŒGitlabç™»å½•æ–¹å¼ï¼Œå¯ä»¥å¤§èƒ†æ³¨é‡Šæ‰ã€‚  ç°åœ¨å¯ä»¥ä½¿ç«™ç‚¹é‡æ–°ä¸Šçº¿äº†ï¼š\ndocker-compose up -d åç»­å·¥ä½œ æˆ‘ä¹‹å‰çš„æ–‡ç« é‡Œæåˆ°ï¼Œç«™ç‚¹å‡çº§åå¯èƒ½ä¼šé‡åˆ°åˆ·å˜Ÿæ—¶æç¤ºç½‘ç»œé”™è¯¯500çš„æŠ¥é”™ã€‚\nç®¡ç†é¡µé¢: æ•°æ®åº“è¿ç§»æé†’  \næ­¤æ—¶éœ€è¦è¿›è¡Œæ•°æ®åº“è¿ç§»ï¼š\ndocker-compose run --rm web rails db:migrate å¦å¤–ï¼Œåœ¨ä¸¤æ¬¡å‡çº§æ—¶è·¨ç‰ˆæœ¬å·å¤ªå¤šï¼Œæˆ–æ˜¯ç»è¿‡å¤§å‹é­”æ”¹åè¿˜éœ€è¦è¿è¡Œtootctl cache clearå‘½ä»¤ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°ä¸å¤–ç«™é€šä¿¡å»¶è¿Ÿé«˜çš„é—®é¢˜ï¼š\ndocker-compose run --rm web bin/tootctl cache clear å­¦åˆ°çš„dockerå‘½ä»¤ åˆ é™¤æ— ç”¨é•œåƒï¼ˆéœ€è¦è¾“å…¥yï¼‰ï¼š\ndocker image prune -a å¼ºåˆ¶åˆ é™¤é•œåƒï¼š\ndocker image prune -a -f åˆ é™¤å¼‚å¸¸åœæ­¢çš„dockerå®¹å™¨ï¼š\ndocker rm `docker ps -a | grep Exited | awk '{print $1}'` åˆ é™¤åç§°æˆ–æ ‡ç­¾ä¸ºnoneçš„é•œåƒï¼š\ndocker rmi -f `docker images | grep '\u0026lt;none\u0026gt;' | awk '{print $3}'` æ˜¾ç¤ºå®¹å™¨ä½¿ç”¨çš„ç³»ç»Ÿèµ„æºï¼ˆä¸€ç§’åˆ·æ–°ä¸€æ¬¡ï¼ŒCtrl+Cé€€å‡ºï¼‰ï¼š\ndocker stats ä¸æƒ³æŒç»­çš„ç›‘æ§å®¹å™¨ä½¿ç”¨èµ„æºçš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡--no-streamé€‰é¡¹åªè¾“å‡ºå½“å‰çš„çŠ¶æ€ï¼š\ndocker stats --no-stream è‡ªå®šä¹‰CSSæ ·å¼ è‡ªå®šä¹‰CSSï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198  /*é¼ æ ‡é€‰ä¸­åº•è‰²*/ *::selection { color: #fff; background-color: #b85798; } /*mastodoné•¿å›¾è¡¥ä¸ v2.1 by Shioko*/ .image-loader { align-items: center; } .zoomable-image { display: flex; max-height: 100%; max-width: 98%; overflow: auto !important; } .zoomable-image img { max-height: 100%; max-width:100%; } /*variable width*/ div.column { -webkit-box-flex:1; -ms-flex-positive:1; flex-grow:1 } /*hashtag style blue by slashine 071320*/ .mention.hashtag{ background-color: #93AEFD36; padding: 0px 4px; text-align: center; text-decoration: none; display: inline-block; border-style: dashed; border-color: #93AEFD; border-width: 0.5px; border-radius: 2px; margin-top: 2px; margin-bottom: 2px; } /*emoji enlarge written by bgme*/ .reply-indicator__content .emojione, .status__content .emojione { width: 30px !important; height: 30px !important; } .emoji-mart-category .emoji-mart-emoji:hover span { width: 45px !important; height: 45px !important; } .emoji-mart-category .emoji-mart-emoji:hover { margin: 0 -12px; } /* START mastodon emoji scaling by @eh5@eh5.me */ .account__header__content, .reply-indicator__content, .status__content:not(.status__content--collapsed) { overflow: unset; } .account__header__content .emojione, .reply-indicator__content .emojione, .status__content:not(.status__content--collapsed) .emojione { position: relative; z-index: 10; transform-origin: center; /* Animation duration */ transition: 200ms ease-in-out; } .account__header__content .emojione:hover, .reply-indicator__content .emojione:hover, .status__content:not(.status__content--collapsed) .emojione:hover { z-index: 11; /* Scale up 2.3 times */ transform: scale(2.3); /* shadows around image edges */ filter: drop-shadow(0 0 1px #282c37); } .directory__card .account__header__content .emojione:hover { transform: unset; } /* END mastodon emoji scaling by @eh5@eh5.me */ /*cat ears written by dmonad \u0026amp; neb*/ .notification .status__avatar::before, .notification .status__avatar::after { display: none !important; } .status__wrapper .status:first-child .status__avatar::before, .status__wrapper .status:first-child .status__avatar::after, .entry.h-entry .status__avatar div::before, .entry.h-entry .status__avatar div::after, .entry.entry-reblog .status__avatar div::before, .entry.entry-reblog .status__avatar div::after { content: \u0026#34;\u0026#34;; display: inline-block; border: 4px solid; box-sizing: border-box; width: 50%; height: 50%; background-color: inherit; border-color: inherit; position: absolute; z-index: 0; } .status__avatar::before, .entry.h-entry .status__avatar div::before, .entry.entry-reblog .status__avatar div::before { border-radius: 75% 0 75% 75%; transform: rotate(-37.6deg) skew(-30deg); right: 0; } .status__avatar::after, .entry.h-entry .status__avatar div::after, .entry.entry-reblog .status__avatar div::after { border-radius: 0 75% 75%; transform: rotate(37.6deg) skew(30deg); top: 0; left: 0; } .detailed-status__display-name { overflow: visible !important; } .detailed-status__display-avatar { position: relative; } .detailed-status__display-avatar::before, .detailed-status__display-avatar::after { content: \u0026#34;\u0026#34;; display: inline-block; border: 4px solid; box-sizing: border-box; width: 24px; height: 24px; background-color: inherit; border-color: inherit; position: absolute; z-index: 0; } .detailed-status__display-avatar::before { border-radius: 75% 0 75% 75%; transform: rotate(-37.6deg) skew(-30deg); right: 0px; } .detailed-status__display-avatar::after { border-radius: 0 75% 75%; transform: rotate(37.6deg) skew(30deg); top: 0; } .account__avatar { border-radius: 100%; z-index: 1; } .status__avatar:hover::before, .detailed-status__display-avatar:hover::before, .entry.h-entry .status__avatar div:hover::before, .entry.entry-reblog .status__avatar div:hover::before { animation: earwiggleright 1s infinite; } .status__avatar:hover::after, .detailed-status__display-avatar:hover::after, .entry.h-entry .status__avatar div:hover::after, .entry.entry-reblog .status__avatar div:hover::after { animation: earwiggleleft 1s infinite; } @keyframes earwiggleleft { from { transform: rotate(37.6deg) skew(30deg); } 25% { transform: rotate(10deg) skew(30deg); } 50% { transform: rotate(20deg) skew(30deg); } 75% { transform: rotate(0deg) skew(30deg); } to { transform: rotate(37.6deg) skew(30deg); } } @keyframes earwiggleright { from { transform: rotate(-37.6deg) skew(-30deg); } 30% { transform: rotate(-10deg) skew(-30deg); } 55% { transform: rotate(-20deg) skew(-30deg); } 75% { transform: rotate(-0deg) skew(-30deg); } to { transform: rotate(-37.6deg) skew(-30deg); } }   SSLè¯ä¹¦ç»­ç­¾ å‚è€ƒï¼šHow to install Mastodon Social Network with Docker on Ubuntu 18.04 LTS\nLet\u0026rsquo;s Encrypt è¯ä¹¦çš„æœ‰æ•ˆæœŸä¸º90å¤©ã€‚ ä¹‹åéœ€è¦å†æ¬¡æ›´æ–°ã€‚å¯ä»¥åˆ›å»ºä¸€ä¸ªcronä½œä¸šæ¥è‡ªåŠ¨ä¸ºæ‚¨å®Œæˆã€‚\nåˆ›å»ºä¸€ä¸ªcronä½œä¸šï¼š\nnano /etc/cron.daily/letsencrypt-renew å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶å¹¶ç²˜è´´åˆ°æ–‡ä»¶ä¸­ã€‚\n#!/usr/bin/env bash certbot renew systemctl reload nginx ä½¿è„šæœ¬å¯æ‰§è¡Œå¹¶é‡æ–°å¯åŠ¨cronå®ˆæŠ¤ç¨‹åºï¼Œä»¥ä¾¿è„šæœ¬æ¯å¤©è¿è¡Œï¼š\nchmod +x /etc/cron.daily/letsencrypt-renew systemctl restart cron ","description":"","id":1,"section":"posts","tags":["Mastodon","Docker"],"title":"Mastodon | è®°å½•å¤§å‹é­”æ”¹è¿‡ç¨‹","uri":"http://blog.tantalum.life/posts/notes-on-modifying-mastodon-in-docker/"},{"content":"å‰è¨€ ä»Šå¤©åœ¨ç¿»lalaçš„åšå®¢æ—§æ–‡çš„æ—¶å€™å‘ç°äº†Yotterï¼Œä¸€ä¸ªYoutube/Twitteræ›¿ä»£å‰ç«¯ã€‚æƒ³èµ·bgmeç«™é•¿æ­å»ºè¿‡Nitterï¼ˆTwitteræ›¿ä»£å‰ç«¯ï¼‰ï¼Œä¸ºäº†éšç§å‹å¥½å°±æƒ³æ­å»ºä¸€ä¸ªç±»ä¼¼çš„å¹³å°ã€‚ä¸è¿‡Yotteré¡¹ç›®æ­£å¥½åœ¨å‡ æœˆå‰åœæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ—¶æˆ‘å‘ç°äº†Pipedï¼Œé‚æœ‰æ­¤æ–‡ã€‚\né€šå¸¸æƒ…å†µä¸‹è¿™ç±»å¼€æºå‰ç«¯éƒ½æ˜¯åŠå…¶é‡è§†éšç§çš„ï¼Œè€Œä¸”éƒ½é¼“åŠ±è‡ªæ‰˜ç®¡ï¼ŒPipedä¹Ÿä¸ä¾‹å¤–ã€‚å…³äºéšç§æ–¹é¢çš„æ›´å¤šä»‹ç»è¯·çœ‹Why did I create Piped?ã€‚å¯¹äºæ²¡æœ‰æŠ€æœ¯åŸºç¡€/æ²¡æœ‰æ¡ä»¶è‡ªæ‰˜ç®¡çš„æœ‹å‹ï¼Œå¼€å‘è€…ä¹Ÿæä¾›äº†è‡ªå·±çš„æœåŠ¡ï¼šhttps://piped.kavin.rocks/ã€‚\nPiped: ç™»å½•åçš„ç•Œé¢   æ­å»ºè¿‡ç¨‹ é¦–å…ˆå®‰è£…gitï¼Œdockerå’Œdocker-composeç­‰å¿…è¦å·¥å…·ï¼š\napt -y update apt -y install curl nginx python-certbot-nginx curl -sSL https://get.docker.com/ | sh systemctl start docker systemctl enable docker nginx curl -L https://github.com/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose apt install git-all åœ¨ä»»æ„ç›®å½•ä¸‹è¿è¡Œgit clone https://github.com/TeamPiped/Piped-Docker \u0026amp;\u0026amp; cd Piped-Dockerä¸‹è½½å¿…è¦é…ç½®æ–‡ä»¶å¹¶è·³è½¬è‡³æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«docker-compose.ymlã€‚\nè¿è¡Œæ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬ï¼š\n./configure-instance.sh æŒ‰é¡ºåºå¡«å†™ä¸‰ä¸ªåŸŸåï¼š\npiped.yourdomain.com #å‰ç«¯åŸŸå pipedapi.yourdomain.com #åå°åŸŸå pipedproxy.yourdomain.com #ä»£ç†åŸŸå ç„¶åå¡«å†™ä»£ç†æ–¹å¼ï¼Œå¡«å†™caddyæˆ–nginxã€‚ç”±äºnginxæˆ‘æ¯”è¾ƒç†Ÿæ‚‰æ‰€ä»¥æˆ‘é€‰ç”¨nginxã€‚\nåº”ç­”æµç¨‹ç»“æŸã€‚\nè™½ç„¶æ­¤æ—¶ç›´æ¥è¿è¡Œdocker-compose up -då³å¯ä¸€æ­¥æ­å»ºï¼Œä½†å®‰å…¨èµ·è§å…ˆç¼–è¾‘ä¸€ä¸‹docker-compose.ymlæ–‡ä»¶ï¼š\nnano docker-compose.yml å¯èƒ½éœ€è¦æ”¹åŠ¨ä¸¤ä¸ªå†…å®¹ï¼šæ•°æ®åº“å¯†ç ä»¥åŠç«¯å£å·ã€‚è´´ä¸€ä¸‹æˆ‘çš„é…ç½®ï¼Œæ³¨æ„çœ‹æ³¨é‡Šéƒ¨åˆ†å³å¯ï¼Œä¸èƒ½ç›´æ¥æŠ„ï¼š\nservices: pipedfrontend: image: 1337kavin/piped-frontend:latest restart: unless-stopped depends_on: - piped container_name: piped-frontend entrypoint: ash -c 'sed -i s/pipedapi.kavin.rocks/pipedapi.yourdomain.com/g /usr/share/nginx/html/js/* \u0026amp;\u0026amp; /docker-entrypoint.sh \u0026amp;\u0026amp; nginx -g \u0026quot;daemon off;\u0026quot;' ytproxy: image: 1337kavin/ytproxy:latest restart: unless-stopped volumes: - ytproxy:/app/socket container_name: ytproxy piped: image: 1337kavin/piped:latest restart: unless-stopped volumes: - ./config/config.properties:/app/config.properties:ro depends_on: - postgres container_name: piped-backend varnish: image: varnish:7.0-alpine restart: unless-stopped volumes: - ./config/default.vcl:/etc/varnish/default.vcl:ro container_name: varnish depends_on: - piped healthcheck: test: ash -c \u0026quot;wget --no-verbose --tries=1 --spider 127.0.0.1:80/trending?region=US || (varnishreload \u0026amp;\u0026amp; exit 1)\u0026quot; interval: 10s timeout: 10s retries: 1 nginx: image: nginx:mainline-alpine restart: unless-stopped ports: - \u0026quot;8080:80\u0026quot; #8080ä¸ºå¯¹å¤–å¼€æ”¾ç«¯å£ï¼Œå¦‚æœ8080ç«¯å£å·²ä½¿ç”¨è¯·æ”¹ä¸ºå…¶ä»–ä»»æ„å¯ç”¨ç«¯å£ volumes: - ./config/nginx.conf:/etc/nginx/nginx.conf:ro - ./config/pipedapi.conf:/etc/nginx/conf.d/pipedapi.conf:ro - ./config/pipedproxy.conf:/etc/nginx/conf.d/pipedproxy.conf:ro - ./config/pipedfrontend.conf:/etc/nginx/conf.d/pipedfrontend.conf:ro - ./config/ytproxy.conf:/etc/nginx/snippets/ytproxy.conf:ro - ytproxy:/var/run/ytproxy container_name: nginx depends_on: - piped - varnish - ytproxy - pipedfrontend postgres: image: postgres:13-alpine restart: unless-stopped volumes: - ./data/db:/var/lib/postgresql/data environment: - POSTGRES_DB=piped - POSTGRES_USER=piped - POSTGRES_PASSWORD=yourpassw0rd #æ•°æ®åº“å¯†ç  container_name: postgres watchtower: image: containrrr/watchtower restart: always volumes: - /var/run/docker.sock:/var/run/docker.sock - /etc/timezone:/etc/timezone:ro environment: - WATCHTOWER_CLEANUP=true - WATCHTOWER_INCLUDE_RESTARTING=true container_name: watchtower command: piped-frontend piped-backend ytproxy varnish nginx postgres watchtower volumes: ytproxy: éšåè¿è¡Œdocker-compose up -dï¼ŒPipedå°±æ­å¥½äº†ã€‚æ­¤æ—¶è¿˜ä¸ç®—å®Œæˆï¼Œéœ€è¦ä¸ºPipedæ·»åŠ åå‘ä»£ç†ã€‚\nNginxåå‘ä»£ç† é¦–å…ˆå»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ï¼Œç„¶åå›åˆ°æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nsudo -i #åˆ‡æ¢è‡³rootç”¨æˆ· apt install nginx -y #å®‰è£…nginx ç”±äºæœåŠ¡å™¨ä¸­å·²ç»æœ‰nginxå®¹å™¨ï¼Œé‚£ä¹ˆåªéœ€è¦å°†è™šæ‹Ÿæœºå†…çš„ç«¯å£æ˜ å°„åˆ°ä¸»æœºç«¯å£ã€‚è¿è¡Œnano /etc/nginx/conf.d/piped.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nserver { listen 80; server_name piped.yourdomain.com pipedapi.yourdomain.com pipedproxy.yourdomain.com; #å¡«å†™è‡ªå·±è®¾ç½®çš„ä¸‰ä¸ªåŸŸåï¼Œä»¥ç©ºæ ¼åˆ†å¼€ location / { proxy_pass http://127.0.0.1:8080; #8080æ”¹ä¸ºå¯¹å¤–å¼€æ”¾ç«¯å£ proxy_set_header Host $host; } } æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx è¿è¡Œsudo certbot --nginxè·å–SSLè¯ä¹¦ã€‚\nä½¿ç”¨ Pipedæ”¯æŒä»¥HTMLè¯­æ³•åµŒå…¥è§†é¢‘ï¼Œä»¥PizaCGçš„Unknown Mother-Gooseè¿™æ”¯å½±ç‰‡ä¸ºä¾‹ï¼Œå°†srcé¡¹è®¾ä¸ºhttps://piped.yourdomain.com/embed/r9V5gy-s2J0å³å¯åµŒå…¥è§†é¢‘ã€‚ä¾‹å¦‚https://piped.kavin.rocks/embed/r9V5gy-s2J0ã€‚\nåœ¨Hugoåšå®¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çŸ­ä»£ç åµŒå…¥è§†é¢‘ã€‚åœ¨/root/layouts/shortcode/ä¸‹æ–°å»ºpiped.htmlï¼Œå†™å…¥å†…å®¹ï¼š\n\u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026quot;piped-player\u0026quot; src=\u0026quot;https://piped.kavin.rocks/embed/{{ index .Params 0 }}\u0026quot; scrolling=\u0026quot;no\u0026quot; frameborder=\u0026quot;no\u0026quot; allowfullscreen=\u0026quot;true\u0026quot; autoplay=\u0026quot;0\u0026quot;\u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;style\u0026gt; // åµŒå…¥pipedè§†é¢‘ #piped-player { width: 100%; height: 355px; //æŒ‰éœ€è°ƒæ•´é«˜åº¦ } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #piped-player { width: 100%; height: 200px; //æŒ‰éœ€è°ƒæ•´é«˜åº¦ï¼ˆç§»åŠ¨ç«¯ï¼‰ } } \u0026lt;/style\u0026gt; ç”¨æ³•ï¼šæ‰¾åˆ°ä½ å–œæ¬¢çš„è§†é¢‘ï¼Œå¤åˆ¶é“¾æ¥ä¸­embed/åçš„å†…å®¹ï¼Œä¾‹å¦‚r9V5gy-s2J0ï¼Œç„¶ååœ¨markdownä¸­è¾“å…¥ï¼š\n1  {{\u0026lt; piped r9V5gy-s2J0 \u0026gt;}}   æ•ˆæœï¼š\n  #piped-player { width: 100%; height: 355px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #piped-player { width: 100%; height: 200px; } }  å¯¹æ¯”ä¸€ä¸‹Youtubeï¼š\n  #youtube-player { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #youtube-player { width: 100%; height: 250px; } }  ","description":"","id":2,"section":"posts","tags":["Piped","Docker"],"title":"Piped | åˆ©ç”¨Docker-composeæ­å»ºYouTubeå¼€æºæ›¿ä»£å‰ç«¯","uri":"http://blog.tantalum.life/posts/build-piped-in-docker/"},{"content":"æ°´ä¸€ç¯‡æ–‡ç« ã€‚çš®å¡”ä¸˜ä¹‹å‰é—®æˆ‘åœ¨ç”¨ä»€ä¹ˆRSSé˜…è¯»å™¨ã€‚å…¶å®åœ¨ç”µè„‘ç«¯æˆ‘ä¸€ç›´åœ¨å·æ‡’ç”¨zynå†™çš„æ— åç«¯é™æ€ç½‘é¡µæ’­å®¢æ’­æ”¾å™¨é—­å®¢ã€‚åæ¥å’Œçš®å¡”ä¸˜ä¸€èµ·çœ‹RSSé˜…è¯»å™¨çš„æ­å»ºæ•™ç¨‹ï¼Œé£ŸæŒ‡å¤§åŠ¨å°±é¡ºä¾¿æ­äº†ã€‚\næ³¨æ„ï¼š\næœ¬æ•™ç¨‹çœç•¥äº†ä¸€äº›ä¸Docker\u0026amp;Docker composeç›¸å…³çš„çŸ¥è¯†ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å‚è€ƒè¿™é‡Œå®‰è£…ã€‚ æ­å»ºè¿‡ç¨‹ Minifluxå®˜æ–¹æ–‡æ¡£  åœ¨ä»»æ„ç›®å½•ä¸‹æ–°å»ºdocker-compose.ymlæ–‡ä»¶ï¼š\nmkdir -p /opt/miniflux \u0026amp;\u0026amp; cd /opt/miniflux \u0026amp;\u0026amp; nano docker-compose.yml å†™å…¥ä»¥ä¸‹å†…å®¹ï¼Œä¿å­˜ï¼š\nversion: '3' services: miniflux: image: miniflux/miniflux:latest ports: - \u0026quot;80:8080\u0026quot; #80æ˜¯é»˜è®¤å¯¹å¤–å¼€æ”¾çš„ç«¯å£ï¼Œå»ºè®®æ”¹ä¸ºå…¶ä»–ä»»æ„å¯ç”¨ç«¯å£ depends_on: - db environment: - DATABASE_URL=postgres://miniflux:secret@db/miniflux?sslmode=disable #æ•°æ®åº“urlï¼Œsecretæ”¹ä¸ºä½ çš„æ•°æ®åº“å¯†ç  - RUN_MIGRATIONS=1 - POLLING_FREQUENCY=60 #æŠ“å–feedçš„æ—¶é—´é—´éš”ï¼ˆå•ä½ä¸ºåˆ†é’Ÿï¼‰ - CREATE_ADMIN=1 - ADMIN_USERNAME=admin #ç®¡ç†å‘˜å¸å·ç”¨æˆ·å - ADMIN_PASSWORD=test123 #ç®¡ç†å‘˜å¸å·å¯†ç  restart: unless-stopped db: image: postgres:10.1 environment: - POSTGRES_USER=miniflux #æ•°æ®åº“ç”¨æˆ·å - POSTGRES_PASSWORD=secret #æ•°æ®åº“å¯†ç ï¼Œé»˜è®¤secret volumes: - ./miniflux-db:/var/lib/postgresql/data ç„¶åè¿è¡Œdocker-compose up -dï¼Œæ­¤æ—¶ç”¨æµè§ˆå™¨è®¿é—®https://æœåŠ¡å™¨ip:ç«¯å£å·å°±å¯ä»¥ä½¿ç”¨ç®¡ç†å‘˜å¸å·å¯†ç ç™»å½•äº†ã€‚\nNginxåå‘ä»£ç† å¦‚æœä½ æ²¡æœ‰åŸŸåï¼Œå¯ä»¥è·³è¿‡è¿™æ­¥ã€‚\né¦–å…ˆå»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ï¼Œç„¶åå›åˆ°æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nsudo -i #åˆ‡æ¢è‡³rootç”¨æˆ· apt install nginx -y #å®‰è£…nginx è¿è¡Œnano /etc/nginx/conf.d/miniflux.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nserver { listen 80; server_name ä½ çš„åŸŸå; location / { proxy_pass http://127.0.0.1:8080; #8080æ”¹ä¸ºminifluxå¯¹å¤–å¼€æ”¾çš„ç«¯å£ï¼Œé»˜è®¤ä¸º8080 proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; } } æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx è¿è¡Œsudo certbot --nginxè·å–SSLè¯ä¹¦ã€‚\nä¸€äº›ç¢ç¢å¿µ æœ€å¼€å§‹æƒ³æ­å»ºçš„RSSé˜…è¯»å™¨å…¶å®æ˜¯TTRSSï¼Œä½†ç”±äºè¯•ç”¨åå‘ç°ååº”å¾ˆæ…¢+ç»´æŠ¤ä¸é¢‘ç¹ç­‰åŸå› æ¢æˆäº†Minifluxã€‚å…³äºMinifluxå’Œå…¶ä»–RSSé˜…è¯»å™¨çš„ä¼˜ç¼ºç‚¹è¯·çœ‹è¿™é‡Œã€‚\næ­é…RSSHubé£Ÿç”¨çœŸçš„å¾ˆé¦™ï¼å°ä¼—è½¯ä»¶æ­£å¥½åˆ†äº«äº†æ˜¾ç¤ºå½“å‰ç½‘é¡µRSSè®¢é˜…åœ°å€çš„æ²¹çŒ´è„šæœ¬ã€‚\nå¦å¤–ï¼ŒMinifluxç«Ÿç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰CSSï¼Œäºæ˜¯å¼€å¿ƒåœ°æŠŠé¼ æ ‡é€‰ä¸­åº•è‰²CSSæ ·å¼åŠ äº†ä¸Šå»ï¼š\n1 2 3 4 5  /*é¼ æ ‡é€‰ä¸­åº•è‰²*/ *::selection { color: #fff; /*ç™½è‰²*/ background-color: #b85798; /*é™ˆç«çº¢*/ }    ä¸‡ç‰©çš†å¯ RSSï¼\n","description":"","id":3,"section":"posts","tags":["Miniflux","Docker"],"title":"Miniflux | åˆ©ç”¨Docker-composeæ­å»ºRSSé˜…è¯»å™¨","uri":"http://blog.tantalum.life/posts/build-miniflux-in-docker/"},{"content":"å°æ—¶å€™ä¼šå»æˆ‘å“¥å®¶ç©ã€‚æˆ‘é‚£æ—¶ä¹Ÿå°±å…­å²å§ï¼Œè¿˜æ˜¯çœ‹å¤©çº¿å®å®çš„å¹´çºªï¼Œç»å¸¸å®…åœ¨å®¶é‡Œï¼ˆæˆ–è€…åˆ«äººå®¶é‡Œï¼‰çœ‹ç”µè§†ã€‚æ¯æ¬¡åˆ°ä»–å®¶é‡Œéƒ½ä¼šæ ¼å¤–ç•™æ„å¤§è„‘è¢‹ç”µè§†æœºä¸‹çš„æ¸¸æˆæ‰‹æŸ„ã€‚æˆ‘å“¥å¤§æˆ‘åå²ï¼Œä»–ä¸ºæ•°ä¸å¤šåœ°ååœ¨ç”µè§†æœºå‰æ‰“é©¬é‡Œå¥¥åƒç´ æ¸¸æˆæ˜¯æˆ‘å¯¹æ¸¸æˆçš„æœ€åˆå°è±¡ã€‚å½“ç„¶ï¼Œæ’æ‹”çº¢é»„è“ä¸‰è‰²ä¿¡å·çº¿å¾ˆéº»çƒ¦å°±æ˜¯äº†ã€‚å› ä¸ºæ“ä½œå¤æ‚å†åŠ ä¸Šæ¸¸æˆæˆæœ¬é«˜ï¼Œå°è±¡é‡Œæ¸¸æˆæ˜¯ç»™\u0026quot;å¤§äºº\u0026quot;ç©çš„ã€‚\nåæ¥å®¶é‡Œä¹°äº†ç¬”è®°æœ¬ï¼Œæˆ‘å­¦ä¼šäº†ç½‘ä¸Šå†²æµªï¼Œä»æ­¤è¿‡ä¸Šäº†æ¯æ—¥å·èœçš„å¹¸ç¦ç”Ÿæ´»~ï¼ˆä¸æ˜¯ï¼‰\né‚£ä¸ªæ—¶å€™æ„Ÿè§‰ä¸–ç•Œå¾ˆå°ï¼Œåªéœ€è¦ä¸€æ ¹ç½‘çº¿å°±èƒ½ä¸ä¸–ç•Œè¿é€šã€‚ä¸–ç•Œåˆå¾ˆå¤§ï¼ŒQQç‚«èˆçš„è”æœºä¸‹è½½åŒ…é«˜è¾¾1Gå·²ç»å¯ä»¥è¯´æ˜¯ä¸–ç•Œä¹‹æœ€äº†ï¼ˆå¬æˆ‘çˆ¸çè¯´çš„ï¼‰ï¼Œä»…ä»…æ˜¯QQç©ºé—´é‡Œçš„ç½‘é¡µæ¸¸æˆæˆ‘éƒ½ç©ä¸è¿‡æ¥äº†orz\u0026hellip;\nè™½ç„¶å®¶é‡Œä¸€ç›´æœ‰ä¸€ä¸ªè¶…çº§å¤æ—©çš„æ—¥æœ¬æ¸¸æˆæœºèƒ½ç©é£æœºå¤§æˆ˜è¿˜èƒ½æ’å¡å¸¦ï¼Œä½†åæ¥ä»–æ²¡ç”µäº†ã€‚å› ä¸ºå½“æ—¶å¹´é¾„å¤ªå°åˆä¸äº†è§£å‹å·+ä¸ä¼šæ—¥è¯­ï¼Œç»™ä»–ä¹°å……ç”µå™¨çš„æƒ³æ³•ä¹Ÿä¸äº†äº†ä¹‹ï¼Œå†è¯´å½“æ—¶ä¹Ÿæ²¡æœ‰åƒæµ·é²œå¸‚åœºé‚£ä¹ˆå‘è¾¾çš„äº¤æ˜“å¹³å°\u0026hellip;\nä½œä¸ºZä¸–ä»£äººç±»ï¼ŒåŒé¾„äººæ¥è§¦æ—¶é—´æœ€é•¿çš„å½“ç„¶æ˜¯æ‰‹æœºæ¸¸æˆè€Œéä¼ ç»Ÿæ¸¸æˆã€‚ä½†æ˜¯æˆ‘æ·±å—ä¹å¹´ä¹‰åŠ¡æ•™è‚²ä¾µå®³æˆåŠŸæˆ’ç½‘Nå¹´ï¼Œæ¸¸æˆä»€ä¹ˆå¯¹æˆ‘æ¥è¯´éƒ½ä¸å­˜åœ¨çš„äºæ˜¯åœ¨å­¦ä¸šä¹‹ä½™ï¼Œæˆ‘åˆä¸­å…¥å‘å´©åå­¦å›­2ï¼Œé«˜ä¸­å…¥å‘å´©å3rdï¼Œè¿™ä¸¤ä¸ªæ¸¸æˆéƒ½æ˜¯ç±³å¿½æ‚ å…¬å¸åˆ¶ä½œçš„ï¼Œç”»é£ç²¾è‰¯ä¸è¯´ï¼Œéª—æ°ªæŠ€èƒ½ç»å¯¹åˆ°ä½ï¼Œå³ä½¿ä»–ä»¬åœ¨åƒbiliä¸€æ ·èµ°ä¸‹å¡è·¯ï¼Œä½†åœ¨å½“æ—¶ç¡®å®æ˜¯è€å¸æœºå¿…å¤‡çš„å°ä¼—äºŒæ¬¡å…ƒæ¸¸æˆã€‚\næ‚£ä¸­äºŒç—…é•¿è¾¾äº”å¹´çš„æˆ‘ï¼ˆåˆä¸­äºŒå¹´çº§ç¡®è¯Šï¼ï¼‰ä¹Ÿåœ¨é«˜ä¸­è¯­æ–‡ä½œæ–‡ç­”é¢˜çº¸é‡Œå†™ä¸‹äº†æ´‹æ´‹æ´’æ´’ä¹ç™¾å­—çš„æ¸¸æˆäººç”Ÿæ‚è°ˆï¼Œè¿˜ç»™äº†é«˜åˆ†ï¼ç›²çŒœè¯­æ–‡è€å¸ˆè¯»å®Œä¹‹åç›¸å½“çƒ­æ³ªç›ˆçœ¶ã€‚\næµ‘æµ‘å™©å™©æ‘¸é±¼å®Œæˆé«˜è€ƒï¼Œåœ¨æŸæœŸ\u0026quot;å·ç§°ç¡¬æ ¸å´ä¹Ÿæ²¡ä»€ä¹ˆå¹²è´§çš„\u0026quot;çŸ¥åæ¸¸æˆæ’­å®¢ï¼ˆè¯´çš„å°±æ˜¯ä½ ï¼Œå†…æ ¸ææ…Œï¼ï¼‰ä¸­äº†è§£åˆ°ï¼Œç”±äºç–«æƒ…åŸå› Switchå¼€å§‹æ¶¨ä»·æˆä¸ºç†è´¢äº§å“ã€åŠ¨æ£®è”æœºè·¯ç”±ç¿»å¢™ç­‰ç­‰ï¼Œå†åŠ ä¹‹é«˜è€ƒä¹‹å‰æ¯æ—¥è‹±è¯­å¬åŠ›å¤©å¤©åœ¨ç»™æˆ‘æ¨Switchå¥èº«ç¯ï¼Œäºæ˜¯åœ¨2021å¹´è·ç¦»åŒåäºŒè¿˜æœ‰æœ€åä¸€å‘¨çš„æŸä¸€å¤©ï¼Œæˆ‘å®åœ¨å¿ä¸ä½äº†â€”â€”æ—¥ç‰ˆSwitchç»­èˆªå¢å¼ºï¼Œå¿«åˆ°æˆ‘ç¢—é‡Œæ¥ï¼ï¼ï¼\nä½†æ˜¯Switchç°åœ¨ä¾æ—§åœ¨æ¸…å…³çš„è·¯ä¸Š\u0026hellip;\n","description":"","id":4,"section":"posts","tags":["Switch"],"title":"Switch | æ‚è°ˆè®°å¿†é‡Œçš„çº¢è“æ¸¸æˆæœº","uri":"http://blog.tantalum.life/posts/no-game-no-life/"},{"content":"å…ˆè¯´åºŸè¯ å»å¹´227å¯¼è‡´ao3(archive of our own)è¢«å¢™åï¼Œå¾®åšä¸Šå¼€å§‹æœ‰äººåšåå‘ä»£ç†åˆ†äº«ç»™ç½‘å‹ï¼Œå…¶ä¸­æœ‰ä½é«˜ä¸€æŠ€æœ¯å®…çš„åä»£è®©æˆ‘å°è±¡æ·±åˆ»â€”â€”ç½‘å€ç«Ÿç„¶å¯ä»¥ä»¥www1å¼€å¤´ï¼åæ¥æˆ‘æ‰å‘ç°äº’è”ç½‘â‰ ä¸‡ç»´ç½‘(www)\u0026hellip;\nå¦‚ä»Šæˆ‘ä¹Ÿæ˜¯æœ‰æœåŠ¡å™¨çš„äººäº†ï¼Œç®€å•è®°å½•ä¸€ä¸‹å¦‚ä½•åå‘ä»£ç†ä¸€ä¸ªç½‘ç«™ã€‚æ¯•ç«Ÿæœ‰çš„æ—¶å€™æŠŠèµ„æ–™åˆ†äº«ç»™å¢™å†…å‹äººç»“æœåè¢«æé†’ç½‘é¡µæ‰“ä¸å¼€ï¼Œä¹ŸæŒºå°´å°¬çš„\u0026hellip;ä¸è¿‡æ“ä½œçœŸçš„å¾ˆç®€å•ï¼Œæ°´ä¸€ç¯‡æ–‡ç« çºªå¿µä¸€ä¸‹nginxæŠ€èƒ½å¤§è¿›æ­¥ï¼\nå®‰è£…Nginx sudo -i #åˆ‡æ¢è‡³rootç”¨æˆ· apt install nginx -y #å®‰è£…nginx å¼€å¯VPSçš„443ç«¯å£ï¼š\nufw allow 443 sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT Nginxé…ç½® å‚è€ƒã€æ‚è°ˆã€‘å¦‚ä½•ä¼˜é›…åœ°æ­å»ºAO3çš„åä»£ï¼Œä»¥åå‘ä»£ç†ao3ä¸ºä¾‹ï¼Œè¿è¡Œnano /etc/nginx/conf.d/ao3.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nserver { listen 443 ssl http2; server_name YOUR.DOMAIN; #proxy.conf location / { proxy_pass https://archiveofourown.org; proxy_set_header Host archiveofourown.org; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header REMOTE-HOST $remote_addr; #é¿å…GZIPå½±å“æ–‡å­—æ›¿æ¢ gzip off; proxy_set_header Accept-Encoding \u0026quot;\u0026quot;; #æ— ç”¨èµ„æºæ›¿æ¢ä¸ºç©ºå€¼ sub_filter \u0026quot;twitter.com\u0026quot; \u0026quot; \u0026quot;; sub_filter \u0026quot;newrelic.com\u0026quot; \u0026quot; \u0026quot;; #å°†ç½‘é¡µåŸåŸŸåæ›¿æ¢ä¸ºåä»£åŸŸå sub_filter \u0026quot;archiveofourown.org\u0026quot; \u0026quot;YOUR.DOMAIN\u0026quot;; #å°†Jqueryç­‰å¼•ç”¨çš„é™æ€èµ„æºæ›¿æ¢åˆ°å›½å†…CDN sub_filter \u0026quot;ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js\u0026quot; \u0026quot;lib.baomitu.com/jquery/1.9.0/jquery.min.js\u0026quot;; sub_filter \u0026quot;ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js\u0026quot; \u0026quot;lib.baomitu.com/jqueryui/1.10.0/jquery-ui.min.js\u0026quot;; #å…è®¸å¤šæ–‡æœ¬æ›¿æ¢ sub_filter_once off; } #ssl setting here } å°†archiveofourown.orgæ”¹ä¸ºä½ æƒ³è¦åå‘ä»£ç†çš„ç½‘å€ï¼ŒYOUR.DOMAINæ”¹ä¸ºä½ çš„åŸŸåï¼Œä¿å­˜ã€‚\næµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx é…ç½®SSL å»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ï¼Œç„¶åå›åˆ°æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nsudo apt-get update sudo apt-get install software-properties-common sudo add-apt-repository universe sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install certbot python3-certbot-nginx -y sudo certbot --nginx æµè§ˆå™¨æ‰“å¼€ä½ çš„åŸŸåï¼Œæ­¤æ—¶åº”è¯¥å·²ç»æˆåŠŸäº†ã€‚Letâ€˜s encryptçš„è¯ä¹¦90å¤©åˆ°æœŸåéœ€è¦ç»­æœŸï¼Œå±Šæ—¶åªéœ€è¿è¡Œsudo certbot --nginxæŒ‰æç¤ºæ“ä½œå³å¯ã€‚\n","description":"","id":5,"section":"posts","tags":["Nginx"],"title":"Nginx | è®°å½•åå‘ä»£ç†è¿‡ç¨‹","uri":"http://blog.tantalum.life/posts/reverse-proxy-websites/"},{"content":"å‰è¨€ æ­£é€¢å¥³æƒä¸»ä¹‰æ’­å®¢ã€æµ·é©¬æ˜Ÿçƒã€‘è¢«å¢™ï¼ŒåŒä¸ºç¤¾ç§‘æ’­å®¢çš„ã€å°å£°å–§å“—ã€‘åœ¨å¾®åšä¸­å‘¼åï¼š\n æ’­å®¢çš„ç”¨æˆ·æœ‹å‹ä»¬ï¼Œæœ‰ä¸€å¥è¯å¯èƒ½ä½ å·²ç»å¬åˆ°å„ç§æ’­å®¢é‡å¤äº†æ— æ•°éï¼š\nè¯·ä½¿ç”¨æ³›ç”¨æ€§æ’­å®¢å®¢æˆ·ç«¯å®šé˜…æ’­å®¢\nRSS feedæ˜¯ä¸€ä¸ªæœ‰ä¸€äº›å¤è€çš„äº’è”ç½‘æŠ€æœ¯ï¼›åœ¨æ²¡æœ‰æ™ºèƒ½æ‰‹æœºã€æ²¡æœ‰appã€æ²¡æœ‰å¾®ä¿¡å’Œç¤¾äº¤åª’ä½“çš„æ—¶å€™ï¼ŒRSS feedæ˜¯ä¸€æ¡ç®€å•çš„ç”µå­æµï¼Œå°†æˆ‘ä»¬æ‰‹é‡Œçš„éº¦å…‹é£å’Œä½ ä»¬è€³æœµé‡Œçš„éœ‡åŠ¨è¿èµ·æ¥ã€‚\nä½ ä»¬å–œæ¬¢çš„æ’­å®¢å¤§å¤šä¼šåœ¨shownotesä¸­æä¾›RSS feedï¼›æ‹·è´è¿™ä¸ªfeedå°±å¯ä»¥åœ¨ä½ å–œæ¬¢çš„æ³›ç”¨æ€§å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚overcastï¼Œgoogle podcastï¼Œpocketcastæˆ–è€…è‹¹æœè‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼‰æ‰¾åˆ°é€šè¿‡RSSè®¢é˜…çš„å…¥å£ã€‚\nåœ¨æˆ‘ä»¬æ‰‹é‡Œçš„æ•°å­—ç©ºé—´å·²ç»è¢«å„ç§appã€ğŸ§±å åœ°ä¸ºç‹çš„æƒ…å†µä¸‹ï¼Œè¶Šå¤šäººä½¿ç”¨æ³›ç”¨æ€§å®¢æˆ·ç«¯è®¢é˜…ï¼Œæ’­å®¢ä¸»çš„è¡¨è¾¾å°±èƒ½è¶Šå‹‡æ•¢ã€‚æ‹œæ‰˜å¤§å®¶äº†ã€‚\n@å°å£°å–§å“—Loud_Murmurs\n æ„è¯†åˆ°RSSçš„é‡è¦æ€§ï¼ˆè™½ç„¶æˆ‘ä¸€ç›´åœ¨ç”¨google podcastï¼‰ï¼Œæˆ‘æ­äº†è¿™ä¸ªRSSHubï¼šhttps://rss.tantalum.life/ã€‚Docker-composeæ“ä½œå¾ˆç®€å•ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æˆ‘çš„æ­å»ºè¿‡ç¨‹ã€‚\næ³¨æ„ï¼š\næœ¬æ•™ç¨‹çœç•¥äº†ä¸€äº›ä¸Docker\u0026amp;Docker composeç›¸å…³çš„çŸ¥è¯†ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å‚è€ƒè¿™é‡Œå®‰è£…ã€‚ æ­å»ºè¿‡ç¨‹ çœ‹äº†ä¸€ä¸‹RSSHubé¡¹ç›®çš„docker-compose.ymlï¼Œæœ‰é‚£ä¹ˆä¸€ä¸¢ä¸¢çš„ä¸æ»¡æ„ï¼š\nversion: '3' services: rsshub: image: diygod/rsshub restart: always ports: - '1200:1200' environment: NODE_ENV: production CACHE_TYPE: redis REDIS_URL: 'redis://redis:6379/' PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000' depends_on: - redis - browserless browserless: # See issue 6680 image: browserless/chrome:1.43-chrome-stable restart: always ulimits: core: hard: 0 soft: 0 redis: image: redis:alpine restart: always volumes: - redis-data:/data volumes: redis-data: emmmï¼Œè¿™æ ·çš„è¯éœ€è¦é¢å¤–åˆ›å»ºvolumeæŒä¹…åŒ–Redisç¼“å­˜ï¼Œåç»­ä¸å¥½ç»´æŠ¤ï¼Œå¯ä»¥ç›´æ¥æŠŠvolumeå›ºå®šä»¥æ–‡ä»¶å½¢å¼å­˜åœ¨ã€‚åˆå‚è€ƒäº†sleeleçš„åšå®¢ä½¿ç”¨watchtoweræ›´æ–°å®¹å™¨å’Œé•œåƒï¼Œæœ€åå†…å®¹å¦‚ä¸‹ï¼š\nversion: '3' services: rsshub: image: diygod/rsshub restart: always ports: - '1200:1200' environment: NODE_ENV: production CACHE_TYPE: redis REDIS_URL: 'redis://redis:6379/' PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000' depends_on: - redis - browserless browserless: image: browserless/chrome:1.43-chrome-stable restart: always redis: image: redis:alpine restart: always volumes: - ./redis:/data watchtower: image: containrrr/watchtower container_name: watchtower restart: always environment: - TZ=Asia/Shanghai volumes: - /var/run/docker.sock:/var/run/docker.sock command: rsshub_service.rsshub_1 --cleanup --interval 1200 æŠŠä»¥ä¸Šå†…å®¹å†™å…¥docker-compose.ymlä¸­ï¼Œä¿å­˜ï¼Œç„¶åè¿è¡Œdocker-compose up -då°±æ­å¥½äº†ã€‚\nNginxåå‘ä»£ç† å¦‚æœä½ æ²¡æœ‰åŸŸåï¼Œå¯ä»¥è·³è¿‡è¿™æ­¥ã€‚\né¦–å…ˆå»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ï¼Œç„¶åå›åˆ°æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nsudo -i #åˆ‡æ¢è‡³rootç”¨æˆ· apt install nginx -y #å®‰è£…nginx è¿è¡Œnano /etc/nginx/conf.d/rsshub.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nserver { listen 80; server_name ä½ çš„åŸŸå; location / { proxy_pass http://localhost:1200; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } } æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx è¿è¡Œsudo certbot --nginxè·å–SSLè¯ä¹¦ã€‚\nä½¿ç”¨ å¦‚æœæ­¤æ—¶è®¿é—®ä½ çš„åŸŸåï¼ˆæ²¡æœ‰åŸŸååˆ™è®¿é—®https://æœåŠ¡å™¨ip:1200/ï¼‰æ˜¾ç¤ºè¿™ä¸ªé¡µé¢ï¼š\né‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»æœ‰äº†è‡ªå·±çš„RSSHubäº†ã€‚å¦‚ä½•ä½¿ç”¨ä½ çš„RSSHubè¯·çœ‹å®˜æ–¹æ–‡æ¡£ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è·¯ç”±æ ¼å¼æ›¿æ¢è®¢é˜…ä¿¡æ¯ï¼Œå°†ç¤ºä¾‹åŸŸåhttps://rsshub.appç›´æ¥æ›¿æ¢ä¸ºä½ è‡ªéƒ¨ç½²çš„åŸŸåå³å¯ã€‚å¦‚æœ‰é—®é¢˜è¯·çœ‹å¸¸è§é—®é¢˜ã€‚\nåè®° å…³äºå¥³æ€§ä¸»ä¹‰æ’­å®¢çš„æ¨èï¼Œè¿™ä¸ªè±†ç“£å¸–æœ‰åˆ—å‡ºä¹ä¸ªè´¨é‡ä¸é”™çš„æ’­å®¢ã€‚ä¸ºäº†é˜²æ­¢æ­¤å¸–ä¹Ÿ404ï¼ˆå¯èƒ½æœ‰ç‚¹æäººå¿§å¤©ï¼‰ï¼Œè€ŒArchiveä¹Ÿä¸èƒ½å¤‡ä»½è±†ç“£å†…å®¹ï¼Œæ‰€ä»¥æˆ‘æ‰‹åŠ¨å¤‡ä»½åˆ°äº†Github Issueä¸Šï¼Œæ“ä½œæ–¹å¼å‚è€ƒè¿™é‡Œã€‚\n ä¸‡ç‰©çš†å¯ RSSï¼\n","description":"","id":6,"section":"posts","tags":["RSSHub","Docker"],"title":"RSSHub | åˆ©ç”¨Docker-composeæ­å»ºRSSç”Ÿæˆå™¨","uri":"http://blog.tantalum.life/posts/build-rsshub-in-docker/"},{"content":"å¯¹ä¸èµ·æˆ‘åˆæ¥äº†ï¼Œè¿™æ¬¡å› ä¸ºå¸®çš®å¡”ä¸˜æ­æ¯›è±¡æ‰€ä»¥å¯ç”¨äº†æˆ‘å°˜å°å·²ä¹…ï¼ˆæ˜æ˜å¤©å¤©éƒ½åœ¨è¿è¡Œï¼‰çš„æœåŠ¡å™¨ï¼å› ä¸ºçœ‹åˆ°äº†pullopenç«™é•¿å†™çš„åšå®¢ï¼šæœ‰äº†ä¸€ä¸ªVPSèƒ½åšä»€ä¹ˆï¼Œå¯¹plumeéå¸¸çœ¼é¦‹ï¼š\n tagç³»ç»Ÿå’Œæœç´¢åŠŸèƒ½å®Œå–„ï¼Œå¯é«˜çº§æœç´¢ï¼Œå¯ä»¥ä¼ å›¾ï¼Œä¸Mastodonçš„åŒæ­¥ä¼˜äºå…¶ä»–å¹³å°ï¼Œå¯ä»¥ç›´æ¥ä»mastodonç­‰å¹³å°è¯„è®ºï¼Œè€Œä¸åƒWordPressæ’ä»¶æˆ–è€…Writefreelyä¸€æ ·åªæ˜¯åšå®¢å¹³å°å¥—äº†ä¸ªè‡ªåŠ¨å‘å¸ƒçš„å£³ã€‚æœ€è¿‘æ›´æ–°æ›´æ˜¯å¢åŠ äº†å¯¹ä¸­æ–‡ç•Œé¢çš„æ”¯æŒã€‚\n å¯¹ï¼Œwritefreelyç°åœ¨å¯¹fediçš„æ”¯æŒè¿˜åœ¨å¼€å‘é˜¶æ®µï¼Œå¯ç”¨fediäº’è”åŠŸèƒ½ä¹‹ååœ¨æ¯›è±¡ä¸Šçœ‹ï¼Œå°±æ˜¯ä¸ªå¥—ç€å‘å¸ƒé“¾æ¥çš„å£³\u0026hellip;\nå› ä¸ºä¸æ»¡è¶³writefreelyçš„å¥—å£³å‘å¸ƒï¼Œå°±å¿ƒè¡€æ¥æ½®æ­äº†plumeï¼Œè§ä¸‹å›¾ã€‚\nåˆšæ­å»ºçš„Plumeç«™ç‚¹: Oneæ‚ç‰©é¦†   ä¸è¿‡plumeä¼¼ä¹æ˜¯ç”¨äºŒè¿›åˆ¶æ–‡ä»¶æ­å»ºæ›´é«˜æ•ˆï¼Œå‚è€ƒInstalling Plume (fediverse blog platform)ã€‚è¿™ç¯‡æ–‡ç« ä¸saltç«™é•¿å†™çš„å»ä¸­å¿ƒåŒ–åšå®¢ WriteFreely æ­å»ºæŒ‡å—éå¸¸åƒï¼Œå› ä¸ºéƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶æ­å»ºã€‚è¿™ä¸¤ç¯‡æ–‡ç« å‡æœ‰éƒ¨åˆ†å‚è€ƒã€‚\nå®‰è£…docker\u0026amp;docker-compose é¦–å…ˆåˆ¤æ–­è‡ªå·±çš„VPSæ¶æ„ï¼š\nuname -a dpkg --print-architecture ç„¶åæŒ‰ç…§dockerå®˜æ–¹æ–‡æ¡£é€‰æ‹©è‡ªå·±çš„æœåŠ¡å™¨ç³»ç»Ÿè¿›è¡Œå®‰è£…ï¼Œå†å®‰è£…docker composeã€‚\næˆ–è€…æ˜¯ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ä¸€é”®è„šæœ¬å®‰è£…ï¼š\nbash \u0026lt;(curl -L https://get.docker.com/) sudo curl -L \u0026quot;https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)\u0026quot; -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose æ‹‰å–plumeé…ç½®æ–‡ä»¶ä¸dockeræ–‡ä»¶ å‚è€ƒplumeå®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœå°†plumeçš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨/opt/plumeæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ™è¿è¡Œï¼š\ncd /opt #è·³è½¬åˆ°/optæ–‡ä»¶å¤¹ä¸‹ mkdir plume #æ–°å»ºplumeæ–‡ä»¶å¤¹ cd plume #è·³è½¬åˆ°/opt/plumeï¼Œè¿™å°†æ˜¯ä½ çš„plumeé…ç½®æ–‡ä»¶å¤¹ # æ ¹æ®è‡ªå·±çš„æœåŠ¡å™¨æ¶æ„æ‹‰å–ç›¸åº”çš„docker-compose.ymlï¼Œé»˜è®¤amd64æ¶æ„æ‹‰å–ç¬¬ä¸€ä¸ª curl https://docs.joinplu.me/docker-compose.sample.yml \u0026gt; docker-compose.yml # å¦‚æœä½ çš„æœåŠ¡å™¨æ¶æ„æ˜¯arm32v7åˆ™æ‹‰å–è¿™ä¸ª curl https://docs.joinplu.me/docker-compose.sample.arm32v7.yml \u0026gt; docker-compose.yml # å¦‚æœä½ çš„æœåŠ¡å™¨æ¶æ„æ˜¯arm64v8åˆ™æ‹‰å–è¿™ä¸ª curl https://docs.joinplu.me/docker-compose.sample.arm64v8.yml \u0026gt; docker-compose.yml curl https://docs.joinplu.me/docker.sample.env \u0026gt; .env #æ‹‰å–plumeçš„ç¯å¢ƒå˜é‡æ–‡ä»¶å¹¶å‘½åä¸º.env è¿è¡Œopenssl rand -base64 32ï¼Œå¤åˆ¶è·å–çš„32ä½éšæœºå­—ç¬¦ï¼Œç„¶åå‚è€ƒplumeå®˜æ–¹æ–‡æ¡£æœ‰ç”¨çš„ç¯å¢ƒå˜é‡ç¼–è¾‘æ–°åˆ›å»ºçš„.envæ–‡ä»¶ï¼š\nBASE_URL=plume.tantalum.life #ä½ çš„åŸŸå # generate one with openssl rand -base64 32 ROCKET_SECRET_KEY=æŠŠåˆšåˆšè·å¾—çš„éšæœºå­—ç¬¦ç²˜è´´åˆ°è¿™é‡Œ # Mail settings MAIL_SERVER=smtp.zoho.com #é‚®ç®±æœåŠ¡çš„smtp MAIL_USER=ä½ çš„é‚®ä»¶æœåŠ¡é‚®ç®± MAIL_PASSWORD=é‚®ç®±å¯†ç ï¼Œæˆ–æ˜¯éœ€è¦æ‰‹åŠ¨è·å–çš„åº”ç”¨å¯†ç  MAIL_HELO_NAME=å¡«å†™ä½ çš„åŸŸåå°±è¡Œï¼Œè¿™æ˜¯å¤æ—©çš„smtpè®¾ç½®å‚æ•° # DATABASE SETUP POSTGRES_PASSWORD=å¡«å†™æ•°æ®åº“å¯†ç ï¼Œè‡ªå·±è®¾ç½®ï¼Œé»˜è®¤passw0rd POSTGRES_USER=plume POSTGRES_DB=plume # you can safely leave those defaults DATABASE_URL=postgres://plume:æ•°æ®åº“å¯†ç @postgres:5432/plume #å¦‚æœæ•°æ®åº“å¯†ç ä¸ºé»˜è®¤çš„passw0rd,åˆ™å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ MIGRATION_DIRECTORY=migrations/postgres USE_HTTPS=1 ROCKET_ADDRESS=0.0.0.0 ROCKET_PORT=7878 æ³¨æ„ï¼šç›®å‰ï¼ŒPlume ä»…åœ¨æ‚¨éœ€è¦é‡ç½®å¯†ç æ—¶å‘é€é‚®ä»¶ï¼ˆå¹¶ä¸”ä»…ä» Web ç•Œé¢ï¼Œplm users reset-passwordä¸å‘é€ä»»ä½•ä¸œè¥¿ï¼‰ã€‚ å¦‚æœæ‚¨ä¸æ‰“ç®—ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°åˆ é™¤ï¼ˆæˆ–æ³¨é‡Šï¼‰ç”¨äºé…ç½®é‚®ä»¶æœåŠ¡å™¨çš„å‚æ•°ã€‚ ä¿å­˜é€€å‡ºã€‚\né…ç½®æ•°æ®åº“ é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹docker-compose.ymlæ–‡ä»¶ï¼Œè¿è¡Œnano docker-compose.ymlï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\nversion: '3' services: postgres: image: postgres:10.5 env_file: .env restart: unless-stopped volumes: - \u0026quot;./data/postgres:/var/lib/postgresql/data\u0026quot; plume: image: plumeorg/plume:latest env_file: .env restart: unless-stopped volumes: - \u0026quot;./data/plume/static/media:/app/static/media\u0026quot; - \u0026quot;./.env:/app/.env\u0026quot; - \u0026quot;./search_index:/app/search_index\u0026quot; ports: - \u0026quot;127.0.0.1:7878:7878\u0026quot; è§‚å¯Ÿæ­¤æ–‡ä»¶ï¼Œå¯ä»¥å‘ç°plumeçš„æ•°æ®åº“ä½¿ç”¨äº†postgres10.5ç‰ˆæœ¬ï¼ŒæŒä¹…åŒ–æ•°æ®volumesä½äº./data/postgresï¼ˆç›¸å¯¹åœ°å€ï¼‰ï¼Œä¹Ÿå°±æ˜¯/opt/plume/data/postgresï¼ˆç»å¯¹åœ°å€ï¼‰ã€‚\næ­¤å¤„æœ‰å‚è€ƒå…”é…±çš„è¿™ç¯‡æ–‡ç« ï¼Œè¿è¡Œï¼š\ndocker run --name postgres10 -v /data/postgres:/var/lib/postgresql/data -e POSTGRES_PASSWORD=è‡ªå·±è®¾ç½®çš„æ•°æ®åº“å¯†ç  -d postgres:10.5-alpine #æ‹‰å–pgé•œåƒå¹¶åˆå§‹åŒ–pgåº“ï¼Œå°†ä¸´æ—¶å®¹å™¨å‘½åä¸ºpostgres10ï¼ŒæŒ‚è½½volumeåˆ°ä¸Šé¢çš„æŒä¹…åŒ–æ•°æ®æ‰€åœ¨æ–‡ä»¶å¤¹ docker exec -it postgres10 createuser -U postgres --pwprompt plume #åˆ›å»ºä¸€ä¸ªç”¨äºè¿æ¥æ•°æ®åº“çš„ç”¨æˆ·plumeå¹¶è¾“å…¥ä½ çš„å¯†ç  docker exec -it postgres10 psql -U postgres #è¿›å…¥æ•°æ®åº“ è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åplumeï¼Œæ‰€æœ‰è€…ä¸ºæ•°æ®åº“ç”¨æˆ·plumeçš„æ•°æ®åº“ï¼š\nCREATE DATABASE plume ENCODING 'UTF8' LC_COLLATE='C' LC_CTYPE='C' template=template0 OWNER plume; \\q ç»ˆæ­¢ä¸´æ—¶postgreså®¹å™¨å¹¶åˆ é™¤ï¼š\ndocker stop postgres10 docker rm postgres10 å®‰è£…plume ç”±äºæŒä¹…åŒ–æ•°æ®volumeæ‰€åœ¨æ–‡ä»¶å¤¹/opt/plume/data/postgresæœªè¢«åˆ é™¤ï¼Œæ‰€ä»¥å¯ä»¥ç»™plumeä½¿ç”¨ï¼š\ndocker-compose pull #æ‹‰å–plumeæ‰€éœ€çš„é•œåƒ docker-compose up -d postgres #å¯åŠ¨æ•°æ®åº“å®¹å™¨ docker-compose run --rm plume plm migration run #æ•°æ®åº“ç¬¬ä¸€æ¬¡è¿ç§»è¿è¡Œ docker-compose run --rm plume plm search init #è®¾ç½®ä½ çš„ç«™ç‚¹ docker-compose run --rm plume plm instance new -d 'domain.name' -n 'instance name' -l 'default licence' #domain.comæ”¹ä¸ºä½ çš„åŸŸåï¼Œinstance nameæ”¹ä¸ºä½ çš„ç«™ç‚¹åï¼ˆæ”¯æŒä¸­æ–‡ï¼Œå¯åœ¨ç½‘é¡µä¸Šæ›´æ”¹ï¼‰ï¼Œdefault licenceæ˜¯é»˜è®¤æ–‡ç« è®¸å¯åè®®ï¼ˆå¯åœ¨ç½‘é¡µä¸Šæ›´æ”¹ï¼‰ #æ³¨å†Œç®¡ç†å‘˜å¸å· docker-compose run --rm plume plm users new -n 'admin' -N 'name' -b 'bio' -e 'admin@domain.name' -p 'pass' --admin #å‚æ•°nçš„å€¼ä¸ºç”¨æˆ·åï¼Œå‚æ•°Nçš„å€¼ä¸ºä½ çš„æ˜µç§°ï¼Œå‚æ•°bçš„å€¼ä¸ºä½ çš„æ‘˜è¦ï¼ˆä¸ªäººèµ„æ–™ï¼Œå…ˆä¸ç”¨ç®¡ï¼Œå¯ä»¥åœ¨ç½‘é¡µä¸Šæ”¹ï¼‰,å‚æ•°eçš„å€¼ä¸ºä½ çš„é‚®ç®±ï¼Œå‚æ•°pçš„å€¼æ˜¯ç®¡ç†å‘˜å¸å·çš„å¯†ç  docker-compose up -d #ç«™ç‚¹å¯åŠ¨ Nginxåå‘ä»£ç† å®˜æ–¹æ–‡æ¡£çš„æ•™ç¨‹åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½†æ˜¯åå‘ä»£ç†è¿˜æ²¡å®Œæˆï¼Œå‚è€ƒInstalling Plume (fediverse blog platform)ä¸€æ–‡ï¼Œä¸ºç«™ç‚¹æ·»åŠ åå‘ä»£ç†ã€‚\né¦–å…ˆåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œå®‰è£…nginxï¼ˆå·²å®‰è£…åˆ™è·³è¿‡ï¼‰ï¼š\nsudo -i apt install nginx -y å¼€å¯VPSçš„80/443ç«¯å£ï¼š\nufw allow 80 ufw allow 443 sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT å»DNSæœåŠ¡å•†æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipï¼Œå†…å®¹ä¸ºåŸŸåçš„Aè®°å½•ã€‚è¿™é‡Œç»™å‡ºä¸¤ç§æ·»åŠ åå‘ä»£ç†çš„æ–¹æ³•ï¼Œæ•ˆæœå’Œé…ç½®æ–‡ä»¶éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ¯”è¾ƒç®€å•ã€‚\nç¬¬ä¸€ç§æ–¹æ³• nano /etc/nginx/conf.d/plume.conf #æ–°å»ºplume.conf å°†ä»¥ä¸‹é…ç½®è´´å…¥å¹¶æ›¿æ¢ä½ çš„åŸŸåï¼Œä¿å­˜ã€‚\nserver { listen 80; listen [::]:80; server_name ä½ çš„åŸŸå; return 301 https://ä½ çš„åŸŸå$request_uri; } server { listen 443 ssl http2; listen [::]:443 ssl http2; location / { proxy_pass http://localhost:7878; proxy_set_header Host $host; proxy_set_header Connection $http_connection; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Scheme $scheme; proxy_buffering off; } server_name ä½ çš„åŸŸå; #ssl_certificate /etc/letsencrypt/live/ä½ çš„åŸŸå/fullchain.pem; #ssl_certificate_key /etc/letsencrypt/live/ä½ çš„åŸŸå/privkey.pem; #ssl_trusted_certificate /etc/letsencrypt/live/ä½ çš„åŸŸå/fullchain.pem; access_log /var/log/nginx/plume.access.log; error_log /var/log/nginx/plume.error.log; } æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx ç¬¬äºŒç§æ–¹æ³• nano /etc/nginx/sites-available/plume.conf #æ–°å»ºplume.conf å°†æ–¹æ³•ä¸€ä¸­plume.confçš„é…ç½®è´´å…¥å¹¶æ›¿æ¢ä½ çš„åŸŸåï¼Œä¿å­˜ã€‚\nå°†é…ç½®æ–‡ä»¶æ˜ å°„åˆ°/etc/nginx/sites-enabled/plume.confï¼š\nln -s /etc/nginx/sites-available/plume.conf /etc/nginx/sites-enabled/plume.conf æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼ˆè¯•è¿è¡Œï¼‰ï¼š\nnginx -t è‹¥æ²¡æœ‰é”™è¯¯ï¼Œç”Ÿæ•ˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶è¿è¡Œ Nginxï¼Œå¼€æœºå¯åŠ¨ï¼š\nnginx -s reload systemctl start nginx systemctl enable nginx é…ç½®SSL sudo apt-get update sudo apt-get install software-properties-common sudo add-apt-repository universe sudo add-apt-repository ppa:certbot/certbot sudo apt-get update sudo apt-get install certbot python3-certbot-nginx -y sudo certbot --nginx Letâ€˜s encryptçš„è¯ä¹¦90å¤©åˆ°æœŸåéœ€è¦ç»­æœŸï¼Œå±Šæ—¶åªéœ€è¿è¡Œsudo certbot --nginxæŒ‰æç¤ºæ“ä½œå³å¯ã€‚\n","description":"","id":7,"section":"posts","tags":["Plume","Docker"],"title":"Plume | åˆ©ç”¨Docker-composeæ­å»ºFediåšå®¢å¹³å°","uri":"http://blog.tantalum.life/posts/build-plume-in-docker/"},{"content":"æ˜¨æ™šæˆ‘èµ°åœ¨è·¯ä¸Šçš„æ—¶å€™çªç„¶æƒ³åˆ°ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œæˆ‘å–œæ¬¢çš„ä½œå“ä¸€å®šä¼šå˜å¾—è¶Šæ¥è¶Šå¤šï¼Œè€Œæˆ‘çš„è—ä¹¦é˜é‡Œç›®å‰ä»…ä½¿ç”¨äº†Tagså’ŒCategoriesçš„æ ‘çŠ¶åˆ†ç±»æ³•ï¼Œå°±ç®—æ˜¯ä¸ªè‡ªç•™åœ°ï¼Œæ—¥ååœ¨åšå®¢å†…æŒ‡åå¯»æ‰¾æŸä¸ªä½œå“ä¸€å®šæ˜¯è€—æ—¶çš„ã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ä½³æ–¹æ¡ˆå°±æ˜¯ä¸ºåšå®¢æ·»åŠ æœç´¢åŠŸèƒ½ã€‚\næœ€å¼€å§‹æˆ‘å°è¯•çš„æ–¹æ¡ˆæ˜¯å®‰è£…æœç´¢æ’ä»¶hugo-search-fuse-jsã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºFuse.jsçš„ä¸»é¢˜æ’ä»¶ï¼Œä½†ä¸çŸ¥ä¸ºä»€ä¹ˆï¼Œsearché¡µé¢æ²¡æœ‰æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚æ­£å½“æˆ‘æ‰“ç®—æ”¾å¼ƒçš„æ—¶å€™ï¼Œæˆ‘åˆå‘ç°äº†å¦ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„æœç´¢æ–¹æ¡ˆï¼šHugo Fast Searchï¼Œä¸éœ€è¦æ³¨å†Œç™»å½•ï¼Œæ²¡æœ‰æŠ“å–æ¬¡æ•°é™åˆ¶ï¼Œæœ€å°ä¾èµ–æ— éœ€ç¼–è¯‘ã€‚\n5åˆ†é’Ÿç»™Hugoåšå®¢å¢åŠ æœç´¢åŠŸèƒ½  è¿™ä½åšä¸»å¯¹æœç´¢åŠŸèƒ½è¿›è¡Œäº†å®¢åˆ¶åŒ–é­”æ”¹ï¼š\n å…è®¸é€šè¿‡ç‚¹å‡»é¡µé¢ç©ºç™½å¤„éšè—æœç´¢æ¡†ï¼Œè€Œä¸æ˜¯åªèƒ½æŒ‰Esc åœ¨å³ä¸Šè§’æ·»åŠ äº†ä¸€ä¸ªæœç´¢æŒ‰é’®ï¼Œæ–¹ä¾¿ä¸æƒ³æŒ‰å¿«æ·é”®çš„äºº é»˜è®¤çš„å¿«æ·é”®ç”±äºFirefox Linuxé»˜è®¤ Super-/æ˜¯ Quick Find åŠŸèƒ½ï¼Œå› æ­¤æ”¹æˆäº† Alt-/   å¼€å§‹é…ç½® æ·»åŠ index.json æˆ‘ä½¿ç”¨çš„ä¸»é¢˜æ˜¯å·²ç»è¢«ä½œè€…å¼ƒå‘çš„Mogegeï¼Œé¦–å…ˆæ·»åŠ index.jsonæ–‡ä»¶åˆ°layouts/_defaultï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5  {{- $.Scratch.Add \u0026#34;index\u0026#34; slice -}} {{- range .Site.RegularPages -}} {{- $.Scratch.Add \u0026#34;index\u0026#34; (dict \u0026#34;title\u0026#34; .Title \u0026#34;tags\u0026#34; .Params.tags \u0026#34;categories\u0026#34; .Params.categories \u0026#34;contents\u0026#34; .Plain \u0026#34;permalink\u0026#34; .Permalink \u0026#34;date\u0026#34; .Date \u0026#34;section\u0026#34; .Section) -}} {{- end -}} {{- $.Scratch.Get \u0026#34;index\u0026#34; | jsonify -}}   ä¿®æ”¹é…ç½®æ–‡ä»¶config.toml åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ï¼š\n1 2  [outputs] home = [\u0026#34;HTML\u0026#34;, \u0026#34;RSS\u0026#34;, \u0026#34;JSON\u0026#34;]   æ·»åŠ jsæ–‡ä»¶ æ·»åŠ fastsearch.jså’Œfuse.min.jsåˆ°static/jsã€‚fuse.min.jså¯ä»Releasesé¡µé¢ä¸‹è½½source codeåè§£å‹è¿›å…¥distæ–‡ä»¶å¤¹å°±èƒ½æ‰¾åˆ°ã€‚fastsearch.jså†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180  var fuse; // holds our search engine var fuseIndex; var searchVisible = false; var firstRun = true; // allow us to delay loading json data unless search activated var list = document.getElementById(\u0026#39;searchResults\u0026#39;); // targets the \u0026lt;ul\u0026gt; var first = list.firstChild; // first child of search list var last = list.lastChild; // last child of search list var maininput = document.getElementById(\u0026#39;searchInput\u0026#39;); // input box for search var resultsAvailable = false; // Did we get any search results?  // ========================================== // The main keyboard event listener running the show // document.addEventListener(\u0026#39;keydown\u0026#39;, function(event) { // CMD-/ to show / hide Search  if (event.altKey \u0026amp;\u0026amp; event.which === 191) { // Load json search index if first time invoking search  // Means we don\u0026#39;t load json unless searches are going to happen; keep user payload small unless needed  doSearch(event) } // Allow ESC (27) to close search box  if (event.keyCode == 27) { if (searchVisible) { document.getElementById(\u0026#34;fastSearch\u0026#34;).style.visibility = \u0026#34;hidden\u0026#34;; document.activeElement.blur(); searchVisible = false; } } // DOWN (40) arrow  if (event.keyCode == 40) { if (searchVisible \u0026amp;\u0026amp; resultsAvailable) { console.log(\u0026#34;down\u0026#34;); event.preventDefault(); // stop window from scrolling  if ( document.activeElement == maininput) { first.focus(); } // if the currently focused element is the main input --\u0026gt; focus the first \u0026lt;li\u0026gt;  else if ( document.activeElement == last ) { last.focus(); } // if we\u0026#39;re at the bottom, stay there  else { document.activeElement.parentElement.nextSibling.firstElementChild.focus(); } // otherwise select the next search result  } } // UP (38) arrow  if (event.keyCode == 38) { if (searchVisible \u0026amp;\u0026amp; resultsAvailable) { event.preventDefault(); // stop window from scrolling  if ( document.activeElement == maininput) { maininput.focus(); } // If we\u0026#39;re in the input box, do nothing  else if ( document.activeElement == first) { maininput.focus(); } // If we\u0026#39;re at the first item, go to input box  else { document.activeElement.parentElement.previousSibling.firstElementChild.focus(); } // Otherwise, select the search result above the current active one  } } }); // ========================================== // execute search as each character is typed // document.getElementById(\u0026#34;searchInput\u0026#34;).onkeyup = function(e) { executeSearch(this.value); } document.querySelector(\u0026#34;body\u0026#34;).onclick = function(e) { if (e.target.tagName === \u0026#39;BODY\u0026#39; || e.target.tagName === \u0026#39;DIV\u0026#39;) { hideSearch() } } document.querySelector(\u0026#34;#search-btn\u0026#34;).onclick = function(e) { doSearch(e) } function doSearch(e) { e.stopPropagation(); if (firstRun) { loadSearch() // loads our json data and builds fuse.js search index  firstRun = false // let\u0026#39;s never do this again  } // Toggle visibility of search box  if (!searchVisible) { showSearch() // search visible  } else { hideSearch() } } function hideSearch() { document.getElementById(\u0026#34;fastSearch\u0026#34;).style.visibility = \u0026#34;hidden\u0026#34; // hide search box  document.activeElement.blur() // remove focus from search box  searchVisible = false } function showSearch() { document.getElementById(\u0026#34;fastSearch\u0026#34;).style.visibility = \u0026#34;visible\u0026#34; // show search box  document.getElementById(\u0026#34;searchInput\u0026#34;).focus() // put focus in input box so you can just start typing  searchVisible = true } // ========================================== // fetch some json without jquery // function fetchJSONFile(path, callback) { var httpRequest = new XMLHttpRequest(); httpRequest.onreadystatechange = function() { if (httpRequest.readyState === 4) { if (httpRequest.status === 200) { var data = JSON.parse(httpRequest.responseText); if (callback) callback(data); } } }; httpRequest.open(\u0026#39;GET\u0026#39;, path); httpRequest.send(); } // ========================================== // load our search index, only executed once // on first call of search box (CMD-/) // function loadSearch() { console.log(\u0026#39;loadSearch()\u0026#39;) fetchJSONFile(\u0026#39;/index.json\u0026#39;, function(data){ var options = { // fuse.js options; check fuse.js website for details  shouldSort: true, location: 0, distance: 100, threshold: 0.4, minMatchCharLength: 2, keys: [ \u0026#39;permalink\u0026#39;, \u0026#39;title\u0026#39;, \u0026#39;tags\u0026#39;, \u0026#39;contents\u0026#39; ] }; // Create the Fuse index  fuseIndex = Fuse.createIndex(options.keys, data) fuse = new Fuse(data, options, fuseIndex); // build the index from the json file  }); } // ========================================== // using the index we loaded on CMD-/, run // a search query (for \u0026#34;term\u0026#34;) every time a letter is typed // in the search box // function executeSearch(term) { let results = fuse.search(term); // the actual query being run using fuse.js  let searchitems = \u0026#39;\u0026#39;; // our results bucket  if (results.length === 0) { // no results based on what was typed into the input box  resultsAvailable = false; searchitems = \u0026#39;\u0026#39;; } else { // build our html  // console.log(results)  permalinks = []; numLimit = 5; for (let item in results) { // only show first 5 results  if (item \u0026gt; numLimit) { break; } if (permalinks.includes(results[item].item.permalink)) { continue; } // console.log(\u0026#39;item: %d, title: %s\u0026#39;, item, results[item].item.title)  searchitems = searchitems + \u0026#39;\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;\u0026#39; + results[item].item.permalink + \u0026#39;\u0026#34; tabindex=\u0026#34;0\u0026#34;\u0026gt;\u0026#39; + \u0026#39;\u0026lt;span class=\u0026#34;title\u0026#34;\u0026gt;\u0026#39; + results[item].item.title + \u0026#39;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026#39;; permalinks.push(results[item].item.permalink); } resultsAvailable = true; } document.getElementById(\u0026#34;searchResults\u0026#34;).innerHTML = searchitems; if (results.length \u0026gt; 0) { first = list.firstChild.firstElementChild; // first result container â€” used for checking against keyboard up/down location  last = list.lastChild.firstElementChild; // last result container â€” used for checking against keyboard up/down location  } }   æ·»åŠ HTMLä»£ç åˆ°ä¸»é¢˜é‡Œ æˆ‘å°†ä»£ç æ·»åŠ åˆ°/layouts/partials/header.htmlï¼Œä¹Ÿå¯ä»¥åœ¨layouts/_default/baseof.htmlæ·»åŠ ï¼š\n1 2 3 4 5 6 7 8 9 10  \u0026lt;!-- åœ¨menu-itemä»£ç æ®µä¸‹ï¼ˆå¯¹åº”åšå®¢èœå•æ åï¼‰æ·»åŠ --\u0026gt; \u0026lt;a id=\u0026#34;search-btn\u0026#34; style=\u0026#34;display: inline-block;\u0026#34; href=\u0026#34;javascript:void(0);\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;fas fa-angle-down\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;div id=\u0026#34;fastSearch\u0026#34;\u0026gt; \u0026lt;input id=\u0026#34;searchInput\u0026#34; tabindex=\u0026#34;0\u0026#34;\u0026gt; \u0026lt;ul id=\u0026#34;searchResults\u0026#34;\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt;   iæ ‡ç­¾è°ƒç”¨äº†å…è´¹çš„Font Awesomeå›¾æ ‡ã€‚å¦‚æœæ²¡æœ‰ç”¨è¿‡è¿™å¥—å›¾æ ‡è¯·çœ‹è¿™ç¯‡åšå®¢ã€‚æˆ‘åœ¨è¿™é‡Œç”¨çš„å›¾æ ‡æ˜¯ä¸‹æ ‡(angle-down)ï¼Œæ•ˆæœè¯·å»è¿™é‡ŒæŸ¥çœ‹ã€‚\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„å›¾æ ‡ï¼Œæˆ‘è¯•ç”¨è¿‡æœç´¢(search)ï¼Œç¾½æ¯›ç¬”(feather-alt)ï¼Œçº¸é£æœº(paper-plane)ï¼Œå·¦å¼•å·(quote-left)å’Œå¯¹è¯æ¡†(discourse)éƒ½è¿˜ä¸é”™ï¼Œç”šè‡³æŠŠè°ƒç”¨å›¾æ ‡è¿™ä¸€åŠ¨ä½œæ”¹ä¸ºæ’å…¥æ–‡å­—éƒ½æ²¡é—®é¢˜ï¼Œå°†\u0026lt;i class=\u0026quot;fas fa-iconname\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;æ”¹ä¸º\u0026lt;span\u0026gt;è¿™é‡Œå¡«å†™ä½ æƒ³æ˜¾ç¤ºçš„æ–‡å­—\u0026lt;/span\u0026gt;ï¼Œä¾‹å¦‚\u0026lt;span\u0026gt;search\u0026lt;/span\u0026gt;å³å¯ã€‚\nåœ¨ä¸»é¢˜æ¨¡æ¿ä¸Šå¼•ç”¨js æˆ‘ä½¿ç”¨çš„ä¸»é¢˜æœ‰ä¸€ä¸ªä¸“é—¨å¼•ç”¨jsçš„æ¨¡æ¿ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åœ¨æ­¤æ·»åŠ å¼•ç”¨ã€‚åœ¨/layouts/partials/js.html(æœ‰çš„ä¸»é¢˜æ˜¯/layouts/partials/scripts.html)æ·»åŠ ï¼š\n1 2 3  \u0026lt;!-- Fastsearch --\u0026gt; \u0026lt;script src=\u0026#34;/js/fuse.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;/js/fastsearch.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;   æ·»åŠ CSSæ ·å¼ CSSæ ·å¼æ¥è‡ªè€éº¦ï¼Œæˆ‘å–œæ¬¢è¿™ä¸ªé¢œè‰²ï¼Œè‡ªè®¤ä¸ºä¸Mogegeä¸»é¢˜å¾ˆåˆï¼Œæ²¡æœ‰è¿›è¡Œæ”¹åŠ¨ã€‚\nå°½é‡é€‰æ‹©å¯¹åº”çš„æ¨¡æ¿æ¥æ·»åŠ ï¼Œæ¯”å¦‚è¯´æˆ‘æ˜¯åœ¨headeré‡Œä¿®æ”¹çš„ï¼Œé‚£ä¹ˆæˆ‘åœ¨/assets/css/_common/_partial/header.scssæ·»åŠ CSSæ ·å¼ã€‚ä¹Ÿå¯ä»¥ä¿®æ”¹æ¨¡æ¿çš„ä¸»CSSæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯style.cssæˆ–main.cssã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71  #fastSearch { visibility: hidden; position: absolute; right: 0px; top: 30px; display: inline-block; width: 320px; margin: 0 10px 0 0; padding: 0; } #fastSearch input { padding: 4px; width: 100%; height: 31px; font-size: 1em; color: #465373; font-weight: bold; background-color: #95B0F4; border-radius: 3px 3px 0px 0px; border: none; outline: none; text-align: left; display: inline-block; } #fastSearch ul { list-style: none; margin: 0px; padding: 0px; } #searchResults li { list-style: none; margin-left: 0em; background-color: #E1E7F7; border-bottom: 1px dotted #465373; } #searchResults li .title { font-size: .9em; margin: 0; display: inline-block; } #searchResults { visibility: inherit; display: inline-block; width: 328px; margin: 0; max-height: calc(100vh - 120px); overflow: hidden; } #searchResults a { text-decoration: none !important; padding: 10px; display: inline-block; width: 100%; } #searchResults a:hover, #searchResults a:focus { outline: 0; background-color: #95B0F4; color: #fff; } #search-btn { position: sticky; font-size: 20px; }   å¯ä»¥è‡ªå·±ç¨ä½œè°ƒæ•´ã€‚\né…ç½®å¥½åï¼Œè¿è¡Œhugo server -Då°±å¯ä»¥åœ¨æœ¬åœ°é¢„è§ˆæ•ˆæœäº†ã€‚\n","description":"","id":8,"section":"posts","tags":["Hugo"],"title":"Hugo | ä¸ºMogegeä¸»é¢˜æ·»åŠ æœç´¢åŠŸèƒ½","uri":"http://blog.tantalum.life/posts/hugo-fast-search/"},{"content":"ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç¯‡æ–‡ç«  å®é™…ä¸Šï¼Œæˆ‘æ­£åœ¨å°è¯•å°†å–œæ¬¢çš„å†…å®¹ç›´æ¥å‘ˆç°åœ¨åšå®¢ä¸Šï¼Œæ²¡é”™è¿™é‡ŒæŒ‡çš„å°±æ˜¯æˆ‘çš„è—ä¹¦é˜ã€‚ç„¶è€Œä½œä¸ºå°ç™½ï¼Œè™½ç„¶æˆ‘æœ‰èƒ½åŠ›åƒmarkdownä¸€æ ·ä½¿ç”¨htmlè¯­æ³•å†™å®Œä¸€ç¯‡æ–‡ç« ï¼Œä½†åœ¨hugoåšå®¢é‡ŒåµŒå…¥è§†é¢‘è¿™ç§äº‹\u0026hellip;å¦‚æœç›´æ¥åœ¨.mdæ–‡ä»¶é‡Œç”¨htmlæ ‡ç­¾ï¼Œç¬¬ä¸€æœ‰å®‰å…¨éšæ‚£ï¼Œç¬¬äºŒå®Œå…¨æ²¡æœ‰æ•ˆæœã€‚ä¸ä»…æ˜¯\u0026lt;video\u0026gt;æ ‡ç­¾ï¼Œè¿˜æ˜¯\u0026lt;iframe\u0026gt;æ ‡ç­¾ï¼Œæˆ‘è¯•è¿‡çš„ä»£ç åœ¨æœ¬åœ°é¢„è§ˆé€šé€šä¸è¡Œï¼Œåè€Œåœ¨ç å­—è½¯ä»¶Typoraé‡Œè·‘å¾—å¾ˆç•…å¿«\u0026hellip;ï¼ˆæ‘Šæ‰‹ã€‚\nä½†æˆ‘è¿˜æ˜¯æƒ³æŠŠå–œæ¬¢çš„è§†é¢‘åµŒå…¥åˆ°åšå®¢ä¸­ï¼Œè€Œä¸æ˜¯å•çº¯ç”©ä¸ªé“¾æ¥ï¼Œæ•…æœ‰æ­¤æ–‡ã€‚\nå…ˆæ”¾å‡ºæˆ‘çš„å‚è€ƒä»£ç  å‚è§Mogekoçš„åˆ©ç”¨ Hugo Shortcodes æ’å…¥ B ç«™è§†é¢‘ã€‚æˆ‘å°†cssä»£ç æ”¾åˆ°htmlæ–‡ä»¶ï¼Œå…¨éƒ¨ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  {{ $videoID := index .Params 0 }} {{ $pageNum := index .Params 1 | default 1}} {{ if (findRE \u0026#34;^[bB][vV][0-9a-zA-Z]+$\u0026#34; $videoID) }} \u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026#34;biliplayer\u0026#34; src=\u0026#34;//player.bilibili.com/player.html?bvid={{ $videoID }}\u0026amp;page={{ $pageNum }}\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; loading=\u0026#34;lazy\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; {{ else }} \u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026#34;biliplayer\u0026#34; src=\u0026#34;//player.bilibili.com/player.html?aid={{ $videoID }}\u0026amp;page={{ $pageNum }}\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; loading=\u0026#34;lazy\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; {{ end }} \u0026lt;style\u0026gt; // åµŒå…¥ BiliBili è§†é¢‘ #bilibili { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #bilibili { width: 100%; height: 250px; } } \u0026lt;/style\u0026gt;   æ­¤ä»£ç ä¸­åµŒå…¥è§†é¢‘çš„çª—å£å¤§å°æ ¹æ®å±å¹•å¤§å°åŠ¨æ€è°ƒæ•´è¿™ä¸€åŠŸèƒ½çœŸçš„å¥½ç”¨ï¼Œæˆ‘éƒ½æ˜¯å€Ÿï¼ˆç…§ï¼‰é‰´ï¼ˆæŠ„ï¼‰çš„è¿™ä¸ªï¼Œæ„Ÿæ©ã€‚\nåˆ©ç”¨ Hugo Shortcodes æ’å…¥pornhubè§†é¢‘ åœ¨layouts/shortcodeæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶pornhub.htmlï¼Œæ·»åŠ ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  \u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026#34;pornhub-player\u0026#34; src=\u0026#34;https://www.pornhub.com/embed/{{ index .Params 0 }}\u0026#34; scrolling=\u0026#34;no\u0026#34; frameborder=\u0026#34;no\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;style\u0026gt; // åµŒå…¥pornhubè§†é¢‘ #pornhub-player { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #pornhub-player { width: 100%; height: 250px; } } \u0026lt;/style\u0026gt;   ç”±äºè§†é¢‘æ’­æ”¾æºæ˜¯é»„é»‘Pç«™ï¼Œè€Œè¿™é‡Œæ˜¯Techblogï¼Œæˆ‘å°±ä¸æ”¾é¢„è§ˆäº†ã€‚æƒ³çœ‹NSFWè§†é¢‘åµŒå…¥æ•ˆæœçš„è¯è¯·çœ‹è¿™é‡Œã€‚å¯ä»¥çœ‹å‡ºä»–å·¥ä½œå¾—å¾ˆå¥½ï¼å¦å¤–ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘äººç”Ÿçš„ç¬¬ä¸€ä¸ªä»£ç ã€‚\nç”¨æ³•ï¼šæ‰¾åˆ°ä½ å–œæ¬¢çš„pornï¼Œå¤åˆ¶é“¾æ¥ä¸­embed/åçš„å†…å®¹ï¼Œä¾‹å¦‚ph5eca50fd553e5ï¼Œç„¶ååœ¨markdownä¸­è¾“å…¥\n1  {{\u0026lt; pornhub ph5eca50fd553e5 \u0026gt;}}   åˆ©ç”¨ Hugo Shortcodes æ’å…¥ä¸ªäººç‰ˆonedriveä¸­çš„è§†é¢‘ å‚è€ƒï¼šEmbedding Videos from OneDrive into your Blogã€‚æˆ‘å€Ÿé‰´äº†æ­¤æ–‡ä¸­ä½¿ç”¨videoæ ‡ç­¾è€Œæ”¾å¼ƒiframeæ ‡ç­¾çš„åšæ³•ã€‚\né¦–å…ˆå¤åˆ¶onedriveæä¾›çš„å†…åµŒä»£ç ï¼Œæ¯”å¦‚æ–‡ä¸­çš„ä¾‹å­ï¼š\n1  \u0026lt;iframe src=\u0026#34;https://onedrive.live.com/embed?cid=A82DFC6ED9776AF4\u0026amp;resid=A82DFC6ED9776AF4%212082\u0026amp;authkey=AMCIqSB8zNNJvxM\u0026#34; width=\u0026#34;320\u0026#34; height=\u0026#34;185\u0026#34; frameborder=\u0026#34;0\u0026#34; scrolling=\u0026#34;no\u0026#34; allowfullscreen\u0026gt;\u0026lt;/iframe\u0026gt;   ç„¶åå°†srcçš„å€¼æ”¹ä¸º\u0026quot;https://onedrive.live.com/download?cid=A82DFC6ED9776AF4\u0026amp;resid=A82DFC6ED9776AF4%212082\u0026amp;authkey=AMCIqSB8zNNJvxM\u0026quot;ï¼Œå³æ›¿æ¢æ‰embedå°†å…¶å˜æ›´ä¸ºdownloadã€‚\n å€¼å¾—ä¸€æçš„æ˜¯ï¼Œonedriveä»…ä¸ºä¸ªäººç‰ˆæä¾›äº†å†…åµŒä»£ç åŠŸèƒ½ï¼Œè€Œä¼ä¸šç‰ˆæ•™è‚²ç‰ˆç­‰ç­‰éƒ½æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚ä¸ºäº†å°†å–œæ¬¢çš„r18è§†é¢‘åµŒå…¥åšå®¢ä¸­ï¼Œæˆ‘å°†è§†é¢‘ä»æ•™è‚²ç‰ˆonedriveä¸­ä¸‹è½½å¹¶ä¸Šä¼ è‡³ä¸ªäººç‰ˆï¼ˆæˆ‘å¥½é—²ã€‚\n è§‚å¯Ÿsrcé“¾æ¥ååŠæ®µçš„ç»„æˆéƒ¨åˆ†ï¼Œåˆ†ä¸ºcidï¼Œresidå’Œauthkeyï¼Œå…¶ä¸­residçš„å€¼ä¸­é—´æ’å…¥äº†ä¸€ä¸ª%ã€‚æˆ‘è¯•ç€å°†redisçœ‹æˆä¸€ä¸ªæ•´ä½“ï¼Œä½†å¤±è´¥äº†ï¼Œæ€»æ˜¯æç¤ºæœ‰ç¼–ç é”™è¯¯ã€‚å› ä¸ºæˆ‘æ˜¯å°ç™½ï¼Œä¸å¤ªäº†è§£å…¶ä¸­åŸç†ï¼Œäºæ˜¯å¹²è„†å°†residéƒ¨åˆ†å®šä¹‰ä¸ºä¸¤ä¸ªå˜é‡ï¼šå·¦åŠæ®µresid1å’Œå³åŠæ®µresid2ã€‚\nåœ¨layouts/shortcodeæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶onedrive.htmlï¼Œæ·»åŠ ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  {{ $cid := index .Params 0 }} {{ $resid1 := index .Params 1 }} {{ $resid2 := index .Params 2 }} {{ $authkey := index .Params 3 }} \u0026lt;div\u0026gt;\u0026lt;video id=\u0026#34;onedrive-player\u0026#34; src=\u0026#34;https://onedrive.live.com/download?cid={{ $cid }}\u0026amp;resid={{ $resid1 }}%{{ $resid2 }}\u0026amp;authkey={{ $authkey }}\u0026#34; type=\u0026#34;video/mp4\u0026#34; scrolling=\u0026#34;no\u0026#34; frameborder=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;/video\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;style\u0026gt; // åµŒå…¥onedriveè§†é¢‘ #onedrive-player { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #onedrive-player { width: 100%; height: 250px; } } \u0026lt;/style\u0026gt;   ç”¨æ³•ï¼šè¿˜æ˜¯ç”¨å‚è€ƒæ–‡ç« çš„ä¾‹å­ï¼Œåœ¨markdownä¸­è¾“å…¥\n1  {{\u0026lt; onedrive A82DFC6ED9776AF4 A82DFC6ED9776AF4 212082 AMCIqSB8zNNJvxM \u0026gt;}}   ç¼ºç‚¹æ˜¯ç§»åŠ¨ç«¯åªèƒ½é•¿æŒ‰ä¸‹è½½ä¸èƒ½åœ¨çº¿æ’­æ”¾ï¼Œç”µè„‘å¯ä»¥å³é”®æ’­æ”¾æš‚åœé™éŸ³ä¸‹è½½ã€‚\n","description":"","id":9,"section":"posts","tags":["Hugo","HTML"],"title":"NSFW | å®ç°åœ¨Hugoåšå®¢ä¸­åˆ©ç”¨ShortcodeåµŒå…¥è§†é¢‘","uri":"http://blog.tantalum.life/posts/shortcode-to-insert-video/"},{"content":"\u0026ldquo;taxonomy\u0026rdquo; failed  åšå®¢æ¸²æŸ“å¤±è´¥ #335\n é”™è¯¯æç¤ºï¼š\nError: Error building site: failed to render pages: render of \u0026quot;taxonomy\u0026quot; failed è§£å†³æ–¹æ¡ˆï¼š\nåŸå› æ˜¯ Front matter categories çš„ç±»å‹æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åœ¨æ–‡ç« ä¸­ï¼Œéœ€è¦å†™æˆï¼ˆYAML æ ¼å¼ä¸ºä¾‹ï¼‰\ncategories: [Meta] # æˆ–è€… categories: - Meta # è€Œä¸æ˜¯ categories: Meta Character U+003D  æ›´æ¢ä¸»é¢˜è‡³memeåå‡ºç°ä»¥ä¸‹é”™è¯¯ #355\n é”™è¯¯æç¤ºï¼š\nå‚è€ƒèµ„æ–™ï¼š\nè§£å†³æ–¹æ¡ˆï¼š\nU+003Dæ˜¯=å·ã€‚\nè¿™æ˜¯ä½ çš„ Front Matter çš„è¯­æ³•é—®é¢˜ï¼Œå¦‚æœä½ è¦ä½¿ç”¨ TOMLï¼Œè¯·å°†:æ›¿æ¢ä¸º=\næˆ–è€…ä½¿ç”¨ YAML æ ¼å¼ï¼Œå°†+++æ›¿æ¢ä¸º---ã€‚\n","description":"","id":10,"section":"posts","tags":["Hugo"],"title":"Hugo | æ›´æ¢ä¸»é¢˜åFront matterå¯¼è‡´Build Error","uri":"http://blog.tantalum.life/posts/fix-front-matter/"},{"content":"å› ä¸ºMogegeä¸»é¢˜å¥½çœ‹åˆ°çŠ¯è§„ï¼Œæ‰€ä»¥æˆ‘æŠŠæ–‡ç«™ä¸»é¢˜ä»MemEæ¢æˆäº†Mogege\u0026hellip;\néå¸¸å¯¹ä¸èµ·è‡ªå®¶ç”·å­©å­ï¼ï¼ï¼æœ¬æ¥Mogegeæ˜¯è¦ç»™ä»–ç”¨çš„\u0026hellip; ANY_ME çš„Hugo åšå®¢è‡ªå®šä¹‰ä¼˜åŒ–  æ·»åŠ TOCç›®å½• åœ¨ä¸»é¢˜æ–‡ä»¶ /themes/Mogege/assets/css/_common/home.scsså†…æ·»åŠ  toc æ ·å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58  .post-toc { position: absolute; width: 200px; margin-left: 780px; padding: 10px; word-wrap: break-word; box-sizing: border-box; .post-toc-title { margin: 0; font-weight: 400; text-transform: uppercase; } .post-toc-content { \u0026amp;.always-active ul { display: block; } \u0026gt;nav\u0026gt;ul { margin: 10px 0; } ul { padding-left: 0; list-style: none; ul { padding-left: 15px; display: none; } .has-active \u0026gt; ul { display: block; } } } a:hover { color: #c05b4d; -webkit-transform: scale(1.1); -ms-transform: scale(1.1); transform: scale(1.1); } a { display: block; line-height: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; -webkit-transition-duration: .2s; transition-duration: .2s; -webkit-transition-property: -webkit-transform; transition-property: -webkit-transform; transition-property: transform; transition-property: transform,-webkit-transform; -webkit-transition-timing-function: ease-out; transition-timing-function: ease-out; } } @media only screen and (max-width: 1224px) { .post-toc { display: none; } }   åœ¨ä¸»é¢˜è·¯å¾„/themes/Mogege/layouts/partials/ä¸‹æ–°å»ºtoc.htmlæ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  \u0026lt;div class=\u0026#34;post-toc\u0026#34; id=\u0026#34;post-toc\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;post-toc-title\u0026#34;\u0026gt;{{ T \u0026#34;toc\u0026#34; }}\u0026lt;/h2\u0026gt; {{ $globalAutoCollapseToc := .Site.Params.autoCollapseToc | default false }} \u0026lt;div class=\u0026#34;post-toc-content{{ if not (or .Params.autoCollapseToc (and $globalAutoCollapseToc (ne .Params.autoCollapseToc false))) }} always-active{{ end }}\u0026#34;\u0026gt; {{.TableOfContents}} \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; window.onload = function () { var fix = $(\u0026#39;.post-toc\u0026#39;); var end = $(\u0026#39;.post-comment\u0026#39;); var fixTop = fix.offset().top, fixHeight = fix.height(); var endTop, miss; var offsetTop = fix[0].offsetTop; $(window).scroll(function () { var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop); if (end.length \u0026gt; 0) { endTop = end.offset().top; miss = endTop - docTop - fixHeight; } if (fixTop \u0026lt; docTop) { fix.css({ \u0026#39;position\u0026#39;: \u0026#39;fixed\u0026#39; }); if ((end.length \u0026gt; 0) \u0026amp;\u0026amp; (endTop \u0026lt; (docTop + fixHeight))) { fix.css({ top: miss }); } else { fix.css({ top: 0 }); } } else { fix.css({ \u0026#39;position\u0026#39;: \u0026#39;absolute\u0026#39; }); fix.css({ top: offsetTop }); } }) } \u0026lt;/script\u0026gt;   åœ¨ä¸»é¢˜æ–‡ä»¶ /themes/Mogege/layouts/_default/single.htmlå†…\u0026lt;/header\u0026gt;æ ‡ç­¾åå¼•å…¥ toc æ¨¡æ¿ï¼š\n1 2 3  {{ if ( .Site.Params.toc | default true ) }} {{ partial \u0026#34;toc.html\u0026#34; . }} {{ end }}   é…ç½®æ–‡ä»¶config.tomlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n1 2  toc = true # æ˜¯å¦å¼€å¯ç›®å½• autoCollapseToc = true # Auto expand and collapse toc   å¼€å¯å¤´åƒè½¬åŠ¨ åœ¨ \\themes\\mogege\\assets\\css\\_common\\_partials\\home.scssç¬¬32è¡Œæ›´æ”¹ï¼š\n1  transform:translateY(-0.75em) rotate(360deg);   é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆå’Œèœ˜è››ç½‘ç‰¹æ•ˆ åœ¨\\themes\\mogege\\layouts\\partials\\js.htmlä¸­æ·»åŠ ï¼š\n1 2 3  \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://demo.hellozwh.com/source/canvas-nest.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;   æ·»åŠ  Font Awesome å›¾æ ‡ åœ¨Font Awesome å®˜ç½‘æ³¨å†Œå¸å·ã€‚æ³¨å†ŒæˆåŠŸåä¼šæ˜¾ç¤ºå¸å·ä¸­æœ‰ä¸€å¥—å…è´¹å›¾æ ‡ã€‚ç„¶åè·å–HTMLä»£ç ï¼Œåœ¨/themes/mogege/layouts/partials/head.htmlä¸­ç²˜è´´ä»£ç ã€‚\nç”¨æ³•ï¼šåé¢å°†ä½¿ç”¨ \u0026lt;i class=\u0026quot;fab fa-iconname\u0026quot;\u0026gt;\u0026lt;/i\u0026gt; æˆ–è€… \u0026lt;i class=\u0026quot;fas fa-iconname\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;ï¼Œiconnameæ˜¯æƒ³è¦æ’å…¥çš„å›¾æ ‡åã€‚\næ›´æ”¹ä¸Šä¸‹ç¯‡æ–‡ç« çš„å›¾æ ‡ åœ¨/themes/Mogege/layouts/_default/single.htmlçš„post-navéƒ¨åˆ†ï¼ˆéœ€è¦ FontAwesome æ”¯æŒï¼‰\nå°†\u0026lt;i class=\u0026quot;iconfont icon-left\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;æ›´æ”¹ä¸º \u0026lt;i class=\u0026quot;fas fa-caret-left\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;ã€‚\nå°†\u0026lt;i class=\u0026quot;iconfont icon-right\u0026quot;\u0026gt;æ›´æ”¹ä¸º\u0026lt;i class=\u0026quot;fas fa-caret-right\u0026quot;\u0026gt;\u0026lt;/i\u0026gt;ã€‚\nå³ä¸‹è§’æ·»åŠ åˆ°é¡¶éƒ¨æŒ‰é’®å’Œè¿›åº¦æ¯”ä¾‹ å…ˆå®šä¹‰æ–‡æœ¬æ¡†æ–‡ä»¶ï¼Œåœ¨\\themes\\mogege\\assets\\css\\_common\\_core\\layout.scssæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  /** è¿›åº¦æ¯”ä¾‹å’Œåˆ°é¡¶éƒ¨**/ .back-to-top { box-sizing: border-box; border-radius: 8px; /** åœ†è§’**/ position: fixed; right: 30px; z-index: 1050; padding: 0 6px; width: initial; background: #222; font-size: 12px; opacity: 0.6; color: #fff; cursor: pointer; text-align: center; transition-property: bottom; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; bottom: -40px; } .back-top-active { bottom: 30px; } @media (max-width: 767px) { .back-to-top { right: 10px; } .back-top-active { bottom: 10px; } }   ç„¶ååœ¨\\themes\\mogege\\layouts\\partials\\footer.htmlä¸­æ›´æ”¹åº•éƒ¨æ˜¾ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82  \u0026lt;!-- æ­¤å¤„æ›´æ”¹è¿‡ --\u0026gt; \u0026lt;div class=\u0026#34;footer-box\u0026#34;\u0026gt; \u0026lt;footer class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;copyright\u0026#34;\u0026gt; \u0026amp;copy; {{ with .Site.Params.since }} \u0026lt;span itemprop=\u0026#34;copyrightYear\u0026#34;\u0026gt;{{.}} - {{ now.Year }}\u0026lt;/span\u0026gt; {{ end }} \u0026lt;span class=\u0026#34;with-love\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;iconfont icon-love\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;/span\u0026gt; {{ if .Site.Params.author }} \u0026lt;span class=\u0026#34;author\u0026#34; itemprop=\u0026#34;copyrightHolder\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;{{ .Site.BaseURL }}\u0026#34;\u0026gt;{{ .Site.Params.author }}\u0026lt;/a\u0026gt; | \u0026lt;/span\u0026gt; {{ end }} {{ with .Site.Params.beian }} \u0026lt;a href=\u0026#34;http://www.miibeian.gov.cn/\u0026#34; target=\u0026#34;_blank\u0026#34; rel=\u0026#34;external nofollow\u0026#34;\u0026gt;{{ . }} \u0026lt;/a\u0026gt; | {{ end }} \u0026lt;span\u0026gt;Powered by \u0026lt;a href=\u0026#34;https://gohugo.io/\u0026#34; target=\u0026#34;_blank\u0026#34; rel=\u0026#34;external nofollow\u0026#34;\u0026gt;Hugo\u0026lt;/a\u0026gt; \u0026amp; \u0026lt;a href=\u0026#34;https://github.com/Mogeko/Mogege\u0026#34; target=\u0026#34;_blank\u0026#34; rel=\u0026#34;external nofollow\u0026#34;\u0026gt;Mogege\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/footer\u0026gt; {{ partial \u0026#34;js.html\u0026#34; . }} \u0026lt;!-- è®¾ç½®æ»šåŠ¨æ¡å’Œè¿›åº¦æ¯”ä¾‹ --\u0026gt; \u0026lt;div class=\u0026#34;back-to-top\u0026#34; id=\u0026#34;back_to_top\u0026#34;\u0026gt; \u0026lt;!-- ç®­å¤´--\u0026gt; \u0026lt;!-- https://www.toptal.com/designers/htmlarrows/--\u0026gt; \u0026lt;!-- ç®­å¤´ \u0026lt;span\u0026gt;\u0026amp;#8593;\u0026lt;/span\u0026gt; --\u0026gt; \u0026lt;span\u0026gt;\u0026lt;i class=\u0026#34;fas fa-arrow-up\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;!-- éœ€è¦FontAwesomeæ”¯æŒï¼Œå‚è§æ–‡æœ«--\u0026gt; \u0026lt;!-- è¿›åº¦æ¯”ä¾‹ --\u0026gt; \u0026lt;span class=\u0026#34;scrollpercent\u0026#34;\u0026gt; \u0026lt;span id=\u0026#34;back_to_top_text\u0026#34;\u0026gt;0\u0026lt;/span\u0026gt;% \u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; let sideBarOpen = \u0026#39;sidebar-open\u0026#39;; let body = document.body; let back2Top = document.querySelector(\u0026#39;#back_to_top\u0026#39;), back2TopText = document.querySelector(\u0026#39;#back_to_top_text\u0026#39;), drawerBox = document.querySelector(\u0026#39;#drawer_box\u0026#39;), rightSideBar = document.querySelector(\u0026#39;.sidebar\u0026#39;), viewport = document.querySelector(\u0026#39;body\u0026#39;); function scrollAnimation(currentY, targetY) { let needScrollTop = targetY - currentY let _currentY = currentY setTimeout(() =\u0026gt; { const dist = Math.ceil(needScrollTop / 10) _currentY += dist window.scrollTo(_currentY, currentY) if (needScrollTop \u0026gt; 10 || needScrollTop \u0026lt; -10) { scrollAnimation(_currentY, targetY) } else { window.scrollTo(_currentY, targetY) } }, 1) } back2Top.addEventListener(\u0026#34;click\u0026#34;, function (e) { scrollAnimation(document.scrollingElement.scrollTop, 0); e.stopPropagation(); return false; }); window.addEventListener(\u0026#39;scroll\u0026#39;, function (e) { let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100; if (percent \u0026gt; 1 \u0026amp;\u0026amp; !back2Top.classList.contains(\u0026#39;back-top-active\u0026#39;)) { back2Top.classList.add(\u0026#39;back-top-active\u0026#39;); } if (percent == 0) { back2Top.classList.remove(\u0026#39;back-top-active\u0026#39;); } if (back2TopText) { back2TopText.textContent = Math.floor(percent); } }); let hasCacu = false; window.onresize = function () { calcuHeight(); } \u0026lt;/script\u0026gt;   ","description":"","id":11,"section":"posts","tags":["Hugo"],"title":"Hugo | è®°å½•Mogegeä¸»é¢˜ç¾åŒ–è¿‡ç¨‹","uri":"http://blog.tantalum.life/posts/mogege-theme-modify/"},{"content":"èƒŒæ™¯æè¦ ç»™è‡ªå®¶ç”·å­©å­æ­åšå®¢çš„æ—¶å€™æˆ‘å‘ä»–æ¨èäº†MogekoäºŒæ¬¡å¼€å‘çš„Mogegeä¸»é¢˜ï¼ˆåŸºäºLeaveltä¸»é¢˜ï¼Œç°å·²è¢«ä½œè€…å¼ƒå‘ï¼‰ã€‚è™½ç„¶Mogegeä¸»é¢˜ä¹Ÿè¢«å¼ƒå‘äº†ï¼Œä½†æ˜¯ç®€æ´å¥½ç”¨ï¼Œå»æ‰äº†å¾ˆå¤šå®ç”¨æ€§ä¸é«˜çš„åŠŸèƒ½ï¼Œè€Œä¸”é…ç½®æ–‡ä»¶æœ‰éƒ¨åˆ†æ±‰åŒ–ï¼Œç›¸å½“é€‚åˆå°ç™½ã€‚\nä½†å¦ä¸€æ–¹é¢ï¼Œå½“æ—¶Mogegeçš„ä½œè€…æ­£åœ¨ä½¿ç”¨Gitalkã€‚è™½ç„¶ç°åœ¨ç”±äºå®‰å…¨é—®é¢˜å·²ç»æ”¹ç”¨Utterancesäº†ï¼Œä½†ä¾æ—§æ²¡æœ‰åœ¨Mogegeä¸»é¢˜ä¸­æ˜¾ç°å‡ºæ¥ï¼Œè¿™å°±ç›´æ¥å¯¼è‡´äº†config.tomlä¸­å¼€ç®±å³ç”¨çš„è¯„è®ºç³»ç»Ÿåªæœ‰Gitalkï¼Œè€ŒDisquså’ŒUtterancesè™½ç„¶åœ¨htmlæ–‡ä»¶ä¸­æœ‰æ‰€ä½“ç°ï¼Œä½†éƒ½æ²¡æœ‰å‡ºç°åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ›´å¯æ€œçš„Disqusè¿è‡ªå·±çš„htmléƒ½æ²¡æœ‰\u0026hellip;å®é™…ä¸ŠLeaveItçš„ä½œè€…ä¼¼ä¹æ²¡æœ‰ä¸ºä¸»é¢˜æ·»åŠ è¯„è®ºåŠŸèƒ½ã€‚\né€‰æ‹©Utterancè¯„è®ºç³»ç»Ÿçš„åŸå›  åŸºäº github issues çš„è¯„è®ºç³»ç»Ÿï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰gitmentå’Œgitalkï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯ GitHub Issue çš„ apiï¼Œä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹å¹³å°ï¼Œè€Œæ˜¯ç›´æ¥å’Œgithubä»“åº“ç»‘åœ¨ä¸€èµ·ã€‚è¨€å¤–ä¹‹æ„ï¼Œåªè¦Githubä¸å€’é—­ï¼Œä½ çš„è¯„è®ºç³»ç»Ÿå°±ä¸ä¼šè¢«å…³é—­ã€‚ç¼ºç‚¹å°±æ˜¯è‹¥è¦ç™»å½•Githubå¯¹åšå®¢è¿›è¡Œè¯„è®ºï¼Œç´¢è¦æƒé™å®åœ¨è¿‡å¤šï¼Œè€Œä¸”ä¼¼ä¹æ²¡æœ‰å°†æƒé™å‡å°‘çš„æ„æ€ï¼Œé£é™©ç¡®å®å¯èƒ½è¾¾åˆ°èƒ½è®©ä¸æ€€å¥½æ„ä¹‹äººé€šè¿‡OAuthå†’å……ç™»å½•å¸å·å¹¶åˆ åº“è·‘è·¯çš„ç¨‹åº¦ã€‚\nè™½ç„¶æˆ‘è‡ªå·±çš„åšå®¢ä½¿ç”¨çš„æ˜¯æ— åç«¯çš„Walineè¯„è®ºç³»ç»Ÿï¼Œä½†æ˜¯é‰´äºæˆ‘å·²ç»åœ¨Mogegeä¸»é¢˜ä»“åº“ä¸­çœ‹åˆ°Utterancesç›¸å…³çš„ä»£ç äº†ï¼Œè€Œä¸”å¥½å·§ä¸å·§ç”·å­©å­çš„Vercelå¸å·è¢«é£æ§æš‚æ—¶æ— æ³•ç™»å½•ï¼Œæœºç¼˜å·§åˆä¸‹æˆ‘æ¥è§¦äº†è¿™æ¬¾æ— è¿½è¸ªä¸ä¿ç•™æ•°æ®çš„å¼€æºè¯„è®ºç³»ç»Ÿã€‚\nç®€å•çš„å®‰è£…æ­¥éª¤  ä¼¼ä¹æœ‰ä¸€ä¸ªæœ‰åŸºäºå…¶ç‰ˆæœ¬å¼€å‘çš„ä¸­æ–‡ç‰ˆï¼šbeaudarï¼Œæˆ‘æ²¡æœ‰ç”¨è¿™ä¸ªã€‚\n åœ¨Githubä¸­æ–°å»ºä¸€ä¸ªå…¬å¼€å¯è§çš„ä»“åº“ä¸“é—¨ç”¨æ¥å­˜æ”¾è¯„è®ºï¼Œæ¯”å¦‚åå«Utterancesï¼Œç„¶åå®‰è£…Utterancesï¼Œé…ç½®å®ƒå…è®¸è°ƒç”¨çš„ä»“åº“ã€‚å»ºè®®åªé€‰æ‹©è¿™ä¸ªæ–°å»ºçš„Utterancesä»“åº“è€Œä¸æ˜¯å…¨éƒ¨ä»“åº“ã€‚å¦‚æœæƒ³å¯¹ä»–çš„è°ƒç”¨æƒé™è¿›è¡Œæ›´æ”¹ï¼Œå¯ä»¥å»githubä¸­çš„åº”ç”¨é¡µé¢ï¼Œç‚¹å‡»Utteranceså³è¾¹çš„Configurationå°±èƒ½æ›´æ”¹æƒé™äº†ã€‚\nå®‰è£…ååœ¨æ–°çš„é¡µé¢ä¸­å¡«å†™ä½ çš„repoï¼Œæ ¼å¼ä¸ºUsername/Utterancesï¼Œç„¶åé¢„è§ˆå¹¶é€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜ï¼Œç³»ç»Ÿä¼šåœ¨ä¸‹é¢è‡ªåŠ¨ä¸ºä½ æä¾›ä¸€ä¸ªclient.jsï¼Œé‡Œé¢æœ‰å››ä¸ªå˜é‡åˆ†åˆ«æ˜¯repoï¼Œissue-termï¼Œthhemeå’ŒÂ·crossoriginï¼Œå…ˆè®°ä¸‹æ¥ä¸è¦åŠ¨ã€‚\næ›´æ”¹é…ç½®æ–‡ä»¶ æ ¹æ®Mogegeä¸»é¢˜çš„githubä»“åº“ï¼Œåœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯layouts/partials/utteranc.htmlï¼Œå¯ä»¥å‘ç°è¿™é‡Œå·²ç»å¼•ç”¨äº†{{ .Site.Params.Utteranc.repo }}ï¼ˆä»¥repoä¸ºä¾‹ï¼‰ã€‚è€Œåœ¨è¿™ä¸ªhtmlæ–‡ä»¶çš„103è¡Œåˆå¼•ç”¨äº†{{ else if .Site.Params.enableUtteranc }}å’Œutteranc.htmlï¼Œæ‰€ä»¥åœ¨config.tomlæ–‡ä»¶çš„æœ€åæ·»åŠ ï¼š\n1 2 3 4 5  [params.utteranc] # Homepage: https://utteranc.es repo = \u0026#34;ä½ çš„repo\u0026#34; # The repo to store comments issueTerm = \u0026#34;ä½ çš„issueTerm\u0026#34; # the mapping between blog posts and GitHub issues.  theme = \u0026#34;ä½ é€‰æ‹©çš„ä¸»é¢˜\u0026#34; # Theme crossorigin = \u0026#34;anonymous\u0026#34; # default: anonymous   è¿™æ ·åšè¿˜æ²¡å®Œï¼Œç»§ç»­åœ¨config.tomlçš„[params]éƒ¨åˆ†æ‰¾åˆ°enableGitalk = trueï¼Œåœ¨ä¸‹ä¸€è¡Œæ·»åŠ ï¼šenableUtteranc = trueã€‚\nä¹‹ååˆ·æ–°æµè§ˆå™¨ï¼Œå°±å¯ä»¥å¿«ä¹åœ°è°ˆç¬‘é£ç”Ÿäº†ï¼\n","description":"","id":12,"section":"posts","tags":["Hugo","Utterances"],"title":"Hugo | ä¸ºMogegeä¸»é¢˜æ·»åŠ Utterancesè¯„è®º","uri":"http://blog.tantalum.life/posts/add-utterances-for-mogege/"},{"content":"ä¸ºä»€ä¹ˆè¦æ°´è¿™ç¯‡æ–‡ç«  ç»™åšå®¢æ¢ä¸»é¢˜çš„æ—¶å€™å‘ç°MemEä¸»é¢˜å’ŒZzoä¸»é¢˜çš„è¯„è®ºé…ç½®æ–‡ä»¶æœ‰å‡ºå…¥ï¼Œä¸èƒ½ç›´æ¥å¥—ç”¨ç°æœ‰çš„MemEä¸»é¢˜Walineé…ç½®ã€‚æ‰€ä»¥æˆ‘çµæœºä¸€åŠ¨ï¼šè¦ä¸æˆ‘è‡ªå·±æå§ã€‚\nä»¥MemE,Zzoå’Œstackä¸‰ä¸ªä¸»é¢˜ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹ä¸åŒä¸»é¢˜çš„è¯„è®ºé…ç½®æœ‰ä»€ä¹ˆä¸åŒï¼š\né¦–å…ˆçœ‹ä¸€ä¸‹MemEä¸»é¢˜çš„è¯„è®ºé…ç½® MemEä¸»é¢˜æ”¯æŒValineï¼Œå› ä¸ºWalineæ˜¯Valineçš„æ”¹è‰¯ç‰ˆï¼Œæ‰€ä»¥å¯ä»¥äº’ç›¸å‚è€ƒé…ç½®ã€‚é¦–å…ˆä¸»é¢˜çš„githubé¡¹ç›®ä¸­æœç´¢Valineï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†config-examples/zh-cn/config.tomlï¼ˆä¸»é¢˜çš„ç®€ä½“é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œä¸è€ƒè™‘ç¹ä½“ä¸­æ–‡å’Œè‹±æ–‡ï¼Œåªæ˜¯é…ç½®æ–‡ä»¶çš„è¯­è¨€é¡¹ï¼‰ä»¥å¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ªæ–‡ä»¶æåˆ°äº†Valineï¼Œåˆ†åˆ«æ˜¯layouts/partials/third-party/valine.htmlï¼Œlayouts/partials/third-party/script.htmlå’Œlayouts/partials/components/comments.htmlã€‚\nå„æ–‡ä»¶çš„ä½œç”¨ï¼š\n comments.htmlæ–‡ä»¶çš„ä½œç”¨æ˜¯æ§åˆ¶æ˜¯å¦å¼€å¯è¯„è®ºï¼ˆenableCommentsï¼‰ï¼Œå¼€å¯å“ªä¸ªè¯„è®ºç³»ç»Ÿï¼ˆenableValineï¼‰ï¼Œå¦‚æœå¼€å¯ï¼Œåˆ™æ’å…¥ç›¸å…³è¯„è®ºçš„\u0026lt;div\u0026gt;æ ‡ç­¾ idï¼› script.htmlæ–‡ä»¶çš„ä½œç”¨æ˜¯è½½å…¥å¼€å¯çš„è¯„è®ºçš„ç›¸åº” HTML æ–‡ä»¶ï¼ˆvaline.htmlï¼‰ï¼› valine.htmlæ–‡ä»¶çš„ä½œç”¨æ˜¯è°ƒç”¨valine.jsï¼Œå¯¹è¯„è®ºåŠŸèƒ½è¿›è¡Œè®¾å®šã€‚  å†æ¥æ¥çœ‹ä¸€ä¸‹Zzoä¸»é¢˜çš„è¯„è®ºé…ç½® åŒæ ·åœ¨MemEåœ¨githubé¡¹ç›®ä¸­æœç´¢Valineï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†config/_default/params.tomlï¼ˆä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼ŒZzoä¸»é¢˜æŠŠæ­£å¸¸çš„config.tomlåˆ†æˆäº†å››ä¸ªï¼Œparams.tomlæ˜¯å…¶ä¸­ä¸€ä¸ªï¼‰ä»¥å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šlayouts/partials/comments/valine.htmlå’Œlayouts/partials/comments/comments.htmlã€‚\nå„æ–‡ä»¶çš„ä½œç”¨ï¼š\n comments.htmlæ–‡ä»¶çš„ä½œç”¨æ˜¯æ§åˆ¶æ˜¯å¦å¼€å¯è¯„è®ºï¼ˆenableCommentsï¼‰ï¼Œå¼€å¯å“ªä¸ªè¯„è®ºç³»ç»Ÿï¼ˆenableValineï¼‰ï¼Œå¦‚æœå¼€å¯ï¼Œåˆ™ç›´æ¥è½½å…¥å¼€å¯çš„è¯„è®ºçš„ç›¸åº” HTML æ–‡ä»¶ï¼ˆvaline.htmlï¼‰ï¼› valine.htmlæ–‡ä»¶çš„ä½œç”¨æ˜¯å¯¹è¯„è®ºåŠŸèƒ½è¿›è¡Œè®¾å®šã€‚  è¿™æ ·ä¸€æ¥ï¼ŒZzoå°±ä¸ç”¨åƒMemEä¸€æ ·éœ€è¦script.htmlæ–‡ä»¶ä¸“é—¨ç”¨æ¥è½½å…¥valine.htmlï¼Œå› ä¸ºåŠŸèƒ½è¢«åˆå¹¶äº†ã€‚\né™„åŠ é¢˜ï¼šçœ‹çœ‹åŒæ ·ç¾è²Œçš„stackä¸»é¢˜ï¼ stackä¸»é¢˜æ”¯æŒWalineè€Œä¸æ”¯æŒValineï¼Œè¿™æ˜¯æˆ‘ä¸‡ä¸‡æ²¡æƒ³åˆ°çš„ï¼ˆç¬‘ï¼‰ã€‚åŒæ ·åœ°ï¼Œé¦–å…ˆåœ¨é¡¹ç›®ä¸­æœç´¢Walineï¼Œå‘ç°é™¤äº†config.yamlï¼ˆstackä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼Œå’Œconfig.tomlæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼‰ä»¥å¤–åªæœ‰layouts/partials/comments/provider/waline.htmlæåˆ°äº†Walineï¼Œè€Œä¸”åœ¨æ–‡ä»¶ä¸­å¼ºåˆ¶æ’å…¥\u0026lt;div\u0026gt;æ ‡ç­¾ idï¼Œå¹¶ä¸”ä¹Ÿå¯¹è¯„è®ºåŠŸèƒ½è¿›è¡Œè®¾å®šã€‚\nWalineæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¯´ä»–æ˜¯Valineçš„æ”¹è‰¯ç‰ˆ è¯·çœ‹è¿™ç¯‡åšå®¢ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯Gitalk å’Œ Valineéƒ½æœ‰ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œäºæ˜¯Walineè¯ç”Ÿäº†ã€‚\néƒ¨ç½²Waline æŒ‰ç…§Walineå®˜æ–¹æ–‡æ¡£å¿«é€Ÿå¼€å§‹ã€‚\nç¬¬ä¸€æ­¥æ¨èä½¿ç”¨ LeanCloud å›½é™…ç‰ˆï¼Œå› ä¸ºå›½å†…ç‰ˆè¿˜éœ€è¦å’Œå¤‡æ¡ˆçš„åŸŸåç»‘å®šï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚ç¬¬äºŒæ­¥åˆ©ç”¨Verceléƒ¨ç½²Walineï¼Œç‚¹å‡»å®˜æ–¹ç»™å‡ºçš„å¿«é€Ÿéƒ¨ç½²é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªdeployè“è‰²æŒ‰é’®ï¼Œç„¶åæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ç»§ç»­éƒ¨ç½²ï¼Œç›´åˆ°ä½ è·å¾—ServerURLï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯åœ°å€ã€‚\n é¢˜å¤–è¯ï¼šæœ‰æ®µæ—¶é—´Walineçš„å¿«é€Ÿéƒ¨ç½²é“¾æ¥å¤±æ•ˆï¼Œå› ä¸ºgithubä»“åº“çš„ä¸»åˆ†æ”¯ç”±masteræ”¹ä¸ºmainï¼Œè€Œå¿«é€Ÿéƒ¨ç½²é“¾æ¥è¿˜æ²¡æ¥å¾—åŠä¿®æ”¹ï¼Œå› æ­¤clone projectä¼šå‡ºç°é”™è¯¯ï¼Œç°åœ¨å·²ç»æ²¡é—®é¢˜äº†ã€‚\n ä½ ä¹Ÿå¯ä»¥ä¸ºè¿™ä¸ªVercelé¡¹ç›®æ·»åŠ ä¸€ä¸ªå­åŸŸåã€‚å¦å¤–è¿˜è¦æ³¨æ„ï¼Œæ¯æ¬¡æ›´æ”¹ç¯å¢ƒå˜é‡ä¹‹åéƒ½è¦Redeployï¼ˆé‡æ–°éƒ¨ç½²ï¼‰ä½¿æ”¹åŠ¨ç”Ÿæ•ˆã€‚\nå¼€å§‹é…ç½®å§ ä¿®æ”¹é…ç½®æ–‡ä»¶ ä»¥Zzoä¸»é¢˜ä¸ºä¾‹ï¼Œå›åˆ°æœ¬åœ°çš„åšå®¢æ ¹ç›®å½•ï¼Œåœ¨config/_default/params.tomlä¸­ï¼Œæ‰“å¼€è¯„è®ºå…¨å±€è®¾ç½®ï¼Œç„¶åæ‰¾åˆ°Valineçš„é…ç½®ï¼ŒæŒ‰ç…§Valineçš„æ ¼å¼åœ¨ä»–çš„ä¸‹æ–¹æŠ„ä¸€ä»½Walineçš„é…ç½®ï¼Œæ¯”å¦‚æˆ‘çš„å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9  [waline] enable = false appId = \u0026#39;ä½ çš„appId\u0026#39; appKey = \u0026#39;ä½ çš„appKey\u0026#39; notify = false # mail notifier , https://github.com/xCss/Valine/wiki verify = false # Verification code avatar = \u0026#39;mm\u0026#39; placeholder = \u0026#39;è¯´ç‚¹ä»€ä¹ˆå§...\u0026#39; visitor = false   ä½†æ˜¯è¿™äº›é…ç½®é¡¹æ˜¯valineéœ€è¦çš„ï¼Œè€Œä¸ä¸€å®šæ˜¯walineéœ€è¦çš„ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„å‰ç«¯é…ç½®ï¼Œæˆ‘å¯¹params.tomlè¿›è¡Œäº†æ”¹åŠ¨ï¼Œæœ€åçš„é…ç½®å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11  [Waline] enable = true ServerURL = \u0026#34;ä½ çš„ServerURL\u0026#34; Placeholder = \u0026#34;ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥è¯„è®ºå•Š!\u0026#34; #ç•™è¨€æ¡†å ä½æç¤ºæ–‡å­— Avatar = \u0026#34;mp\u0026#34; Meta = [\u0026#34;nick\u0026#34;, \u0026#34;mail\u0026#34;, \u0026#34;link\u0026#34;] PageSize = 10 Lang = \u0026#34;zh-CN\u0026#34; Highlight = true AvatarCDN = \u0026#34;https://cdn.v2ex.com/gravatar/\u0026#34; #walineçš„è¯„è®ºå¤´åƒå¯ä»¥ä½¿ç”¨æŸç§æ ·å¼ä¹Ÿå¯ä»¥ä½¿ç”¨cdnï¼Œè¿™é‡Œç”¨v2exçš„cdn RequiredFields = [\u0026#34;nick\u0026#34;, \u0026#34;mail\u0026#34;]   è¿›å…¥Zzoä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°ä¹‹å‰è¯´è¿‡çš„ä¸¤ä¸ªå’ŒValineæœ‰å…³çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯layouts/partials/comments/valine.htmlå’Œlayouts/partials/comments/comments.htmlï¼ŒæŠŠä»–ä»¬ä¸¤ä¸ªå¤åˆ¶åˆ°~/layouts/partials/comments/valine.htmlå’Œ~/layouts/partials/comments/comments.htmlä¸­ï¼ˆåšå®¢æ ¹ç›®å½•ä¸‹ï¼‰ã€‚\nValineæ˜¯ä½ çš„æ¨¡æ¿ï¼ŒWalineè¦é•¿å¾—å’Œä»–ä¸€æ¨¡ä¸€æ · å°†valine.htmlé‡å‘½åä¸ºwaline.htmlç”¨visual studioæ‰“å¼€ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶é•¿ä»€ä¹ˆæ ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  {{- if .Site.Params.valine.visitor -}} \u0026lt;span id=\u0026#34;{{ .RelPermalink | relLangURL }}\u0026#34; class=\u0026#34;leancloud_visitors\u0026#34; data-flag-title=\u0026#34;{{ .Title }}\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;post-meta-item-text\u0026#34;\u0026gt;æ–‡ç« é˜…è¯»é‡ \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;leancloud-visitors-count\u0026#34;\u0026gt;0\u0026lt;/span\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;div id=\u0026#34;vcomments\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;//cdn1.lncld.net/static/js/3.0.4/av-min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#39;//unpkg.com/valine/dist/Valine.min.js\u0026#39;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; new Valine({ el: \u0026#39;#vcomments\u0026#39; , appId: \u0026#39;{{ .Site.Params.valine.appId }}\u0026#39;, appKey: \u0026#39;{{ .Site.Params.valine.appKey }}\u0026#39;, notify: {{ .Site.Params.valine.notify }}, verify: {{ .Site.Params.valine.verify }}, avatar:\u0026#39;{{ .Site.Params.valine.avatar }}\u0026#39;, placeholder: \u0026#39;{{ .Site.Params.valine.placeholder }}\u0026#39;, visitor: {{ .Site.Params.valine.visitor }} }); \u0026lt;/script\u0026gt;   ä»¥appIdä¸ºä¾‹ï¼Œæœ‰äº›ä¸»é¢˜çš„valine.htmlæ–‡ä»¶ä¼šå†™æˆappId: '{{ .Site.Params.valineappId }}'æˆ–è€…æ›´å¥‡æ€ªçš„ï¼Œä½†ä¸€å®šè¦è®°ä½è¿™ä¸ªæ ¼å¼ï¼Œå› ä¸ºè¦å’Œä»–çš„æ ¼å¼å®Œå…¨å¯¹åº”ã€‚\nåˆ æ‰æ‰€æœ‰ä»£ç ï¼Œä¿®æ”¹ä¸ºå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12  \u0026lt;head\u0026gt; \u0026lt;script src=\u0026#34;//cdn.jsdelivr.net/npm/@waline/client\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;waline\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; Waline({ el: \u0026#39;#waline\u0026#39;, serverURL: \u0026#39;https://your-domain.vercel.app\u0026#39;, }); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt;   å°†serverURLçš„å€¼ä¿®æ”¹ä¸º'{{ .Site.Params.waline.serverURL }}'ï¼Œç„¶åæ‰“å¼€params.tomlï¼Œæ ¹æ®ä¹‹å‰æ·»åŠ çš„é¡¹ï¼Œåœ¨serverURLçš„ä¸‹ä¸€è¡Œç»§ç»­æ·»åŠ ï¼š\n1 2 3 4 5 6 7 8  placeholder: \u0026#39;{{ .Site.Params.waline.Placeholder }}\u0026#39;, avatar: \u0026#39;{{ .Site.Params.waline.Avatar }}\u0026#39;, meta: {{ .Site.Params.waline.Meta }}, pageSize: {{ .Site.Params.waline.PageSize }}, lang: \u0026#39;{{ .Site.Params.waline.Lang }}\u0026#39;, highlight: {{ .Site.Params.waline.Highlight }}, avatarCDN: \u0026#39;{{ .Site.Params.waline.AvatarCDN }}\u0026#39;, requiredFields: {{ .Site.Params.waline.RequiredFields }}   æœ€åï¼Œæˆ‘çš„waline.htmlæ˜¯è¿™æ ·çš„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  \u0026lt;head\u0026gt; \u0026lt;script src=\u0026#34;//cdn.jsdelivr.net/npm/@waline/client\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;waline\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; Waline({ el: \u0026#39;#waline\u0026#39;, serverURL: \u0026#39;{{ .Site.Params.waline.ServerURL }}\u0026#39;, placeholder: \u0026#39;{{ .Site.Params.waline.Placeholder }}\u0026#39;, avatar: \u0026#39;{{ .Site.Params.waline.Avatar }}\u0026#39;, meta: {{ .Site.Params.waline.Meta }}, pageSize: {{ .Site.Params.waline.PageSize }}, lang: \u0026#39;{{ .Site.Params.waline.Lang }}\u0026#39;, highlight: {{ .Site.Params.waline.Highlight }}, avatarCDN: \u0026#39;{{ .Site.Params.waline.AvatarCDN }}\u0026#39;, requiredFields: {{ .Site.Params.waline.RequiredFields }} }); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt;   æ‰“å¼€comments.html,æ‰¾åˆ°valineé‚£æ®µä»£ç ï¼Œå¤åˆ¶ä¸€ä¸‹æ”¾åˆ°ä»–çš„ä¸‹é¢ï¼Œå¹¶æŠŠvalineæ”¹ä¸ºwalineï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼š\n1 2 3 4 5 6 7 8  {{ else if $.Param \u0026#34;valine.enable\u0026#34; }} {{ partial \u0026#34;comments/valine.html\u0026#34; . }} + {{ else if $.Param \u0026#34;waline.enable\u0026#34; }} + {{ partial \u0026#34;comments/waline.html\u0026#34; . }} {{ else if $.Param \u0026#34;changyan.changyanAppid\u0026#34; }} {{ partial \u0026#34;comments/changyan.html\u0026#34; . }}   å¤§åŠŸå‘Šæˆäº†ã€‚\næ€»è€Œè¨€ä¹‹ï¼Œå°±æŒ‰ç…§valineçš„é…ç½®æ–¹æ³•å»é…ç½®walineå°±æ²¡é—®é¢˜äº†ã€‚\nç®¡ç†ä¸é‚®ä»¶é€šçŸ¥ Waline å¸¦æœ‰ç®€å•çš„åå°ï¼Œå¯ä»¥å®ç°å¯¹è¯„è®ºçš„ç®¡ç†ã€‚éƒ¨ç½²å®Œæˆåè®¿é—®\u0026lt;serverURL\u0026gt;/ui/registerè¿›è¡Œæ³¨å†Œï¼Œç¬¬ä¸€ä¸ªæ³¨å†Œçš„è´¦æˆ·ä¼šè¢«è®¾å®šæˆç®¡ç†å‘˜ã€‚\nWaline è¯„è®ºç³»ç»Ÿçš„ä»‹ç»ä¸åŸºç¡€é…ç½®  åœ¨ Vercel çš„é¡¹ç›®ä¸­æ·»åŠ ä»¥ä¸‹æ–°çš„ç¯å¢ƒå˜é‡ï¼š\n AUTHOR_EMAILï¼šåšä¸»é‚®ç®±ï¼Œç”¨æ¥åŒºåˆ†å‘å¸ƒçš„è¯„è®ºæ˜¯å¦æ˜¯åšä¸»æœ¬èº«å‘å¸ƒçš„ã€‚å¦‚æœæ˜¯åšä¸»å‘å¸ƒçš„åˆ™ä¸è¿›è¡Œæé†’é€šçŸ¥ã€‚ SMTP_SERVICEï¼šSMTP é‚®ä»¶å‘é€æœåŠ¡æä¾›å•†ï¼Œå¯ä»¥åœ¨è¿™ä¸ªé¡µé¢æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„è¿è¥å•†ã€‚å¦‚æœæ²¡åœ¨åˆ—è¡¨ä¸­çš„å¯ä»¥è‡ªè¡Œé…ç½® SMTP_HOST å’Œ SMTP_PORTã€‚ SMTP_HOSTï¼šSMTP æœåŠ¡å™¨åœ°å€ï¼Œå¦‚æœæœªé…ç½® SMTP_SERVICE çš„è¯è¯¥é¡¹å¿…å¡«ã€‚ SMTP_PORTï¼šSMTP æœåŠ¡å™¨ç«¯å£ï¼Œå¦‚æœæœªé…ç½® SMTP_SERVICE çš„è¯è¯¥é¡¹å¿…å¡«ã€‚ SMTP_USERï¼šSMTP é‚®ä»¶å‘é€æœåŠ¡çš„ç”¨æˆ·åï¼Œä¸€èˆ¬ä¸ºç™»å½•é‚®ç®±ã€‚ SMTP_PASSï¼šSMTP é‚®ä»¶å‘é€æœåŠ¡çš„å¯†ç ï¼Œä¸€èˆ¬ä¸ºé‚®ç®±ç™»å½•å¯†ç ï¼Œéƒ¨åˆ†é‚®ç®±ï¼ˆä¾‹å¦‚ 163 é‚®ç®±ï¼‰æ˜¯å•ç‹¬çš„ SMTP å¯†ç ã€‚ SITE_NAMEï¼šç½‘ç«™åç§°ï¼Œç”¨äºåœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºã€‚ SITE_URLï¼šç½‘ç«™åœ°å€ï¼Œç”¨äºåœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºã€‚ SENDER_NAMEï¼šè‡ªå®šä¹‰å‘é€é‚®ä»¶çš„å‘ä»¶äººï¼Œé€‰å¡«ã€‚ SENDER_EMAILï¼šè‡ªå®šä¹‰å‘é€é‚®ä»¶çš„å‘ä»¶åœ°å€ï¼Œé€‰å¡«ã€‚ MAIL_SUBJECTï¼šè¯„è®ºå›å¤é‚®ä»¶æ ‡é¢˜è‡ªå®šä¹‰ã€‚ MAIL_TEMPLATEï¼šè¯„è®ºå›å¤é‚®ä»¶å†…å®¹è‡ªå®šä¹‰ã€‚ MAIL_SUBJECT_ADMINï¼šæ–°è¯„è®ºé€šçŸ¥é‚®ä»¶æ ‡é¢˜è‡ªå®šä¹‰ã€‚ MAIL_TEMPLATE_ADMINï¼šæ–°è¯„è®ºé€šçŸ¥é‚®ä»¶å†…å®¹è‡ªå®šä¹‰ã€‚  å¦‚æœä½ å¸Œæœ›é‚®ä»¶é€šçŸ¥é‡‡ç”¨æ¨¡æ¿ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç ï¼Œè¿™ç§æ–¹å¼ä¸éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡çš„æœ€åå››ä¸ªã€‚æ‰¾åˆ°GitHubä¸Šè‡ªåŠ¨åˆ›å»ºçš„é‚£ä¸ªç§äººä»“åº“ã€‚ä»“åº“ä¸­æœ‰ä¸€ä¸ªåä¸ºindex.jsçš„æ–‡ä»¶ï¼Œåˆ é™¤å…¨éƒ¨å†…å®¹å¹¶ä¿®æ”¹ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  const Application = require(\u0026#39;@waline/vercel\u0026#39;); module.exports = Application({ mailSubject: \u0026#39;{{parent.nick}}ï¼Œæ‚¨åœ¨åšå®¢ã€Œ{{site.name}}ã€ä¸Šçš„è¯„è®ºæ”¶åˆ°äº†å›å¤\u0026#39;, mailTemplate: ` \u0026lt;div style=\u0026#34;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;\u0026#34;\u0026gt; \u0026lt;h2 style=\u0026#34;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;\u0026#34;\u0026gt; æ‚¨åœ¨åšå®¢\u0026lt;a style=\u0026#34;text-decoration:none;color: #12ADDB;\u0026#34; href=\u0026#34;{{site.url}}\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;{{site.name}}\u0026lt;/a\u0026gt;ä¸Šçš„è¯„è®ºæœ‰äº†æ–°çš„å›å¤ \u0026lt;/h2\u0026gt; \u0026lt;div style=\u0026#34;padding:0 12px 0 12px;margin-top:18px\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{parent.nick}}ï¼Œæ‚¨æ›¾å‘è¡¨è¯„è®ºï¼š\u0026lt;/p\u0026gt; \u0026lt;div style=\u0026#34;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;\u0026#34;\u0026gt;{{parent.comment | safe}}\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;{{self.nick}}\u0026lt;/strong\u0026gt; å›å¤è¯´ï¼š\u0026lt;/p\u0026gt; \u0026lt;div style=\u0026#34;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;\u0026#34;\u0026gt;{{self.comment | safe}}\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;æ‚¨å¯ä»¥ç‚¹å‡»\u0026lt;a style=\u0026#34;text-decoration:none; color:#12addb\u0026#34; href=\u0026#34;{{site.postUrl}}\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;å‰å¾€åŸæ–‡æŸ¥çœ‹å®Œæ•´çš„å›å¤å…§å®¹\u0026lt;/a\u0026gt;ï¼Œæ¬¢è¿å†æ¬¡å…‰ä¸´\u0026lt;a style=\u0026#34;text-decoration:none; color:#12addb\u0026#34; href=\u0026#34;{{site.url}}\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;{{site.name}}\u0026lt;/a\u0026gt;ã€‚\u0026lt;/p\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div style=\u0026#34;border-top:1px solid #DDD; padding:13px 0 0 8px;\u0026#34;\u0026gt; è¯¥é‚®ä»¶ä¸ºç³»ç»Ÿè‡ªåŠ¨å‘é€çš„é‚®ä»¶ï¼Œè¯·å‹¿ç›´æ¥å›å¤ã€‚ \u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;/div\u0026gt;`, mailSubjectAdmin: \u0026#39;æ‚¨çš„åšå®¢ã€Œ{{site.name}}ã€æ”¶åˆ°äº†æ–°è¯„è®º\u0026#39;, mailTemplateAdmin: ` \u0026lt;div style=\u0026#34;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;\u0026#34;\u0026gt; \u0026lt;h2 style=\u0026#34;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;\u0026#34;\u0026gt; æœ‰äººåœ¨\u0026lt;a style=\u0026#34;text-decoration:none;color: #12ADDB;\u0026#34; href=\u0026#34;{{site.url}}\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;{{site.name}}\u0026lt;/a\u0026gt;å‘è¡¨äº†æ–°çš„è¯„è®º \u0026lt;/h2\u0026gt; \u0026lt;div style=\u0026#34;padding:0 12px 0 12px;margin-top:18px\u0026#34;\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;{{self.nick}}\u0026lt;/strong\u0026gt; è¯„è®ºè¯´ï¼š\u0026lt;/p\u0026gt; \u0026lt;div style=\u0026#34;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;\u0026#34;\u0026gt;{{self.comment | safe}}\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;æ‚¨å¯ä»¥ç‚¹å‡»\u0026lt;a style=\u0026#34;text-decoration:none; color:#12addb\u0026#34; href=\u0026#34;{{site.postUrl}}\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;å‰å¾€åŸæ–‡æŸ¥çœ‹å®Œæ•´çš„è¯„è®ºå†…å®¹ã€‚\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div style=\u0026#34;border-top:1px solid #DDD; padding:13px 0 0 8px;\u0026#34;\u0026gt; è¯¥é‚®ä»¶ä¸ºç³»ç»Ÿè‡ªåŠ¨å‘é€çš„é‚®ä»¶ï¼Œè¯·å‹¿ç›´æ¥å›å¤ã€‚ \u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;/div\u0026gt;` });   åç»­é­”æ”¹ Hugo | ä¸ºBlogå¢åŠ è¯„è®ºåŒº  æ·»åŠ blobcatè¡¨æƒ…åŒ… ç”±äºwaline.htmlä¸­æœªå®šä¹‰emojié¡¹ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è‡ªå®šä¹‰emojiï¼Œæ­¤æ—¶walineåªèƒ½ä½¿ç”¨é¢„è®¾çš„weiboè¡¨æƒ…åŒ…ã€‚ä½†æ˜¯weiboæ€ä¹ˆå¤Ÿç”¨ï¼é•¿æœŸåˆ·æ¯›è±¡äººå£«éœ€è¦blobcatï¼ï¼ï¼\nå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ°ä½ æƒ³è¦çš„è¡¨æƒ…åŒ…ï¼Œè¿™é‡Œä»¥bilibiliå’Œweiboä¸ºä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10  Waline({ el: \u0026#39;#waline\u0026#39;, serverURL: \u0026#39;\u0026lt;YOUR SERVER URL\u0026gt;\u0026#39;, // è®¾ç½® emoji ä¸ºå¾®åšä¸å“”å“©å“”å“© + emoji: [ + \u0026#39;https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo\u0026#39;, + \u0026#39;https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili\u0026#39;, + ], });   é™„ä¸Šblobcatè¡¨æƒ…åŒ…åœ°å€ï¼šhttps://cdn.jsdelivr.net/gh/sowhereso/waline-blobcatemojis@1.2/blobsï¼ŒåŒæ ·å¡«åœ¨emojié¡¹ä¸­ï¼Œéœ€è¦è‡ªå–ã€‚\nä¿®æ”¹walineä¸»é¢˜ Walineï½œå¤œé—´æ ·å¼ä¿®æ”¹  åœ¨waline.htmlä¸­æ·»åŠ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  \u0026lt;style\u0026gt; .waline-container { background-color: var(--card-background); border-radius: var(--card-border-radius); box-shadow: var(--shadow-l1); padding: 2%; /*ç¼©å°è¾¹è·*/ } .waline-container .vcount { color: var(--card-text-color-main); } /*æ—¥é—´æ¨¡å¼*/ :root{ --waline-theme-color: #34495e; /*ä¸»é¢˜è‰²ï¼Œæäº¤æŒ‰é’®*/ --waline-active-color: #bababa; /*é¼ æ ‡ç§»åˆ°æäº¤æŒ‰é’®ä¸Šçš„é¢œè‰²*/ --waline-badge-color: #34495e; /*åšä¸»å¾½ç« è‰²*/ --waline-avatar-radius: 5px; /*å¤´åƒåœ†è§’*/ --waline-avatar-size: 6rem; /*å¤´åƒå¤§å°*/ --waline-dark-grey: #34495e; /*IDé¢œè‰²*/ --waline-text-color:#6a7988; /*è¯„è®ºå­—ä½“é¢œè‰²*/ } /*å¤œé—´æ¨¡å¼*/ :root[data-scheme=\u0026#34;dark\u0026#34;] { --waline-theme-color: #acc6e0; --waline-white: #34495e; /*æŒ‰é”®å­—ä½“é¢œè‰²*/ --waline-active-color: #8ab1d8; --waline-light-grey: #666; --waline-dark-grey: #acc6e0; /*IDé¢œè‰²*/ --waline-badge-color: #acc6e0; /* å¸ƒå±€é¢œè‰² */ --waline-text-color: rgba(255, 255, 255, 0.7); --waline-bgcolor: #515151; --waline-bgcolor-light: #66696b;/*è¡Œå†…ä»£ç å—é¢œè‰²*/ --waline-border-color: #9B9C9C; --waline-disable-bgcolor: #444; --waline-disable-color: #272727; /* ç‰¹æ®Šé¢œè‰² */ --waline-bq-color: #9B9C9C; /*quote*/ /* å…¶ä»–é¢œè‰² */ --waline-info-bgcolor: #acc6e0; --waline-info-color: #9B9C9C; } \u0026lt;/style\u0026gt;   ç”±äºZzoä¸»é¢˜é»˜è®¤ä¸ºdarkï¼Œæˆ‘å¯¹å…¶ä¿®æ”¹ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  \u0026lt;style\u0026gt; .waline-container { background-color: var(--card-background); border-radius: var(--card-border-radius); box-shadow: var(--shadow-l1); padding: 2%; /*ç¼©å°è¾¹è·*/ } .waline-container .vcount { color: var(--card-text-color-main); } /*é»˜è®¤*/ :root{ --waline-theme-color: #acc6e0; --waline-white: #34495e; /*æŒ‰é”®å­—ä½“é¢œè‰²*/ --waline-active-color: #8ab1d8; --waline-light-grey: #666; --waline-dark-grey: #acc6e0; /*IDé¢œè‰²*/ --waline-badge-color: #acc6e0; /* å¸ƒå±€é¢œè‰² */ --waline-text-color: rgba(255, 255, 255, 0.7); --waline-bgcolor: #515151; --waline-bgcolor-light: #66696b;/*è¡Œå†…ä»£ç å—é¢œè‰²*/ --waline-border-color: #9B9C9C; --waline-disable-bgcolor: #444; --waline-disable-color: #272727; /* ç‰¹æ®Šé¢œè‰² */ --waline-bq-color: #9B9C9C; /*quote*/ /* å…¶ä»–é¢œè‰² */ --waline-info-bgcolor: #acc6e0; --waline-info-color: #9B9C9C; } \u0026lt;/style\u0026gt;   é…ç½®å¥½çš„è¯ä¹Ÿå°±æ˜¯ä½ ç°åœ¨çœ‹åˆ°çš„walineçš„æ ·å­ã€‚\n","description":"","id":13,"section":"posts","tags":["Hugo","Waline"],"title":"Hugo | ä¸ºZzoä¸»é¢˜æ·»åŠ Walineè¯„è®º","uri":"http://blog.tantalum.life/posts/add-waline-for-hugo-blog/"},{"content":"äº‹æƒ…çš„å‘å±•éš¾ä»¥é¢„æ–™ å—å®³è€…Roelxyï¼šè™½ç„¶è¿™ç¯‡æ–‡ç« çš„æ ‡é¢˜æ˜¯\u0026quot;åšå®¢æŠ˜è…¾è®°\u0026quot;ï¼Œä½†å®é™…ä¸Šæˆ‘åªæ˜¯ä¸ºåšå®¢æ¢äº†ä¸ªåŠŸèƒ½æ›´å¼ºå¤§çš„ä¸»é¢˜ï¼Œç»“æœä¸€ä¸å°å¿ƒå°±404äº†\u0026hellip;æˆ‘èƒ½æ€ä¹ˆåŠï¼Œæˆ‘ä¹Ÿå¾ˆç»æœ›å•Šï¼ çœ‹ä¸­Zzoä¸»é¢˜çš„æœç´¢ã€ä»£ç æ ·å¼å’Œç›®å½•ï¼Œè‹±æ–‡å­—ä½“ä¹Ÿå¾ˆå¥½çœ‹ï¼Œç‹ ä¸‹å¿ƒæ¥ä»ç®€æ´é£æ ¼çš„MemEè·³æ§½è€Œæ¥ã€‚æ­¥éª¤ååˆ†å‚»ç™½ç”œï¼šæ²¡æœ‰git submoduleï¼Œç›´æ¥æŠŠä»“åº“æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°çš„åšå®¢æ ¹ç›®å½•ï¼Œç„¶åæ›¿æ¢é…ç½®æ–‡ä»¶å¹¶åšåŸºç¡€æ”¹åŠ¨ã€‚Hugo server -Dæœ¬åœ°é¢„è§ˆæ¯«æ— é—®é¢˜ï¼Œæ€ä¹ˆå°±ï¼Œæ€ä¹ˆå°±æ„å»ºå¤±è´¥äº†å‘¢ï¼Ÿ\n The path you are accessing was not found in the Build Outputs of your Deployment.If you want to view your Build Outputs directly, you can turn on the Directory Listing.\n è®¿é—®åšå®¢æ—¶å¼¹å‡ºçš„é”™è¯¯æç¤º: ç„¶è€Œæœ¬åœ°é¢„è§ˆå®Œå…¨æ²¡æœ‰é—®é¢˜   åšå®¢æ­å»ºæ–¹å¼æ˜¯hugo+Vercelï¼Œå¹¶æŠŠæºç æ¨é€åˆ°Githubä¸­è®©å…¶è¿æ¥Vercelè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚å¯¹äºè¿™ç§æœ¬åœ°é¢„è§ˆå®Œå…¨æ²¡é—®é¢˜ï¼Œä½†éƒ¨ç½²è¿‡ç¨‹å‡ºç°é”™è¯¯è¿™ç§æƒ…å†µæˆ‘æ¯«æ— å¤´ç»ªï¼Œç”šè‡³è¿˜æœ‰ä¸€ç‚¹å°å´©æºƒã€‚è™½ç„¶æˆ‘ç•™æœ‰å­˜æ¡£ï¼Œèƒ½ä¸€é”®å›æ»šåˆ°å‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†äº²çœ¼çœ‹è§è‡ªå·±çš„æˆæœåŠŸäºä¸€ç¯‘å¤šå°‘è¿˜æ˜¯æœ‰äº›éš¾å—\u0026hellip;ï¼ˆæ²¡é”™æˆ‘æ˜¯å°ç™½ï¼Œå»ºåšå®¢ä¹Ÿå°±ä¸åˆ°ä¸€å‘¨æ—¶é—´ï¼‰\nä¿®æ”¹äº†åšå®¢æ–‡ä»¶å¤¹çš„ä¸€äº›å†…å®¹ï¼Œè¯•å›¾è®©ä»–æ„å»ºæˆåŠŸï¼Œæ— æœã€‚æŠŠè¿™ä»¶äº‹è·Ÿçš®å¡”ä¸˜è¯´äº†ä¸€ä¸‹ï¼Œå¥¹ä¸ºæˆ‘æä¾›äº†æ–°çš„æ€è·¯ï¼šæœ¬åœ°æ¸²æŸ“ï¼ŒæŠŠæ¸²æŸ“å‡ºçš„æ–‡ä»¶æ¨åˆ°ä¸€ä¸ªæ–°ä»“åº“ï¼Œç”¨Github Pageså‘å¸ƒï¼Œä¹Ÿå°±æ˜¯Hugo+Github Pagesçš„æ­å»ºæ–¹å¼ã€‚ä¸ºäº†ä¼˜å…ˆæ‹¯æ•‘404çš„åšå®¢ï¼Œæˆ‘å…ˆç”¨å­˜æ¡£å°†å…¶å›å½’æ­£å¸¸ï¼ˆç°åœ¨æˆäº†å †æ”¾éšç¬”çš„åœ°æ–¹ï¼‰ï¼Œç„¶åå‡†å¤‡ç”¨æ–°çš„åŸŸåè¯•æ°´ï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªåšå®¢ï¼‰ã€‚\nå†å²æ€»æ˜¯æƒŠäººçš„ç›¸ä¼¼ Suicaçš„åˆ©ç”¨Github Pagesä¸Github Actionæ­å»ºå¹¶éƒ¨ç½²Hugoåšå®¢  å¯¹æ–°ä»“åº“æ‰“å£°æ‹›å‘¼ åœ¨Githubä¸­å»ºç«‹ä¸¤ä¸ªä»“åº“ï¼šå¯ä»¥è®¾ä¸ºç§å¯†çš„æºç ä»“åº“ï¼ˆå­˜æ”¾ä½ çš„åšå®¢æ ¹ç›®å½•ï¼Œå¯ä»¥éšæ„å‘½åï¼Œä¾‹å¦‚blogï¼‰å’Œéœ€è¦å…¬å¼€çš„ç¼–è¯‘ä»“åº“ã€‚ç”±äºä¸€äº›åŸå› ï¼Œå¦‚æœç¼–è¯‘ä»“åº“çš„åå­—ä¸æ˜¯username.github.ioï¼ˆusernameæ˜¯ä½ çš„Githubç”¨æˆ·åï¼‰çš„è¯ï¼Œä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚cssæ ·å¼æ— æ³•åŠ è½½ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯å°†config.tomlçš„baseURLè®¾ç½®ä¸ºå«å­è·¯å¾„çš„åœ°å€ï¼Œä¸èƒ½æ­£ç¡®çš„å¤„ç†æ‰€æœ‰èµ„æºçš„æ„å»ºä½ç½®ã€‚æƒ³äº†è§£æ›´å¤šè¯·çœ‹è¿™ç¯‡åšå®¢ã€‚\nç”±äºæˆ‘ä¹‹å‰æŒ‰ç…§è¿™ç¯‡åšå®¢æ­å»ºè¿‡åšå®¢ï¼Œæ‰€ä»¥æˆ‘è¿›è¡Œè¿‡gitå…¨å±€é…ç½®ï¼Œä¸”æœ¬åœ°å­˜æœ‰SSH keyï¼Œå› æ­¤ç•¥è¿‡SSHç”Ÿæˆä¸ä¸Šä¼ å…¬é’¥æ­¥éª¤ã€‚\nGithubç™»å½•åå³ä¸Šè§’Settingsé‡Œæ‰¾åˆ°Developer settingsï¼Œå†ç‚¹Personal access tokensï¼ŒGenerate new tokenç”Ÿæˆæ–°çš„tokenï¼ŒSelect scopesé‡Œå‹¾é€‰repoå…¨éƒ¨å†…å®¹ä¸workflowï¼Œæœ€åç‚¹å‡»ç»¿è‰²æŒ‰é’®ç”Ÿæˆï¼Œå°†ç”Ÿæˆçš„Tokenä¿å­˜ä¸‹æ¥ã€‚ç„¶åä½¿ç”¨å¯è§†åŒ–çš„gitå·¥å…·ï¼šGithub Desktopå°†æ”¯ç¦»ç ´ç¢çš„åšå®¢æ ¹ç›®å½•pushåˆ°æºç ä»“åº“ä¸­ï¼ˆä½¿ç”¨ä»£ç ä¹Ÿå¯ï¼‰ã€‚è¿›å…¥æºç ä»“åº“ï¼Œå¯ä»¥å‘ç°æœ¬åœ°çš„æ–‡ä»¶å·²ç»è¢«æ¨é€åˆ°æºç ä»“åº“äº†ã€‚\nç‚¹è¿›æºç ä»“åº“çš„Settingsä¸­ï¼Œæ‰¾åˆ°Secretsï¼Œç‚¹å‡»New repository secretï¼Œåç§°ä¸ºPERSONAL_TOKENï¼Œå†…å®¹ä¸ºä¹‹å‰å¤‡ä»½ä¸‹æ¥çš„Tokenã€‚\nGithub Actionæ˜¯ä»€ä¹ˆèƒ½åƒå— æºç ä»“åº“ä¸­ç‚¹å‡»ä¸Šæ–¹çš„Actionsï¼Œset up a workflow yourselfï¼Œä¹‹åä½ ä¼šå‘ç°githubä¼šåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º/.github/workflows/xxx.ymlæ–‡ä»¶ï¼Œä¸‹æ–¹æ˜¯è¿™ä¸ªæ–‡ä»¶çš„ç¼–è¾‘åŒºåŸŸã€‚æŠŠä¸‹é¢çš„é…ç½®å¤åˆ¶è¿›å»ï¼Œymlæ–‡ä»¶çš„åç§°ä¸é…ç½®ç¬¬ä¸€è¡Œçš„nameéšæ„å¡«ï¼Œç‰¹åˆ«æ³¨æ„æˆ‘æ·»åŠ æ³¨é‡Šçš„åœ°æ–¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  name:hugo-blogon:push:branches:- main # æºç ä»“åº“çš„é»˜è®¤åˆ†æ”¯ï¼Œè¿™é‡Œæ˜¯mainï¼Œæœ‰æ—¶ä¹Ÿæ˜¯masterpull_request:jobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2# with: # å¦‚æœä½ å®‰è£…ä¸»é¢˜æ—¶ç”¨çš„æ˜¯git submodule add# submodules: true # é‚£ä¹ˆè¿™ä¸‰è¡Œä¸å¿…æ³¨é‡Šæ‰ï¼Œè¿™ä¸€è¡Œå¡«å†™ true# fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:\u0026#39;0.89.1\u0026#39;# å¡«å†™ä½ çš„hugoç‰ˆæœ¬ï¼Œå¯ç”¨hugo versionæŸ¥çœ‹extended:true# å¦‚æœä½ ä½¿ç”¨çš„ä¸æ˜¯extendedç‰ˆæœ¬çš„hugoï¼Œå°†trueæ”¹ä¸ºfalse- name:Buildrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == \u0026#39;refs/heads/main\u0026#39; }} # æ³¨æ„å¡«å†™mainæˆ–è€…masterï¼Œå…¶ä»–ä¸è¦åŠ¨with:personal_token:${{ secrets.PERSONAL_TOKEN }}# å¦‚æœsecretå–äº†å…¶ä»–åç§°ï¼Œå°†PERSONAL_TOKENæ›¿æ¢æ‰external_repository:\u0026lt;username\u0026gt;/\u0026lt;username\u0026gt;.github.io# å¡«å†™è¿œç¨‹ä»“åº“ï¼Œusernameæ˜¯ä½ çš„githubç”¨æˆ·åpublish_dir:./publiccname:blog.example.com # å¡«å†™ä½ çš„è‡ªå®šä¹‰åŸŸåã€‚å¦‚æœæ²¡æœ‰ç”¨è‡ªå®šä¹‰åŸŸåï¼Œæ³¨é‡Šæ‰è¿™è¡Œ  ä»¥ä¸Šä»£ç æ¥è‡ªSuicaï¼\n æœ€åé‚£è¡Œå¡«å†™è‡ªå®šä¹‰åŸŸåï¼Œæ¨èç¬¬ä¸€æ¬¡éƒ¨ç½²æ—¶å…ˆæ³¨é‡Šæ‰ï¼Œæ­å»ºå®Œæˆåå¦‚æœå¯¹å›½å†…/å¤–è®¿é—®é€Ÿåº¦æ»¡æ„çš„è¯å†å¡«å†™ï¼Œè¿™ç¯‡æ–‡ç« çš„æœ€åä¼šè®²åˆ°ã€‚\n æäº¤commitï¼Œä¿å­˜ï¼Œç„¶åå¯ä»¥å‘ç°actionåœ¨å°è¯•è¿è¡Œï¼Œç»¿è‰²ä»£è¡¨éƒ¨ç½²æˆåŠŸã€‚è¿™ä¸ªæ—¶å€™ç¼–è¯‘ä»“åº“é‡Œå¯ä»¥çœ‹åˆ°è‡ªåŠ¨å»ºäº†ä¸€ä¸ªåä¸ºgh-pagesçš„åˆ†æ”¯ï¼Œé‡Œé¢å‡ºç°äº†è®¸å¤šä¸œè¥¿ã€‚å¦‚æœä½ æ²¡æœ‰å¡«å†™è‡ªå®šä¹‰åŸŸåï¼Œé‚£ä¹ˆusername.github.ioå°±æ˜¯ä½ çš„åšå®¢åœ°å€ï¼Œæ­¤æ—¶æ‰“å¼€ä½ çš„åšå®¢åŸŸååº”è¯¥å·²ç»å¯ä»¥çœ‹åˆ°åšå®¢å†…å®¹ã€‚è¿™ç§æ­å»ºæ–¹å¼å°±æ˜¯Hugo+Github Actionè‡ªåŠ¨éƒ¨ç½²ã€‚\nå¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œå¦‚æœæˆ‘å‚è€ƒè¿™ä¸ªworkflowï¼Œåœ¨éƒ¨ç½²ï¼ˆdeployï¼‰é‚£æ­¥ä¼šå‡ºç°å¥‡æ€ªçš„é”™è¯¯ï¼š\n error:src refspec main does not match any\n å› ä¸ºæœ‰deployçš„æ­¥éª¤ï¼Œè®©æˆ‘æ„Ÿè§‰æ„Ÿè§‰å’ŒVercelçš„404é”™è¯¯å·®ä¸å¤š\u0026hellip;\nå¦‚æœä½ æœ‰è‡ªæœ‰åŸŸåï¼ åœ¨workflowä¸­æ·»åŠ è‡ªæœ‰åŸŸå å¦‚æœä½ æƒ³åœ¨æºç ä»“åº“æ·»åŠ workflowé‚£ä¸€æ­¥æ·»åŠ è‡ªæœ‰åŸŸåï¼Œè¯·å‚è€ƒSuicaçš„è‡ªå®šä¹‰åŸŸåæ³¨æ„äº‹é¡¹ã€‚å…·ä½“æ¥è¯´å°±æ˜¯å…ˆå»config.tomlä¸­å°†baseURLæ”¹ä¸ºä½ çš„è‡ªæœ‰åŸŸåï¼Œå¹¶ä¸”ä¸ºworkflowæ–‡ä»¶ä¸­æœ€åæ³¨é‡Šçš„ä¸€è¡Œåˆ æ‰æ³¨é‡Šï¼Œç„¶ååœ¨DNSç®¡ç†å•†é‚£é‡Œæ·»åŠ ä¸€é¡¹å†…å®¹ä¸ºusername.github.ioçš„CNAMEè®°å½•ã€‚æœ€åè¿›å…¥ç¼–è¯‘ä»“åº“settingsï¼Œpagesé¡µé¢æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼Œå‹¾é€‰githubä¸Šçš„å¼ºåˆ¶httpsæŒ‰é’®ã€‚ä½ ä¹Ÿå¯ä»¥æ‰“å¼€cloudflareçš„ä»£ç†ï¼Œä½†è¿™æ ·åšä¼šæ— æ³•å‹¾é€‰å¼ºåˆ¶httpsæŒ‰é’®ã€‚\nä½†æ˜¯ï¼Œç”±äºgithubåœ¨å›½å†…åŠ è½½é€Ÿåº¦ææ…¢ï¼Œå¦‚æœæƒ³è·å¾—å›½å†…åŠ é€Ÿï¼Œå¯ä»¥åŠ ä¸€å±‚cloudflareè¯ä¹¦ï¼Œæˆ–è€…æ˜¯Vercel(éœ€è¦è‡ªæœ‰åŸŸåï¼ŒVercelåˆ†é…çš„åŸŸåå¾ˆä¸‘)ã€‚è¿™é‡Œæ¨èåè€…ï¼Œå°†åŸŸåäº¤ç»™Vercelä¿ç®¡å¯ä»¥è·å¾—ä¸¤ä¸ªåšå®¢åœ°å€ï¼Œä¸€ä¸ªæ˜¯user.github.ioï¼ˆå›½å¤–è®¿é—®ï¼‰ä¸€ä¸ªæ˜¯è‡ªå·±çš„åŸŸåï¼ˆå›½å†…åŠ é€Ÿï¼‰ï¼Œå¥½å¤„å¤šå¤šã€‚ä½†å¦‚æœä½ ä½¿ç”¨çš„ä¸»é¢˜æœ‰ä¸€äº›åŠŸèƒ½æ—¨åœ¨é‡å®šå‘åˆ°baseURLçš„è¯ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›åŠŸèƒ½å‡ºç°æ•…éšœï¼ˆå¤šæ•°æƒ…å†µæ˜¯æ²¡é—®é¢˜çš„ï¼‰ï¼Œå»ºè®®ä»”ç»†æ£€æŸ¥ä¸€ä¸‹ã€‚\nè¯·é—®ä½ è¦æ¥ç‚¹å›½å†…åŠ é€Ÿé­”æ³•å— ç‚¹å‡»Vercelæ³¨å†Œé¡µé¢ï¼Œé€‰æ‹©ä½¿ç”¨ Github è´¦å·æ³¨å†Œï¼Œå¼¹å‡ºæˆæƒçª—å£æ—¶ï¼Œç‚¹å‡»Authorize Vercelï¼Œéšåè·³è½¬åˆ°Let\u0026rsquo;s build something newé¡µé¢ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œåœ¨Dashboardç‚¹å‡» New projectï¼‰ï¼Œåœ¨Import Git Repositoryä¸‹æ–¹é€‰æ‹©Add github org or accountï¼Œå¼¹å‡ºå®‰è£…çª—å£ï¼Œç‚¹å‡»Installã€‚ä¹‹åå†åœ¨GIT SCOPEä¸­ç‚¹å‡»ä½ çš„ Github è´¦æˆ·ï¼Œä¸‹æ–¹çš„é¡¹ç›®é€‰æ‹©username.github.ioï¼Œä¹Ÿå°±æ˜¯ä½ çš„ç¼–è¯‘ä»“åº“ï¼Œç‚¹å‡»skipï¼Œè¾“å…¥Vercelé¡¹ç›®åï¼ˆéšæ„ï¼‰ï¼Œç„¶ådeployï¼Œç­‰çœ‹åˆ°Congratulationså’Œæ»¡å±çƒŸèŠ±æ—¶ï¼Œä½ è·å¾—äº†ä¸é”™çš„å›½å†…åŠ é€Ÿã€‚\nVercelç‚¹è¿›åˆšåˆšæ·»åŠ çš„é¡¹ç›®ï¼Œå³ä¸Šè§’settingä¸­é€‰æ‹©domainsï¼Œè¾“å…¥ä½ çš„åŸŸåï¼Œç‚¹å‡»addï¼Œç„¶årefreshä¸€ä¸‹æŸ¥çœ‹åº”è¯¥æ·»åŠ çš„DNSè®°å½•ï¼ŒæŒ‰è¦æ±‚å»DNSæä¾›å•†é‚£é‡Œæ·»åŠ ï¼ˆä¸€èˆ¬æ˜¯å†…å®¹ä¸º76.76.21.21çš„Aè®°å½•æˆ–å†…å®¹ä¸ºcname.vercel-dns.comçš„CNAMEè®°å½•ï¼‰ï¼Œæœ€åå›åˆ°Vercelä¸­refreshä¸€ä¸‹çœ‹åˆ°ä¸¤ä¸ªè“è‰²å¯¹å·å°±æ˜¯æˆåŠŸäº†ã€‚è®°å¾—å»config.tomlä¸­å°†baseURLæ”¹ä¸ºä½ çš„è‡ªæœ‰åŸŸåï¼Œç¨ç­‰ä¸€åˆ†é’Ÿå°±å¯ä»¥ä½¿ç”¨ä½ çš„åŸŸåè¿›è¡Œè®¿é—®äº†ã€‚\n","description":"","id":14,"section":"posts","tags":["Hugo","Github Action"],"title":"Hugo | èœé¸Ÿåšå®¢æŠ˜è…¾è®°","uri":"http://blog.tantalum.life/posts/migrate-from-vercel-to-github-action/"},{"content":"MemE 2021/11/14æ›´æ–°ï¼š\næœ¬ç«™ç›®å‰ä¸»é¢˜ä½¿ç”¨Zzo ç›®å‰æˆ‘çš„åšå®¢é‡‡ç”¨MemEä¸»é¢˜ï¼Œè¿™æ¬¾ä¸»é¢˜ç”±reuixiyåˆ¶ä½œï¼Œè®¾è®¡ç†å¿µæ˜¯è½»é‡ã€æç®€ä¸»ä¹‰ï¼Œä½†ä¸ç®€é™‹ï¼ŒåŒæ—¶ä¹Ÿå¯¹é«˜åº¦è‡ªå®šä¹‰éå¸¸å‹å¥½ï¼Œç”šè‡³è¿˜æä¾›äº†ç®€ç¹ä½“ä¸­æ–‡çš„é…ç½®æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯config.tomlï¼Œä»¥ä¸‹æ˜¯å¼€å‘è€…reuixiyå¯¹MemEä¸»é¢˜çš„ä»‹ç»ï¼š\n MemE æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”å¯é«˜åº¦å®šåˆ¶çš„ GoHugo åšå®¢ä¸»é¢˜ï¼Œä¸“ä¸ºä¸ªäººåšå®¢è®¾è®¡ã€‚MemE ä¸»é¢˜ä¸“æ³¨äºä¼˜é›…ã€ç®€çº¦ã€ç°ä»£ï¼Œä»¥åŠä»£ç çš„æ­£ç¡®æ€§ã€‚MemE ä¸»é¢˜å¯¹ä¹ æƒ¯äº† Hexo çš„ç”¨æˆ·éå¸¸å‹å¥½ï¼Œæ˜¯ä» Hexo è¿ç§»åˆ° Hugo çš„ä¸é”™é€‰æ‹©ã€‚\nä¸ºä»€ä¹ˆè¦èµ·åä¸º MemE å‘¢ï¼Ÿè¿™å››ä¸ªå­—æ¯çš„å«ä¹‰æ˜¯åŸºäºè¿™ä¸ªå•è¯æœ¬èº«çš„ï¼Œå³å¸Œæœ›ä½ çš„åšå®¢ä»¥åŠæ–‡ç« èƒ½å¤Ÿåƒæ¨¡å› ä¸€æ ·ä¼ æ’­ã€å½±å“ã€‚å½“ç„¶ï¼Œå¸Œæœ›è¿™ä¸ªä¸»é¢˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¹¶ç»™ä½ å¸¦æ¥æ¬¢ä¹ã€‚è‡³äºè¿™å››ä¸ªå­—æ¯çš„å½¢å¼ï¼ˆMemEï¼‰ï¼Œåˆ™æ˜¯å— Taylor Swift çš„ ME! ä¸­çš„ã€Œyou canâ€™t spell â€œawesomeâ€ without â€œmeâ€ã€å¯å‘ã€‚åŒæ—¶ï¼Œè¿™ä¸¤ä¸ªå­—æ¯çš„å¤§å†™å°±å°†è¿™ä¸ªå•è¯åˆ†æˆäº†ä¸¤éƒ¨åˆ†â€”â€”ME å’Œ emï¼Œä¸­é—´ä¸¤ä¸ªå­—æ¯ç»„æˆ emï¼Œè¿™ä¹Ÿç»™äººä¸€ç§å¯çˆ±çš„æ„Ÿè§‰ã€‚æ­¤å¤–ï¼Œem ä¹Ÿæ˜¯ me çš„åå†™ï¼Œè¿™åˆæ˜¯æˆ‘éå¸¸å–œæ¬¢çš„å½¢å¼ï¼\nMemE ä¸»é¢˜è·µè¡Œæç®€ä¸»ä¹‰ï¼Œæ²¡æœ‰ä½¿ç”¨ç°æœ‰çš„æµè¡Œå‰ç«¯åº“ï¼Œä¸»é¢˜çš„ HTML å’Œ CSS çš†ç”±æˆ‘çº¯æ‰‹å·¥ä»é›¶é›•ç¢è€Œæˆã€‚åŒæ—¶ï¼ŒMemE çš„ CSS ä¹Ÿæ˜¯æŒ‰éœ€ç”Ÿæˆçš„ï¼Œæ¯”å¦‚ï¼šå¦‚æœä½ ä¸éœ€è¦ä»£ç é«˜äº®çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä»£ç é«˜äº®çš„æ ·å¼å°±ä¸ä¼šè¢«åŠ å…¥ MemE çš„ CSS æ–‡ä»¶ä¸­ã€‚æ›´ç”šï¼ŒMemE æ— éœ€åŠ è½½ä»»ä½•å›¾æ ‡åº“â€”â€”ä¸»é¢˜çš„å›¾æ ‡æ˜¯é€šè¿‡ Hugo çš„æ•°æ®æ¨¡æ¿ç›´æ¥å°† SVG åµŒå…¥åˆ° HTML ä¸­å®ç°çš„â€”â€”è¿™ä½¿å¾— MemE ä¸ä¼šå»åŠ è½½å›¾æ ‡åº“ä¸­å¤§é‡ä½ æ‰€ä¸éœ€è¦çš„å›¾æ ‡ï¼ŒèŠ‚çº¦äº†å¾ˆå¤šèµ„æºã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥æ–¹ä¾¿åœ°è‡ªå®šä¹‰å±äºè‡ªå·±çš„å›¾æ ‡ã€‚\n ä¸è¿‡æˆ‘è‡ªå·±ä¹Ÿæ˜¯å°ç™½å“ˆå“ˆå“ˆï¼Œæ‰€ä»¥ä¹Ÿå‚è€ƒäº†å¾ˆå¤šå¤§ä½¬çš„é…ç½®ã€‚åœ¨è¿™ç¯‡æ–‡ç« çš„æœ€åæˆ‘åˆ—å‡ºäº†æˆ‘å‚è€ƒçš„èµ„æ–™ã€‚æ„Ÿè°¢å„ä½ï¼Œä¸‡ç‰©çš†äº’è”ã€‚\nåŸºç¡€éƒ¨åˆ† ç›®å½• åœ¨config.tomlä¸­å°†enableTOCè®¾ä¸ºtrueï¼Œç„¶ååœ¨æ–‡ç« çš„ Front-Matters åŠ ä¸Štoc: trueå³å¯ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ç›®å½•åªèƒ½æ˜¾ç¤ºäºŒçº§ä»¥ä¸‹çš„æ ‡é¢˜ã€‚å¦‚æœéœ€è¦æ˜¾ç¤ºä¸€çº§æ ‡é¢˜ï¼Œå¯ä»¥å°†startLevelä¿®æ”¹ä¸º 1ï¼ˆé»˜è®¤2ï¼‰ã€‚\n ä¸è¿‡ï¼Œå¹¶ä¸å»ºè®®åœ¨æ–‡ç« å†…ç”¨ä¸€çº§æ ‡é¢˜ï¼Œå› ä¸ºä¸€çº§æ ‡é¢˜ä¸ºæ–‡ç« æ ‡é¢˜ã€‚æ‰€ä»¥ï¼Œæ–‡ç« å†…è¿˜æ˜¯å»ºè®®ä»¥äºŒçº§æ ‡é¢˜å¼€å§‹ï¼Œè¿™æ›´ç¬¦åˆé€»è¾‘ï¼Œä¹Ÿæ›´æœ‰åˆ©äºSEO(search engine optimization)ã€‚\n å…³äºç›®å½•çš„ä½ç½®ï¼Œè¯·çœ‹è¿™ä¸ªissueã€‚\nç½‘ç»œå­—ä½“ ç›´æ¥å‚è€ƒè¿™ç¯‡åšå®¢ã€‚\né¡µè„šæ·»åŠ ä»Šæ—¥è¯—è¯ åœ¨ MemE ä¸»é¢˜é¡µè„šæ·»åŠ ä»Šæ—¥è¯—è¯  åœ¨ MemE ä¸»é¢˜çš„è‡ªå®šä¹‰é¡µè„šæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç å³å¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;!-- æ–‡ä»¶ä½ç½®ï¼š~/layouts/partials/custom/footer.html --\u0026gt; \u0026lt;script src=\u0026#34;https://sdk.jinrishici.com/v2/browser/jinrishici.js\u0026#34; charset=\u0026#34;utf-8\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;text class=\u0026#34;poem_sentence\u0026#34;\u0026gt;\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;poem_info\u0026#34;\u0026gt;\u0026lt;/text\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; jinrishici.load(function(result) { var sentence = document.querySelector(\u0026#34;.poem_sentence\u0026#34;) var info = document.querySelector(\u0026#34;.poem_info\u0026#34;) sentence.innerHTML = result.data.content info.innerHTML = \u0026#39;â€”â€”\u0026#39; + result.data.origin.author }); \u0026lt;/script\u0026gt;   è¿™é‡Œæˆ‘å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºè®¾ç½®äº†è¯—å¥å’Œä½œè€…ä¹‹é—´ç”¨ç ´æŠ˜å·ã€Œâ€”â€”ã€è¿æ¥ï¼Œè€Œæˆ‘æŒ‰ç…§æ•™ç¨‹åœ¨~/layouts/partials/custom/footer.htmlä¸­æ·»åŠ äº†ä»£ç åå‘ç°ç ´æŠ˜å·æ˜¾ç¤ºä¹±ç ï¼Œè€Œä¸”ç”Ÿæˆçš„è¯—å¥è¢«æ”¾åœ¨äº†æœ€ä¸‹æ–¹ï¼Œè€Œæˆ‘å¸Œæœ›è¯—å¥å¤„åœ¨ä½œè€…å’Œç‰ˆæƒä¹‹é—´ï¼Œæ‰€ä»¥æˆ‘åœ¨~/layouts/partials/footer.htmlçš„é€‚å½“ä½ç½®æ·»åŠ ä»£ç ã€‚\n éœ€è¦æ³¨æ„æˆ‘ç›´æ¥ä¿®æ”¹äº†memeä¸»é¢˜çš„é¡µè„šæ–‡ä»¶è€Œä¸æ˜¯ä¸»é¢˜çš„è‡ªå®šä¹‰é¡µè„šæ–‡ä»¶ï¼Œåªé€‚ç”¨äºæ‰‹åŠ¨å®‰è£…ä¸»é¢˜ï¼Œå¦‚æœæ˜¯ git submodule æ–¹å¼å®‰è£…ä¸»é¢˜åˆ™ä¸è¦ç›´æ¥ä¿®æ”¹ä¸»é¢˜é¡µè„šæ–‡ä»¶ï¼Œå¦åˆ™ä¸åˆ©äºä¸»é¢˜åç»­æ›´æ–°ã€‚\n åŠ è½½è¿›åº¦æ¡ Hugo theme stackä¸»é¢˜ æ­£ç¡®çš„é­”æ”¹æ–¹å¼  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  \u0026lt;!-- layouts/partials/footer/custom.html --\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js\u0026#34; integrity=\u0026#34;sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css\u0026#34; integrity=\u0026#34;sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; /\u0026gt; \u0026lt;script\u0026gt; NProgress.start(); document.addEventListener(\u0026#34;readystatechange\u0026#34;, () =\u0026gt; { if (document.readyState === \u0026#34;interactive\u0026#34;) NProgress.inc(0.8); if (document.readyState === \u0026#34;complete\u0026#34;) NProgress.done(); }); \u0026lt;/script\u0026gt;   éœ€è¦æ³¨æ„stackå’Œmemeçš„é¡µè„šæ–‡ä»¶ä½ç½®ä¸å¤ªä¸€æ ·ï¼Œmemeçš„åœ¨~/layouts/partials/custom/footer.htmlã€‚ä¸è¿‡è¿›åº¦æ¡æ˜¯åœ¨é¡µé¢é¡¶ç«¯ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åœ¨header.htmlæ·»åŠ ä»£ç ã€‚\nçŸ­ä»£ç  åœ¨åšå®¢ä¸­æ’å…¥Bç«™è§†é¢‘ åœ¨åšå®¢ä¸­æ’å…¥Bç«™è§†é¢‘  è™½ç„¶æˆ‘ä¸ªäººç›¸å½“ä¸å–œæ¬¢bilibiliï¼Œä½†biliåœ¨å“ªéƒ½èƒ½çœ‹ï¼Œè€Œæ²¹ç®¡ä¸è¡Œã€‚\næ·»åŠ ä»£ç  åœ¨layouts/shortcodesæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶bilibili.html(å¦‚æœæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶å¤¹å°±è‡ªå·±æ–°å»ºä¸€ä¸ª)ï¼Œæˆ‘é€‰æ‹©åœ¨åšå®¢æ ¹ç›®å½•ä¸‹å»ºlayouts/shortcodesæ–‡ä»¶å¤¹ï¼Œåç»­æ¢ä¸»é¢˜çš„æ—¶å€™æ–¹ä¾¿ç®¡ç†ã€‚ç„¶åç²˜è´´å¦‚ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8  {{ $videoID := index .Params 0 }} {{ $pageNum := index .Params 1 | default 1}} {{ if (findRE \u0026#34;^[bB][vV][0-9a-zA-Z]+$\u0026#34; $videoID) }} \u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026#34;biliplayer\u0026#34; src=\u0026#34;//player.bilibili.com/player.html?bvid={{ $videoID }}\u0026amp;page={{ $pageNum }}\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; loading=\u0026#34;lazy\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; {{ else }} \u0026lt;div\u0026gt;\u0026lt;iframe id=\u0026#34;biliplayer\u0026#34; src=\u0026#34;//player.bilibili.com/player.html?aid={{ $videoID }}\u0026amp;page={{ $pageNum }}\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; loading=\u0026#34;lazy\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt; {{ end }}   ç„¶åç”¨ CSS ä¿®æ”¹æ’­æ”¾å™¨çš„å°ºå¯¸ï¼Œæœ€å¥½èƒ½æ ¹æ®ä¸åŒçš„å±å¹•å¤§å° (PC å’Œæ‰‹æœº) åŠ¨æ€è°ƒæ•´ã€‚åœ¨/assets/scss/components/_post-meta.scssä¸­æ’å…¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11  // åµŒå…¥ BiliBili è§†é¢‘ #biliplayer { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #biliplayer { width: 100%; height: 250px; } }   æˆ–è€…ç›´æ¥åœ¨åˆšåˆšçš„layouts/shortcodes/bilibili.htmlä¸­æ·»åŠ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;style\u0026gt; // åµŒå…¥ BiliBili è§†é¢‘ #biliplayer { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #biliplayer { width: 100%; height: 250px; } } \u0026lt;/style\u0026gt;   æˆ‘åœ¨è¿™é‡Œåšäº†ä¸€ç‚¹æ”¹åŠ¨ï¼Œç¬¬äºŒæ­¥css/htmlçš„idåº”è¯¥æ˜¯biliplayerè€Œä¸æ˜¯bilibiliï¼Œå¦‚æœçœ‹ä¸æ‡‚çš„è¯ç›´æ¥å¤åˆ¶æˆ‘çš„ä»£ç å³å¯ã€‚\nåº”ç”¨ åœ¨ä½ æƒ³æ’å…¥ B ç«™è§†é¢‘çš„åœ°æ–¹å†™ä¸‹ (AVå·ä¸å¸¦ av/AVï¼ŒBVå·å¿…é¡»å¸¦bv/BVï¼ŒPVå·æ§åˆ¶åˆ†Pï¼Œé»˜è®¤ä¸º 1ï¼Œç›´æ¥å†™ä¸éœ€è¦ä»£ç æ¡†)\n1  {{\u0026lt; bilibili [AVå·/BVå·] [PVå·] \u0026gt;}}   ä»¥é•¿æ¯›è±¡çš„ä»‹ç»è¿™æ®µå½±ç‰‡ä¸ºä¾‹ï¼š\nå¯ä»¥å†™åšï¼š\n1  {{\u0026lt; bilibili BV1UW411g7eq \u0026gt;}}   æˆ–è€…\n1  {{\u0026lt; bilibili 21139681 \u0026gt;}}   æ•ˆæœå¦‚ä¸‹ï¼š\n  #biliplayer { width: 100%; height: 550px; } @media only screen and (min-device-width: 320px) and (max-device-width: 480px) { #biliplayer { width: 100%; height: 250px; } }  é»‘å¹•æ–‡å­— å¯ä»¥ç›´æ¥å‚è€ƒï¼šhttps://mogeko.me/posts/zh-cn/080/\nè¿˜æœ‰æ›´å¤š\u0026hellip; ç”©é“¾æ¥ï¼Œå®åœ¨è‚ä¸åŠ¨äº†Orz\né¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ ä¸‰é€‰ä¸€ï¼ŒMemEä¸»é¢˜å°†ä»£ç æ”¾ç½®åœ¨/layouts/partials/custom/script.htmlä¸­ã€‚\næ ¸å¿ƒä»·å€¼è§‚ å‚è€ƒï¼šåšå®¢å›­ä¸»é¢˜ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; /* é¼ æ ‡ç‰¹æ•ˆï¼Œæ–‡å­—ç‰¹æ•ˆ */ var a_idx = 0; jQuery(document).ready(function($) { $(\u0026#34;body\u0026#34;).click(function(e) { var a = new Array(\u0026#34;â¤å¯Œå¼ºâ¤\u0026#34;,\u0026#34;â¤æ°‘ä¸»â¤\u0026#34;,\u0026#34;â¤æ–‡æ˜â¤\u0026#34;,\u0026#34;â¤å’Œè°â¤\u0026#34;,\u0026#34;â¤è‡ªç”±â¤\u0026#34;,\u0026#34;â¤å¹³ç­‰â¤\u0026#34;,\u0026#34;â¤å…¬æ­£â¤\u0026#34;,\u0026#34;â¤æ³•æ²»â¤\u0026#34;,\u0026#34;â¤çˆ±å›½â¤\u0026#34;,\u0026#34;â¤æ•¬ä¸šâ¤\u0026#34;,\u0026#34;â¤è¯šä¿¡â¤\u0026#34;,\u0026#34;â¤å‹å–„â¤\u0026#34;); var $i = $(\u0026#34;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026#34;).text(a[a_idx]); a_idx = (a_idx + 1) % a.length; var x = e.pageX, y = e.pageY; $i.css({ \u0026#34;z-index\u0026#34;: 999999999999999999999999999999999999999999999999999999999999999999999, \u0026#34;top\u0026#34;: y - 20, \u0026#34;left\u0026#34;: x, \u0026#34;position\u0026#34;: \u0026#34;absolute\u0026#34;, \u0026#34;font-weight\u0026#34;: \u0026#34;bold\u0026#34;, \u0026#34;color\u0026#34;: \u0026#34;rgb(\u0026#34;+~~(255*Math.random())+\u0026#34;,\u0026#34;+~~(255*Math.random())+\u0026#34;,\u0026#34;+~~(255*Math.random())+\u0026#34;)\u0026#34; }); $(\u0026#34;body\u0026#34;).append($i); $i.animate({ \u0026#34;top\u0026#34;: y - 180, \u0026#34;opacity\u0026#34;: 0 }, 1500, function() { $i.remove(); }); }); }); \u0026lt;/script\u0026gt;   çƒŸèŠ±ç‰¹æ•ˆ 1 2 3  \u0026lt;!--é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼ŒçƒŸèŠ±æ•ˆåº”--\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/ZhaoUncle/image@main/static/mouse-click.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;canvas width=\u0026#34;1777\u0026#34; height=\u0026#34;841\u0026#34; style=\u0026#34;position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;\u0026#34;\u0026gt;\u0026lt;/canvas\u0026gt;   çˆ±å¿ƒç‰¹æ•ˆ 1  \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;   çœ‹æ¿å¨˜ Hugoåšå®¢æ·»åŠ live2dçœ‹æ¿å¨˜  æ–¹æ³•1: ä½¿ç”¨htmlæ¨¡æ¿ï¼Œå¼•å…¥jsæ–‡ä»¶ å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°/layouts/partials/footer.htmlä¸­{{ end }}çš„å‰ä¸€è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  \u0026lt;!-- Live2Dï¼Œç½‘é¡µä¸Šçš„å°äººï¼Œå¯ä»¥ä¿®æ”¹live2d_config.jsæ¥ä¿®æ”¹æ¨¡å‹ï¼Œæ¨¡å‹éƒ½åœ¨static/live2d_modelsé‡Œé¢ --\u0026gt; \u0026lt;!-- ä½ ä¹Ÿå¯ä»¥æŠŠjsæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œæ”¾åˆ°static/js/ç›®å½•ä¸‹ï¼Œå°±ä¸ä¾èµ–åˆ«äººçš„æœåŠ¡äº† --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.0.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; L2Dwidget.init({ model: { scale: 1, hHeadPos: 0.5, vHeadPos: 0.618, jsonPath: \u0026#39;https://cdn.jsdelivr.net/gh/DomathID/live2d-model@main/Miku/miku.model.json\u0026#39;, // xxx.model.json çš„è·¯å¾„,æ¢äººç‰©ä¿®æ”¹è¿™ä¸ª  }, display: { superSample: 9, // è¶…é‡‡æ ·ç­‰çº§ï¼Œç›¸å½“äºæ¸…æ™°åº¦ï¼Œæ•°å€¼è¶Šé«˜è¶Šæ¸…æ™°  width: 300, // canvasçš„å®½åº¦  height: 400, // canvasçš„é«˜åº¦  position: \u0026#39;left\u0026#39;, // æ˜¾ç¤ºä½ç½®ï¼šå·¦æˆ–å³  hOffset: 0, // canvasæ°´å¹³åç§»ï¼Œæ­£æ–¹å‘ä¸ºå³  vOffset: 0, // canvaså‚ç›´åç§»  }, mobile: { show: true, // æ˜¯å¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤º  scale: 1, // ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç¼©æ”¾  motion: true, // ç§»åŠ¨è®¾å¤‡æ˜¯å¦å¼€å¯é‡åŠ›æ„Ÿåº”  }, react: { opacityDefault: 1, // é»˜è®¤é€æ˜åº¦  opacityOnHover: 1, // é¼ æ ‡ç§»ä¸Šé€æ˜åº¦  }, }); \u0026lt;/script\u0026gt;   æ–¹æ³•2: ç›´æ¥åœ¨config.tomlé‡Œé¢å¼•å…¥jsæ–‡ä»¶ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶config.tomlï¼Œæ·»åŠ ï¼š\n1 2 3 4 5 6 7  # ç¬¬ä¸‰æ–¹åº“é…ç½® [params.page.library] [params.page.library.css] [params.page.library.js] live2d-widget1 = \u0026#34;https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js\u0026#34; live2d-widget2 = \u0026#34;https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.0.min.js\u0026#34; live2d-config = \u0026#34;/js/live2d_config.js\u0026#34;   ç„¶åæ–°å»º/static/js/live2d_config.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  L2Dwidget.init({ model: { scale: 1, hHeadPos: 0.5, vHeadPos: 0.618, jsonPath: \u0026#39;https://cdn.jsdelivr.net/gh/DomathID/live2d-model@main/Miku/miku.model.json\u0026#39;, // xxx.model.json çš„è·¯å¾„,æ¢äººç‰©ä¿®æ”¹è¿™ä¸ª  }, display: { superSample: 9, // è¶…é‡‡æ ·ç­‰çº§ï¼Œç›¸å½“äºæ¸…æ™°åº¦ï¼Œæ•°å€¼è¶Šé«˜è¶Šæ¸…æ™°  width: 300, // canvasçš„å®½åº¦  height: 400, // canvasçš„é«˜åº¦  position: \u0026#39;left\u0026#39;, // æ˜¾ç¤ºä½ç½®ï¼šå·¦æˆ–å³  hOffset: 0, // canvasæ°´å¹³åç§»ï¼Œæ­£æ–¹å‘ä¸ºå³  vOffset: 0, // canvaså‚ç›´åç§»  }, mobile: { show: true, // æ˜¯å¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤º  scale: 1, // ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç¼©æ”¾  motion: true, // ç§»åŠ¨è®¾å¤‡æ˜¯å¦å¼€å¯é‡åŠ›æ„Ÿåº”  }, react: { opacityDefault: 1, // é»˜è®¤é€æ˜åº¦  opacityOnHover: 1, // é¼ æ ‡ç§»ä¸Šé€æ˜åº¦  }, });   é…ç½®Walineè¯„è®º Waline è¯„è®ºç³»ç»Ÿçš„ä»‹ç»ä¸åŸºç¡€é…ç½®  æŒ‰ç…§Walineå®˜æ–¹æ–‡æ¡£å¿«é€Ÿå¼€å§‹ã€‚\nç¬¬ä¸€æ­¥æ¨èä½¿ç”¨ LeanCloud å›½é™…ç‰ˆï¼Œå› ä¸ºå›½å†…ç‰ˆè¿˜éœ€è¦å’Œå¤‡æ¡ˆçš„åŸŸåç»‘å®šï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚ç¬¬äºŒæ­¥åˆ©ç”¨Verceléƒ¨ç½²Walineï¼Œç‚¹å‡»å®˜æ–¹ç»™å‡ºçš„å¿«é€Ÿéƒ¨ç½²é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªdeployè“è‰²æŒ‰é’®ï¼Œç„¶åæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ç»§ç»­éƒ¨ç½²ï¼Œç›´åˆ°ä½ è·å¾—ServerURLï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯åœ°å€ã€‚\nåœ¨/layouts/partials/components/comments.htmlä¸­æ·»åŠ ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9  {{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment \u0026#34;production\u0026#34;) }} {{ if or (in .Site.Params.mainSections .Section) .Params.comments }} + {{ if .Site.Params.enableWaline }} + \u0026lt;div id=\u0026#34;waline\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; + {{ end }} {{ end }} {{ end }}   åœ¨/layouts/layouts/third-party/script.htmlä¸­æ·»åŠ ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9  {{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment \u0026#34;production\u0026#34;) }} {{ if or (in .Site.Params.mainSections .Section) .Params.comments }} + {{ if .Site.Params.enableWaline }} + {{ partial \u0026#34;third-party/waline.html\u0026#34; . }} + {{ end }} {{ end }} {{ end }}   åœ¨/layouts/layouts/third-partyä¸­æ–°å»ºwaline.htmlï¼Œæ·»åŠ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  \u0026lt;script\u0026gt; function loadComments() { if (typeof Waline === \u0026#39;undefined\u0026#39;) { var getScript = (options) =\u0026gt; { var script = document.createElement(\u0026#39;script\u0026#39;); script.defer = true; script.crossOrigin = \u0026#39;anonymous\u0026#39;; Object.keys(options).forEach((key) =\u0026gt; { script[key] = options[key]; }); document.body.appendChild(script); }; getScript({ src: \u0026#39;https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js\u0026#39;, onload: () =\u0026gt; { newWaline(); } }); } else { newWaline(); } } function newWaline() { new Waline({ el: \u0026#39;#waline\u0026#39;, serverURL: \u0026#39;{{ .Site.Params.walineServerURL }}\u0026#39;, placeholder: \u0026#39;{{ .Site.Params.walinePlaceholder }}\u0026#39;, avatar: \u0026#39;{{ .Site.Params.walineAvatar }}\u0026#39;, meta: {{ .Site.Params.walineMeta }}, pageSize: {{ .Site.Params.walinePageSize }}, lang: \u0026#39;{{ .Site.Params.walineLang }}\u0026#39;, highlight: {{ .Site.Params.walineHighlight }}, avatarCDN: \u0026#39;{{ .Site.Params.walineAvatarCDN }}\u0026#39;, requiredFields: {{ .Site.Params.walineRequiredFields }} }); } \u0026lt;/script\u0026gt;   åœ¨åšå®¢é…ç½®æ–‡ä»¶config.tomlä¸­æ·»åŠ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12  ## Waline enableWaline = true walineServerURL = \u0026#34;\u0026#34; walinePlaceholder = \u0026#34;è¯·å¡«å†™æ­£ç¡®çš„æ˜µç§°å’Œé‚®ç®±ï¼Œæ–¹ä¾¿æ¥æ”¶è¯„è®ºå›å¤ä¿¡æ¯å“¦ã€‚\u0026#34; #ç•™è¨€æ¡†å ä½æç¤ºæ–‡å­— walineAvatar = \u0026#34;mp\u0026#34; walineMeta = [\u0026#34;nick\u0026#34;, \u0026#34;mail\u0026#34;, \u0026#34;link\u0026#34;] walinePageSize = 10 walineLang = \u0026#34;zh-CN\u0026#34; walineHighlight = true walineAvatarCDN = \u0026#34;https://cdn.v2ex.com/gravatar/\u0026#34; walineRequiredFields = [\u0026#34;nick\u0026#34;, \u0026#34;mail\u0026#34;] # è¯´æ˜ï¼šhttps://waline.js.org/   é‚®ä»¶é€šçŸ¥ä¸åç»­é­”æ”¹è¯·è§Hugo | ä¸ºZzoä¸»é¢˜æ·»åŠ Walineè¯„è®ºã€‚\nç‰¹åˆ«é¸£è°¢  Hugo ä¸»é¢˜ MemE æ–‡æ¡£   MemEä¸»é¢˜çš„å®˜æ–¹æ–‡æ¡£\n  Guan Qiruiçš„ä¸ªäººåšå®¢æºä»£ç    config.tomlå¯ä¾›å‚è€ƒ\n  Guan Qiruiçš„ä¸ªäººåšå®¢ï¼šè·æˆŸç‹¬å½·å¾¨   å»ºç«™ç¬”è®°ï¼ŒåŒ…æ‹¬Walineè¯„è®ºã€çŸ­ä»£ç ã€ä»Šæ—¥è¯—è¯ç­‰\n  å¤©æ¶¯å…±æ­¤æ—¶çš„memeä¸»é¢˜ä¼˜åŒ–   config.tomlè§£è¯»ä»¥åŠç½‘ç»œå­—ä½“å¦‚ä½•æ·»åŠ \n  Hugo theme stackä¸»é¢˜ æ­£ç¡®çš„é­”æ”¹æ–¹å¼   stackä¸»é¢˜çš„é­”æ”¹æ•™ç¨‹ï¼Œå‚è€ƒäº†åŠ è½½è¿›åº¦æ¡\n  Mogeko\u0026rsquo;s Blog   å‚è€ƒäº†çŸ­ä»£ç é…ç½®\n ","description":"","id":15,"section":"posts","tags":["Hugo","Waline","HTML"],"title":"Hugo | è®°å½•MemEä¸»é¢˜ç¾åŒ–è¿‡ç¨‹","uri":"http://blog.tantalum.life/posts/meme-theme-modify/"},{"content":"ä»¿ç”Ÿäººä¼šæ¢¦åˆ°reCAPTCHAå—ï¼Ÿ  èººå¹³è€…å®£è¨€\nç¦æŠ¥å°†è‡³ï¼Œæˆ‘ä»ä»Šå¼€å§‹èººå¹³ï¼Œè‡³æ­»æ–¹ä¼‘ã€‚æˆ‘å°†ä¸ç»“å©šï¼Œä¸ä¹°æˆ¿ï¼Œä¸ç”Ÿå­ã€‚æˆ‘å°†ä¸ä¹°åŒ…åŒ…ï¼Œä¸æˆ´åè¡¨ã€‚æˆ‘å°†æ¸¸æ‰‹å¥½é—²ï¼Œåšä¸€å¤©é˜”ä»¥ç©ä¸‰å¤©ã€‚æˆ‘æ˜¯å·¥ä½ä¸Šçš„æ‘¸é±¼ä»”ï¼ŒåŸå¸‚ä¸­çš„æµæµªæ±‰ï¼Œæ˜¯æŠµå¾¡æ¶ˆè´¹ä¸»ä¹‰çš„é’å‰‘ï¼Œåˆ’ç ´å†…å·é˜´å½±çš„å…‰çº¿ï¼Œæ˜¯ç°ä»£ç—…çš„è¯åˆ°ç—…é™¤ï¼Œæ˜¯å­˜åœ¨ä¸ä¸å­˜åœ¨ä¹‹ä¸‡ç‰©çš„å°ºåº¦ã€‚æˆ‘å°†æ‡’æ•£ä¸æ‚ é—²çŒ®ç»™èººå¹³äººï¼Œä»Šæ—¥å¦‚æ­¤ï¼Œæ—¥æ—¥çš†ç„¶ã€‚â€\n ä½ å¥½è¿™ä½äººç±»ï¼Œæˆ‘æ˜¯æ–°ä¸–çºªæ‘¸é±¼æˆ˜å£«Roelxyï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„æŠ€æœ¯åšå®¢ã€‚ä½œä¸ºè¶…é«˜æ ¡çº§çš„é¸½ç‹ï¼Œæˆ‘çš„æ‹¿æ‰‹æŠ€èƒ½æ˜¯å’•å’•å’•...   .spoiler { color: black; background-color: black; } .spoiler:hover { color: white; }  çˆ±å¥½æ˜¯åšä¸€åå–„è‰¯çš„äººç±»ï¼Œæ•´å¤©å¹»æƒ³äººç±»ç­ç»ä»¥æ­¤èƒ½ç»ˆç”Ÿèººå¹³ï¼Œå¹³æ—¶ä¼šç ”ç©¶ç¥ç§˜å­¦ï¼Œæœ€è¿‘åœ¨ç ”ç©¶å¡”ç½—å’Œåˆ©è¯ºæ›¼ï¼Œçœ‹å·¥å£ä½œå“æ—¶ä¼šè¶…é€Ÿçˆ¬å¢™ã€‚åŒæ—¶é™„ä¸Šæˆ‘çš„è—ä¹¦é˜ï¼Œæˆ‘çš„èƒ¡ä¹±éšç¬”å’Œå–œæ¬¢çš„ä½œå“å­˜æ¡£éƒ½åœ¨é‚£é‡Œã€‚\næœ¬ç«™ç›®å‰ä½¿ç”¨çš„ä¸»é¢˜æ˜¯Zzoï¼Œä½¿ç”¨Hugoè¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¯„è®ºåŠŸèƒ½åŸºäºWalineã€‚\nå¦‚æœæ‚¨æƒ³è”ç³»æˆ‘ï¼Œåšå®¢çš„è¯„è®ºç³»ç»Ÿæœ‰é‚®ä»¶é€šçŸ¥åŠŸèƒ½ï¼Œå³ä½¿åœ¨æ¸¸å®¢çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥å‘å¸ƒè¯„è®ºï¼Œé™¤éå¡«å†™äº†é”™è¯¯çš„é‚®ç®±ï¼Œå¦åˆ™æ‚¨ä¸ä¼šé”™è¿‡ä»»ä½•è¯„è®ºé€šçŸ¥ã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨é¡µè„šä¸­æ‰¾åˆ°æˆ‘çš„é‚®ç®±å’ŒTelegramå¸å·ã€‚å¦‚æœæ‚¨ä¹Ÿæ˜¯è”é‚¦å®‡å®™(fedi)å‹é‚»çš„è¯ï¼Œæ¬¢è¿æ¥å…³æ³¨æˆ‘çš„Mastodonã€‚\né‚£ä¹ˆï¼Œç¥æ‚¨æ—…é€”æ„‰å¿«ï¼\n","description":"","id":16,"section":"","tags":null,"title":"About","uri":"http://blog.tantalum.life/about/"},{"content":"ä¸€äº›ç¢ç¢å¿µ æ­å»ºè‡ªå·±çš„é™æ€åšå®¢è¿™ä»¶äº‹ï¼Œå¯¹æˆ‘æœ¬äººæ¥è¯´è¿˜æ²¡æœ‰ä»€ä¹ˆçœŸå®æ„Ÿã€‚ä¸è¿‡æ—¢ç„¶éƒ½å·²ç»ä¸ºäº†å»ºç«™æ£é¼“äº†åŸŸåå’ŒæœåŠ¡å™¨ï¼Œé‚£å¤šä¸€ä¸ªblogï¼ˆä¸ªäººç½‘ç«™ï¼‰ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥é¢„æ–™åˆ°çš„äº‹ï¼Œæ›´ä½•å†µä¸æ˜¯éƒ¨ç½²åœ¨æœåŠ¡å™¨å†…çš„åŠ¨æ€åšå®¢ï¼Œè€Œæ˜¯åªéœ€è¦ä¸€å°æ™®é€šç”µè„‘å°±èƒ½æå®šçš„é™æ€åšå®¢ã€‚\nä¸è¿‡æœ¬é¸½ç‹ä¹‹å‰æ‰“ç®—ç”¨å‹é‚»æ­å»ºçš„pleromaå®ä¾‹å†™blogï¼Œç†ç”±æ˜¯æ”¯æŒæˆ‘æœ€çˆ±çš„BBCodeï¼Œå½“ç„¶è¿˜æœ‰markdownå’ŒHTMLã€‚ç¼ºç‚¹æ˜¯æ²¡æœ‰ä¸»é¡µæ¨èå’Œæœç´¢åŠŸèƒ½ï¼Œå…¨é æˆ‘ç½®é¡¶å˜Ÿæ–‡é‚£ç°å®å—ï¼åæ¥æˆ‘å‘ç°äº†Writefreelyï¼Œå‡­å€Ÿç€ç®€å•çš„äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…æ–¹å¼å’Œç®€çº¦çš„ç™½çº¸é»‘å­—è§†è§‰ä½“éªŒï¼Œæˆ‘ç«é€Ÿåœ¨æœåŠ¡å™¨é‡Œæ­å»ºäº†ä¸ªç«™ï¼Œç»“æœæ‚²å‰§åœ°å‘ç°â€”â€”è¿™è´§ä¸æ”¯æŒBBCodeï¼Œä½†èƒœåœ¨å¤ªç®€å•äº†ï¼Œç®€å•åˆ°æ— éœ€dockerå®‰è£…ï¼Œäºæ˜¯è¢«æˆ‘å‹ç®±åº•äº†ï¼ˆã€‚\nåæ¥ï¼Ÿå…¶å®å½“æ—¶åªæ˜¯æƒ³åšä¸€ä¸ªé™æ€ç½‘é¡µçš„ï¼Œè¿ä¸»é¢˜éƒ½ä¸éœ€è¦çš„å±…ä¸­æ˜¾ç¤ºçš„ç½‘é¡µï¼Œä½†æ˜¯Googleä¸€ä¸‹å‘ç°å¥½å¤šç”¨çš„éƒ½æ˜¯wordpressåŠ¨æ€åšå®¢ï¼ˆè¿åœ¨è‡ªå·±åšå®¢é‡ŒåŠ å–œæ¬¢çš„è„šæœ¬éƒ½è¦ä»˜è´¹å—é­‚æ·¡ï¼‰ï¼Œåˆæˆ–æ˜¯è£…å¥½å¤šä¾èµ–çš„é™æ€åšå®¢ã€‚ä½œä¸ºä¸€ä¸ªå¸¸å¹´èººå¹³äººå£«è¿™æ˜¾ç„¶ä¸åˆé€‚ï¼ˆå–‚ï¼‰ï¼Œäºæ˜¯æˆ‘ç»ˆäºæ‰¾åˆ°äº†ä¸å®Œå…¨ä¾èµ–æœ¬åœ°åˆèƒ½è½»æ¾ä¿®æ”¹é…ç½®çš„åšå®¢æ­å»ºæ–¹å¼ï¼šHugoé™æ€ç½‘é¡µæ¸²æŸ“+Vercelç½‘é¡µæ‰˜ç®¡è‡ªåŠ¨éƒ¨ç½²+Githubä»£ç æ‰˜ç®¡ï¼Œä¸»é¢˜æˆªæ­¢ç›®å‰æ•²å®šäº†MemEï¼Œå¯èƒ½ä»¥åä¼šæ”¹ï¼Œæ¯•ç«Ÿæˆ‘è¿csså…¨ç§°æ˜¯ä»€ä¹ˆéƒ½ä¸çŸ¥é“XDD\u0026hellip;\n2021/11/14æ›´æ–°ï¼š\næœ¬ç«™ç›®å‰ä¸»é¢˜ä½¿ç”¨Zzo å˜›ï¼Œæ€»è€Œè¨€ä¹‹æˆ‘blogå°±æ˜¯è¿™æ ·åœ¨æœºç¼˜å·§åˆä¹‹ä¸‹è¯ç”Ÿäº†ï¼Œéš¾é“ä¸å€¼å¾—ãŠã‚ã§ã¨ã†ä¸€ä¸‹å—ï¼\nè¿™æ¬¡ä¸ä¼šä¹Ÿå‹ç®±åº•å§ å¤§æ¦‚\u0026hellip;ä¸ä¼šçš„ï¼Œä¸è¿‡æˆ‘åœ¨å†°æ°´æ··åˆç‰©çš„è¿™ç¯‡åšå®¢é‡Œå‘ç°äº†Typechoï¼Œå¦‚æœæœ‰æœºä¼šçš„è¯æˆ‘å¯èƒ½è¦å°è¯•ä¸€ä¸‹ç”¨è¿™ä¸ªæ­å»ºåŠ¨æ€åšå®¢ï¼Œåˆ°æ—¶å€™å¯èƒ½ä¼šé€‰æ‹©æ€§æ‹†è¿ä¸€ä¸ªåšå®¢ã€‚æ‰€ä»¥\u0026hellip;ç»“æœè°çŸ¥é“å‘¢ã€‚\nWritefreelyé‚£è¾¹æˆ‘ç”¨æ¥å‘é•¿æ¯›è±¡è¿ç»´æ•™ç¨‹äº†ï¼Œè¿™è¾¹çš„è¯ç›®æµ‹ä¼šå‘æ›´å¤šå¥‡å¥‡æ€ªæ€ªçš„ä¸œè¥¿ï¼ˆï¼Ÿï¼‰åæ­£ä¹Ÿä¸ä¼šæœ‰äººçœ‹ï¼Œåƒä¸‡ä¸è¦æœŸå¾…å°±æ²¡é—®é¢˜äº†ï¼\nç‰¹åˆ«é¸£è°¢ çš®å¡”ä¸˜ï¼ˆ @Hydrangea@o3o.caï¼‰çš„Hugoç®€æ˜æ­å»ºç¬”è®°\n","description":"","id":17,"section":"posts","tags":["Hugo","Vercel"],"title":"Hugo | é™æ€åšå®¢æ­å»ºæœ‰æ„Ÿ","uri":"http://blog.tantalum.life/posts/after-building-a-static-blog/"},{"content":" æ³¨ï¼šæœ¬æ–‡å†™ä½œç›®çš„ä¸ºè®°å½•æ‰€çŸ¥æ‰€å­¦ï¼Œå¹¶å‘æ‰‹æŠŠæ‰‹æŒ‡å¯¼æˆ‘çš„å…”å­å¤§ä½¬ï¼ˆ @star@b612.me ï¼‰è‡´æ•¬ã€‚æœ¬æ•™ç¨‹å¦‚æœ‰å¸®åˆ°è¯»è€…äº¦æ„Ÿè£å¹¸ã€‚\n ä»¥ä¸‹æ“ä½œé»˜è®¤å‡åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œã€‚\nrootç”¨æˆ·:sudo -i\nä¸€äº›å¯ä»¥å‚è€ƒçš„æ•™ç¨‹   saltç«™é•¿çš„é•¿æ¯›è±¡ï¼ˆMastodonï¼‰ç¤¾åŒºæ­å»ºè¯¦è§£ï¼Œédockerå°ç™½å‘å»ºç«™æŒ‡å—ï¼Œæœ¬æ•™ç¨‹æœ‰éƒ¨åˆ†å‚è€ƒã€‚\n  pullopenç«™é•¿è¿›é˜¶é­”æ”¹ï¼šä¿®æ”¹å­—æ•°ä¸Šé™ã€åª’ä½“ä¸Šé™ã€æŠ•ç¥¨ä¸Šé™ã€æ·»åŠ è‡ªå®šä¹‰ä¸»é¢˜ã€ç•Œé¢ç”¨è¯­ã€éç™»é™†ç”¨æˆ·æœ‰é™æ˜¾ç¤ºï¼Œé™„é˜»æ­¢æœ¬ç«™å˜Ÿæ–‡æµå…¥æŸç«™ç‚¹æ–¹æ³•ã€‚\n  pullopenç«™é•¿å¦‚ä½•åˆ©ç”¨Dockeræ­å»ºMastodonå®ä¾‹ï¼ˆäºŒï¼‰ï¼šè¿›é˜¶é­”æ”¹ç¯‡ã€‚\n  é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ å¦‚ä½•ç¡®å®šä½ çš„é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹å‘¢ï¼Ÿ\nfind / -name docker-compose.yml #å¯»æ‰¾åä¸ºdocker-compose.ymlçš„æ–‡ä»¶æ‰€åœ¨ä½ç½® åœ¨è¿”å›ç»“æœä¸­æ‰¾åˆ°çœ‹èµ·æ¥æœ€é è°±çš„é‚£ä¸ªä½ç½®ï¼Œç„¶å\ncd /your/own/path #/your/own/pathä¸ºåˆšåˆšè¿”å›ç»“æœä¸­çš„ä½ç½®ï¼Œæ¯”å¦‚cd /opt/mastodon è¿™æ ·å°±å¯ä»¥è¿›å…¥ä½ çš„é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ã€‚\nåœ¨é…ç½®æ–‡ä»¶å¤¹ä¸­è¿è¡Œï¼š\ndocker-compose exec web /bin/bash ç„¶åå†docker ps ä½ å°±èƒ½çœ‹åˆ°mastodonçš„æœåŠ¡äº†ã€‚\nåŸºç¡€è¿ç»´ æœ‰å¸®åŠ©çš„å‘½ä»¤ï¼š docker-compose run --rm web bin/tootctl å…·ä½“å‘½ä»¤ #è¿è¡Œmastodon tootctlå‘½ä»¤ï¼Œæ¯”å¦‚docker-compose run --rm web bin/tootctl cache clear docker-compose run --rm web bin/tootctl reload #é‡å¯é•¿æ¯›è±¡ cd /opt/mastodon #è·³è½¬è‡³é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ï¼Œæ­¤åæ•™ç¨‹å‡ä»¥æ­¤æ–‡ä»¶ä½ç½®ä¸ºä¾‹ find / -name filename #å¯»æ‰¾åä¸ºfilenameçš„æ–‡ä»¶ which filename #å¯»æ‰¾å®é™…æ‰§è¡Œå‘½ä»¤çš„æ–‡ä»¶ ls -a filepath #åˆ—å‡ºfilepathæ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ apt update \u0026amp;\u0026amp; apt install wget rsync python git curl vim git ufw -y #å®‰è£…ä¸€äº›å¸¸ç”¨å‘½ä»¤ éœ€è¦ç†Ÿæ‚‰ä½ç½®å’Œåç§°çš„é…ç½®æ–‡ä»¶ cd /opt/mastodon #è¿›å…¥é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ nano .env.production #é•¿æ¯›è±¡é…ç½®æ–‡ä»¶çš„ä¿®æ”¹æ–¹æ³• è€Œåœ¨édockerä¸­ï¼Œæ­¤æ–‡ä»¶çš„ä¿®æ”¹æ–¹æ³•å¦‚ä¸‹ã€‚\ncd /home/mastodon/live #è¿›å…¥é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ nano .env.production #é•¿æ¯›è±¡é…ç½®æ–‡ä»¶çš„ä¿®æ”¹æ–¹æ³• nano ç¼–è¾‘å™¨ ä¸ºäº†å®šä½ä¸€ä¸ª2800è¡Œçš„é…ç½®æ–‡ä»¶ä¸­çš„ç¬¬711è¡Œï¼Œæˆ‘æ‰¾åˆ°äº†å¿«å»å®šä½è¡Œæ•°çš„å‘½ä»¤nano +number filenameå³å¯è·³è½¬åˆ°æŒ‡å®šè¡Œæ•°ï¼Œä¾‹å¦‚ï¼šnano +711 blabla.ymlã€‚\nå¦‚æœæƒ³æŒä¹…åŒ–åœ°åœ¨nanoç¼–è¾‘å™¨çš„æœ€å·¦è¾¹çœ‹åˆ°è¡Œæ•°ï¼Œå¯ä»¥ï¼š\nnano ~/.nanorc #nanoé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸å­˜åœ¨ set constantshow #ä½¿å±å¹•åº•éƒ¨çš„çŠ¶æ€æ¡†æ°¸ä¹…æ˜¾ç¤º set linenumbers #ç¼–è¾‘æ–‡ä»¶æ—¶è¡Œæ•°ä¼šä¸€ç›´å‡ºç°åœ¨å±å¹•å·¦è¾¹ ç„¶åctrl+xé€€å‡ºä¿å­˜å³å¯ã€‚\nDocker æ˜¯ä»€ä¹ˆï¼Ÿ   ç®€ä¾¿çš„ç†è§£ï¼š  æŠŠdockerå½“ä½œä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç›¸å½“äºä½ çš„mastodonè·‘åœ¨ä½ ç°åœ¨vpsçš„è™šæ‹Ÿæœºé‡Œé¢ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨vpsçš„ç”¨æˆ·ä¸‹æ‰§è¡Œtootctlå‘½ä»¤ã€‚è¿›å…¥åˆ°è¿™ä¸ªâ€œè™šæ‹Ÿæœºâ€é‡Œé¢å¯ä»¥åœ¨docker-compose.ymlæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹è¿è¡Œï¼šdocker-compose exec web /bin/bashï¼‰ã€‚   æŠ¥é”™ï¼Ÿ å¦‚æœåœ¨é•¿æ¯›è±¡é…ç½®æ–‡ä»¶å¤¹ä¸‹è¿è¡Œdocker-compose exec web /bin/bashå‘½ä»¤æ—¶å‡ºç°äº†ä»¥ä¸‹é”™è¯¯ï¼š\nå¯èƒ½æ˜¯å› ä¸ºPythonä¾èµ–æ²¡è£…å…¨ï¼Œè¿è¡Œpip install ordered_dictå®‰è£…ä¾èµ–ã€‚\nå¦‚æœå®‰è£…pythonä¾èµ–ä¹Ÿæ ‡çº¢ï¼Œè¿”å›é”™è¯¯ç»“æœï¼š\nCould not find a version that satisfies the requirement ordered_dict (from versions: ) No matching distribution found for ordered_dict è¿™ç§æƒ…å†µå¯èƒ½éœ€è¦é‡è£…ä¸€ä¸‹docker-composeï¼š\nwhich docker-compose #æ‰¾åˆ°docker-composeçš„å®‰è£…ä½ç½®ï¼Œä¾‹å¦‚/usr/bin rm -rf /usr/bin/docker-compose #ä»¥/usr/bin ä¸ºä¾‹ï¼Œrmé€’å½’åˆ é™¤æ­¤æ–‡ä»¶ ç„¶åå†æŒ‰ç…§dockerå®˜ç½‘çš„Linuxå®‰è£…æ–¹å¼é‡è£…docker-composeï¼š\nä¹‹åå¯ä»¥æ­£å¸¸çœ‹åˆ°ï¼Œdocker-compose run --rm web bin/tootctlèƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œç”±äºæˆ‘ä»¬å¹¶æ²¡æœ‰è¿è¡Œå®˜æ–¹æ–‡æ¡£tootctlå‘½ä»¤é›†ä¸­çš„ä»»ä½•å‘½ä»¤ï¼Œå› æ­¤ctrl+cé€€å‡ºå³å¯ã€‚\næƒ³è¦å‡çº§æ€ä¹ˆåŠ æ‹‰å–é•œåƒï¼ˆimagesï¼‰  Dockeræ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä½ çš„mastodonè¿è¡Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œçš„ä¸€ä¸ªé•œåƒå½“ä¸­ã€‚å¦‚æœåœ¨æ­å»ºæœåŠ¡å™¨ä¹‹åˆä½ æ˜¯è‡ªå·±æ¥éƒ¨ç½²mastodonçš„è¯ï¼Œä½ åº”è¯¥çŸ¥é“ä½ æ‹‰å–ï¼ˆpullï¼‰çš„æ˜¯å“ªä¸ªé•œåƒã€‚\nå¦‚æœä½ æƒ³è¦æ‹‰å–ï¼ˆpullï¼‰ä¸€ä¸ªç‰¹å®šçš„é•œåƒï¼ˆæ¯”å¦‚ä½ æƒ³ç…§æŠ„ä¸€ä¸ªä½¿ç”¨dockeréƒ¨ç½²ç«™ç‚¹çš„å¤§ä½¬çš„é…ç½®ï¼‰ï¼Œä»¥å®˜æ–¹æœ€æ–°ç‰ˆé•œåƒä¸ºä¾‹ï¼Œé”®å…¥ï¼š\ndocker pull tootsuite/mastodon:latest #docker pull Dockerhubç”¨æˆ·å/é•œåƒå:tagå ç‰‡åˆ»åå³å¯äº«å—ä»–äººçš„åŠ³åŠ¨æˆæœï¼ˆï¼Ÿï¼‰\nç‰ˆæœ¬å‡çº§ é¦–å…ˆæŸ¥çœ‹ä½ çš„ç«™ç‚¹ä½¿ç”¨çš„æ˜¯å“ªä¸ªé•œåƒã€‚\n cd /opt/mastodon #è·³è½¬è‡³ç›®æ ‡æ–‡ä»¶å¤¹ nano docker-compose.yml #ä¿®æ”¹æ­¤æ–‡ä»¶æŸ¥çœ‹é•œåƒ ç•™æ„webã€streamingå’Œsidekiqä¸‰é¡¹çš„imageå³ä¸ºä½ ä½¿ç”¨çš„é•œåƒã€‚\nå¦‚æœæ²¡æœ‰è¿›è¡Œè¿‡ä»»ä½•é­”æ”¹ï¼Œè€Œä½¿ç”¨çš„æ˜¯å®˜æ–¹é•œåƒçš„è¯ï¼Œæ­¤ä¸‰é¡¹åº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹ï¼š\nweb: image: tootsuite/mastodon:latest streaming: image: tootsuite/mastodon:latest sidekiq: image: tootsuite/mastodon:latest #æ ¼å¼ä¸ºimage: Dockerhubç”¨æˆ·å/é•œåƒåï¼štagåã€‚tagåå¯ä»¥æ˜¯æŸä¸ªå…·ä½“çš„ç‰ˆæœ¬å·ä¹Ÿå¯ä»¥æ˜¯latestã€‚å¦‚æœä¸æ˜¯ä½¿ç”¨å®˜æ–¹é•œåƒçš„è¯å½“ç„¶ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–ï¼Œåé¢ä¼šè®²åˆ°ã€‚ å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯å®˜æ–¹é•œåƒæ—§ç‰ˆæœ¬ï¼ˆå®˜æ–¹çš„dockerhubç”¨æˆ·åä¸ºtootsuiteï¼‰ï¼Œå‡çº§åªéœ€è¦æŠŠweb,streaming,sidekiqä¸‰ä¸ªé•œåƒçš„tagåæ”¹ä¸ºè¿™ä¸€é¡µtagä¸­å‘å¸ƒçš„æœ€æ–°ç‰ˆæœ¬/latestå³å¯ã€‚\nå¦‚æœä½ ä½¿ç”¨çš„ä¸æ˜¯tootsuiteå‘å¸ƒçš„é•œåƒï¼Œè€Œæ˜¯åˆ«çš„ç”¨æˆ·å‘å¸ƒçš„ï¼Œæˆ–æ˜¯ä½ æƒ³ç…§æŠ„åˆ«äººçš„é…ç½®ï¼Œä½ å¯ä»¥é€‰æ‹©åƒä¸Šé¢çš„æ“ä½œä¸€æ ·æ‹‰å®˜æ–¹é•œåƒçš„æœ€æ–°ç‰ˆæœ¬(ä¸€èˆ¬æƒ…å†µä¸‹ç«™ç‚¹æ²¡æœ‰è¢«å¤§é‡é­”æ”¹è¿‡éƒ½å¯ä»¥)ï¼Œä¹Ÿå¯ä»¥å»Dockerhubå®˜ç½‘æœç´¢ä½ ä½¿ç”¨çš„dockerhubç”¨æˆ·å/é•œåƒåæŸ¥çœ‹æœ€æ–°å‘å¸ƒçš„tagï¼Œç„¶åæŠŠdocker-compose.ymlä¸­ä¸Šè¿°æ‰€è¯´ä¸‰é¡¹æœåŠ¡çš„imageçš„tagåæ”¹ä¸ºé‚£ä¸ªæœ€æ–°å‘å¸ƒçš„tagåï¼Œä¿å­˜ã€‚\nå‡¡æ›´æ”¹è¿‡docker-compose.ymlæ–‡ä»¶ï¼Œæ“ä½œåéœ€è¦é‡å¯docker-composeæ‰èƒ½é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¹¶æ‹‰å–é•œåƒã€‚\ncd /opt/mastodon #åŠ¡å¿…ç¡®ä¿åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œé‡å¯æ“ä½œï¼Œå¦åˆ™ä¼šå½±å“ç³»ç»Ÿå†…å…¶ä»–ä½¿ç”¨docker-composeéƒ¨ç½²çš„æœåŠ¡ï¼ˆå¦‚æœæœ‰ï¼‰ docker-compose up -d #é‡å¯ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨docker-composeéƒ¨ç½²çš„æœåŠ¡ æ•°æ®åº“é€‚åº” ç«™ç‚¹å‡çº§åå¯èƒ½ä¼šé‡åˆ°åˆ·å˜Ÿæ—¶æç¤ºç½‘ç»œé”™è¯¯500çš„æŠ¥é”™ï¼Œè™½ç„¶å¹¶ä¸å½±å“çœŸå®çš„ä½¿ç”¨ä½“éªŒã€‚æ­¤æ—¶éœ€è¦è¿è¡Œï¼š\ncd /opt/mastodon docker-compose run --rm web rails db:migrate æ¯æ¬¡æ›´æ”¹é•œåƒä¹‹åéƒ½å¯ä»¥è¿è¡Œæ­¤å‘½ä»¤ä½¿æ•°æ®åº“é€‚åº”æ¯›è±¡ç‰ˆæœ¬ã€‚å¦‚æœé¢‘ç¹æç¤ºæ­¤æŠ¥é”™ï¼Œå¯ä»¥å°è¯•å‡çº§æ•°æ®åº“ç‰ˆæœ¬ï¼Œæ¯”å¦‚ä»Postgres 9.6å‡çº§è‡³Postgres 12.5ï¼Œå‚è€ƒå¦‚ä½•å‡çº§Postgresæ•°æ®åº“ã€‚\nä¸ºäº†é˜²æ­¢è¿è¡Œmigrateå‘½ä»¤åç¿»è½¦ï¼Œè¯·åŠ¡å¿…ç¡®è®¤åšå¥½æ•°æ®åº“å¤‡ä»½ï¼\nä¸€ç‚¹CSSé­”æ”¹ 2021/11/30æ›´æ–°ï¼š\nä¸€äº›CSSæ ·å¼ é€‰ä¸­æ–‡æœ¬é¢œè‰²ä¸èƒŒæ™¯è‰² å‰å‡ å¤©çš®å¡”ä¸˜é—®æˆ‘çš„åšå®¢é‡Œé€‰ä¸­æ–‡æœ¬é¢œè‰²ä¸èƒŒæ™¯è‰²æ˜¯æ€æ ·æ”¹åŠ¨çš„ã€‚è™½ç„¶æ˜¯è¿™ä¸ªåŠŸèƒ½æ˜¯åšå®¢ä¸»é¢˜æä¾›è€Œä¸æ˜¯æˆ‘è‡ªå·±æ”¹çš„ï¼Œä½†è¿˜æ˜¯å­¦ä¹ äº†ä¸€ä¸‹ç›¸å…³çŸ¥è¯†ï¼šä½¿ç”¨css3::selectionå±æ€§ï¼Œè¯¥å±æ€§ç”¨äºåŒ¹é…å…ƒç´ ä¸­è¢«ç”¨æˆ·é€‰ä¸­æˆ–å¤„äºé«˜äº®çŠ¶æ€çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”æ”¯æŒä¿®æ”¹åŒ¹é…å…ƒç´ çš„color, background, cursor,å’Œoutlineå±æ€§ã€‚\n1 2 3 4  ::selection { color: #fff; /*é€‰ä¸­éƒ¨åˆ†å­—ä½“é¢œè‰²*/ background: #088; /*é€‰ä¸­éƒ¨åˆ†èƒŒæ™¯é¢œè‰²*/ }   ç„¶åæˆ‘å‘ç°è¿™ä¸ªåŠŸèƒ½å¯ä»¥åœ¨æ¯›è±¡çš„è‡ªå®šä¹‰cssä¸­ä½¿ç”¨ï¼Œè€Œä¸”ç†è®ºä¸Šæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥ä½¿ç”¨ï¼š\n1 2 3 4 5 6  /** ç®¡ç†â€”ç½‘ç«™è®¾ç½®-è‡ªå®šä¹‰css **/ /*é¼ æ ‡é€‰ä¸­åº•è‰²*/ *::selection { color: #fff; /*ç™½è‰²*/ background-color: #b85798; /*é™ˆç«çº¢*/ }   é¢œè‰²å¯ä»¥è‡ªå·±æ”¹åŠ¨ï¼Œæ”¯æŒåå…­ä½è¿›åˆ¶è‰²å€¼ï¼ˆå…­ä½æ•°ï¼Œæ¯”å¦‚#b85798ï¼‰ï¼Œç½‘é¡µé¢œè‰²ï¼ˆä¸‰ä½æ•°ï¼Œæ¯”å¦‚#088ï¼‰å’Œè‹±æ–‡ä»£ç ï¼ˆæ¯”å¦‚redï¼‰ã€‚\nç»™å‡ºå‡ ä¸ªç½‘ç«™å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼š\n é¢œè‰²å€¼è½¬æ¢ï¼Œå¯å‚è€ƒè‹±æ–‡ä»£ç å’Œå¯¹åº”çš„åå…­è¿›åˆ¶è‰²å€¼ã€‚ é¢œè‰²ç å¯¹ç…§è¡¨ï¼Œæˆ‘æ‰€ç”¨çš„#b85798å°±æ˜¯è¿™ä¸ªç½‘ç«™æ¨èçš„æ¨¡æ‹Ÿå¼é…è‰²é™ˆç«çº¢ã€‚ å›¾ç‰‡å–è‰²ï¼Œä¸Šä¼ æœ¬åœ°å›¾ç‰‡è·å–ä»»æ„è‰²å—çš„è‰²å€¼ã€‚  é¼ æ ‡æ ·å¼ ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› æš‚æ—¶ä¸å¯ç”¨ï¼Œä¸è¿‡ç»™å‡ºcssæºç ï¼Œå‚è€ƒä¸ªäººç½‘ç«™å¦‚ä½•åœ¨CSSä¸­è‡ªå®šä¹‰é¼ æ ‡æ ·å¼ï¼š\n1 2 3 4  /*é¼ æ ‡æŒ‡é’ˆæ ·å¼*/ body{cursor:url(/zb_users/upload/img/pointer.cur),default;} /*é¢„è®¾å…‰æ ‡*/ /*é¼ æ ‡é“¾æ¥æŒ‡é’ˆæ ·å¼*/ a:hover{cursor:url(/zb_users/upload/img/link.cur),pointer;} /*æ‰‹çŠ¶å…‰æ ‡*/   æ³¨æ„é¼ æ ‡æ ·å¼ä¸€èˆ¬ç”¨.curæ ¼å¼çš„ï¼Œæ®è¯´aniæ ¼å¼çš„ä¸èµ·ä½œç”¨ã€‚ä¸è¿‡æˆ‘è¿˜æ²¡æ¥å¾—åŠéªŒè¯ï¼ˆå› ä¸ºcuræ ¼å¼çš„éƒ½æ²¡æˆåŠŸã€‚å¦å¤–å¼•ç”¨çš„urlå€¼å¯ä»¥ä½¿ç”¨cdnä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°ã€‚ä¸è¿‡æ¯›è±¡ç«™ç‚¹çš„è¯ï¼Œdockerå»ºç«™ç”¨æœ¬åœ°èµ„æºä¼¼ä¹æœ‰ç‚¹\u0026hellip;\nDockerçš„é•œåƒé—®é¢˜ è™šæ‚¬é•œåƒä¸é•œåƒçš„åˆ é™¤ å¦‚æœæœ¬åœ°ä¸­å·²ç»æ‹‰å–äº†ä¸€æ¨¡ä¸€æ ·çš„é•œåƒï¼Œå°†ä¸ä¼šé‡å¤æ‹‰å–ã€‚å¦‚æœtagåç›¸åŒä½†é•œåƒæœ‰æ›´æ–°ï¼ˆæ¯”å¦‚tootsuite/mastodon:latestï¼‰ï¼Œåˆ™ä¼šå†æ‹‰å–æœ€æ–°çš„é•œåƒï¼Œå¹¶ä¸”æŠŠåŸé•œåƒçš„tagå‘½åä¸º\u0026lt;none\u0026gt;ï¼Œè¿™ä¸€åˆ‡ä½ éƒ½å¯ä»¥ä½¿ç”¨docker images -aæ¥ç›´è§‚åœ°çœ‹åˆ°ä½ æ‹‰å–äº†å“ªäº›é•œåƒã€‚\n\u0026lt;none\u0026gt;é•œåƒè¢«ç§°ä¸ºè™šæ‚¬é•œåƒï¼Œæ˜¯ä¸å¯ç”¨çš„ï¼Œä½†ä¸ä¸€å®šæœ‰å®³ã€‚è™šæ‚¬é•œåƒçš„äº§ç”ŸåŸå› æœ‰å¾ˆå¤šç§ï¼Œä¸Šé¢åˆšåˆšæåˆ°çš„\u0026quot;ä¸¤æ¬¡æ‹‰å–é•œåƒçš„tagåç›¸åŒä½†é•œåƒæœ¬èº«æœ‰æ›´æ–°\u0026quot;æ˜¯äº§ç”Ÿè™šæ‚¬é•œåƒæœ€å¸¸è§çš„åŸå› ä¹‹ä¸€ã€‚è¿™ç§æ–¹å¼äº§ç”Ÿçš„è™šæ‚¬é•œåƒåªä¼šå æ®å­˜å‚¨ç©ºé—´ï¼Œä¸å¤„ç†å¹¶ä¸ä¼šå±å®³æœåŠ¡å™¨å®‰å…¨ï¼Œæ‰€ä»¥ç®€å•åˆ é™¤å³å¯ã€‚è¿è¡Œï¼š\ndocker images -a #æŸ¥çœ‹dockeræ‹‰å–çš„æ‰€æœ‰é•œåƒå¹¶åˆ—å‡ºåˆ—è¡¨ï¼ŒåŒ…å«è™šæ‚¬é•œåƒ docker rmi imageid #åˆ é™¤é•œåƒidä¸ºimageidçš„é•œåƒï¼Œè¿™é‡Œå¡«è¦åˆ æ‰çš„é•œåƒçš„id å³å¯åˆ é™¤é•œåƒã€‚\næ¸…ç†dockeré•œåƒè„šæœ¬ æ­¤è„šæœ¬æ—¥å¸¸è¿ç»´å¹¶ä¸å¸¸ç”¨ï¼Œä¸æ˜¯ç”¨æ¥æ¸…ç†mastodonè¿œç¨‹åª’ä½“çš„ï¼Œè€Œæ˜¯ç»è¿‡å‡çº§/é­”æ”¹æ“ä½œååˆ æ‰æ—§çš„é•œåƒï¼ˆimagesï¼‰çš„ã€‚æ­¤è„šæœ¬æœ¬èº«ä¸ä¼šè¿è¡Œä»»ä½•å‘½ä»¤ï¼Œè€Œæ˜¯æç¤ºä½ åº”è¯¥è¿è¡Œä»€ä¹ˆå‘½ä»¤ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨ä¸­æ²¡æœ‰docker-clean.shè„šæœ¬ï¼Œé‚£ä¹ˆåœ¨/opt/astodonæ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œvim docker-clean.shï¼Œå°†ä»¥ä¸‹å†…å®¹å†™å…¥å…¶ä¸­ï¼Œç„¶åä¿å­˜ã€‚\n GNU nano 2.9.3 docker-clean.sh #!/bin/bash # remove exited containers: docker ps --filter status=dead --filter status=exited -aq | xargs -r docker rm -v # remove unused images: docker images --no-trunc | grep '\u0026lt;none\u0026gt;' | awk '{ print $3 }' | xargs -r docker rmi # remove unused volumes (needs to be ran as root): find '/var/lib/docker/volumes/' -mindepth 1 -maxdepth 1 -type d | grep -vFf \u0026lt;( docker ps -aq | xargs docker inspect | jq -r '.[]|.Mounts|.[]|.Name|select(.)' ) | xargs -r rm -fr # remove all images without at least one container docker image prune -a å½“æƒ³è¦ä½¿ç”¨æ­¤è„šæœ¬æ—¶ï¼Œè¿è¡Œï¼š\ncat docker-clean.sh ç„¶åæŒ‰ç…§æç¤ºç»“æœè¾“å…¥ç›¸åº”å‘½ä»¤ï¼Œæ¸…ç†è™šæ‚¬é•œåƒ/æ— ç”¨é•œåƒå³å¯ã€‚\nä½¿ç”¨aliasè„šæœ¬ç¼©å†™tootctlå‘½ä»¤ ï¼ˆæ­¤è„šæœ¬ç”±å…”å­å¤§ä½¬ç¼–å†™ï¼‰\nä½¿ç”¨ç®¡ç†å‘½ä»¤è¡Œåœ¨æœåŠ¡å™¨ä¸­è¿›è¡Œç»´æŠ¤éœ€è¦äº†è§£å®˜æ–¹æ–‡æ¡£tootctlå‘½ä»¤é›†ã€‚ä»¥æ‰§è¡Œhelpä¸ºä¾‹ï¼Œå¦‚æœä½¿ç”¨dockerå»ºç«™éœ€è¦è¿è¡Œdocker-compose run --rm web bin/tootctl helpï¼Œå‰ç¼€éå¸¸éº»çƒ¦ï¼Œå¦‚æœèƒ½ç®€åŒ–ä¸ºtootctl helpä¼¼ä¹å°±ç®€å•å¾—å¤šã€‚é‚£ä¹ˆå¦‚ä½•è¿›è¡Œtootctlå‘½ä»¤çš„ç¼©å†™å‘¢ï¼Ÿ\ncd /opt/mastodon #è·³è½¬è‡³ç›®æ ‡æ–‡ä»¶å¤¹ vim tootctl.sh #å°†ä»¥ä¸‹å†…å®¹å†™å…¥/opt/mastodonä¸­å¹¶å‘½åä¸ºtootctl.sh ä»¥ä¸‹ä¸ºè„šæœ¬å†…å®¹ï¼š\n#!/bin/bash lpwd=$PWD mypath=`dirname $0` cd $mypath if [ $# -ge 1 ] then case $1 in \u0026quot;restart\u0026quot;) docker-compose restart ;; \u0026quot;reload\u0026quot;) docker-compose down \u0026amp;\u0026amp; docker-compose up -d ;; \u0026quot;stop\u0026quot;) docker-compose down ;; \u0026quot;start\u0026quot;) docker-compose up -d ;; \u0026quot;psql\u0026quot;) docker-compose exec db $* ;; *) docker-compose run --rm web bin/tootctl $* ;; esac else echo \u0026quot;please use tootctl help for help\u0026quot; fi cd $lpwd ç„¶åæ‰§è¡Œï¼š\nchmod +x /opt/mastodon/tootctl.sh echo \u0026quot;alias tootctl='/opt/mastodon/tootctl.sh' \u0026quot; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc ä¹‹åå°±èƒ½ç”¨tootctlè¿™ä¸ªå‘½ä»¤æ¥è°ƒç”¨tootctlè€Œä¸ç”¨è¾“å…¥ç¹ççš„å‰ç¼€äº†ï¼Œä»è€Œè¾¾åˆ°ç¼©å†™å‘½ä»¤çš„ç›®çš„ã€‚\næœ¬æ•™ç¨‹æ­¤åæ‰€æœ‰tootctlå‘½ä»¤å‡ä¼šç¼©å†™ã€‚\néƒ¨ç½²åª’ä½“æ–‡ä»¶å¤–éƒ¨å­˜å‚¨æœåŠ¡ ç”±äºScaleway object storageå­˜å‚¨ç©ºé—´å…è´¹é™é¢ 75 GBï¼Œæˆ‘ä»¬ä»¥æ­¤ä¸ºä¾‹è¿›è¡Œè®¾ç½®ã€‚\ncd /opt/mastodon #è¿›å…¥ç›®æ ‡æ–‡ä»¶å¤¹ #æ¸…ç†å¤–ç«™ç¼“å­˜å’Œæ— å˜Ÿæ–‡åª’ä½“ï¼Œä¸ºä¸€ä¼šå„¿çš„è¿ç§»å‡å°‘å·¥ä½œé‡ tootctl media remove #ç§»é™¤æœ¬åœ°ç¼“å­˜çš„å…¶å®ƒå®ä¾‹åª’ä½“é™„ä»¶ tootctl media remove-orphans #æ‰«æå‡ºä¸å±äºä»»ä½•åª’ä½“é™„ä»¶çš„æ–‡ä»¶å¹¶ç§»é™¤ä»–ä»¬ï¼Œæ­¤æ“ä½œéœ€è¦éå†æ¯ä¸ªæ–‡ä»¶ï¼Œå› æ­¤é€Ÿåº¦å¾ˆæ…¢ã€‚ é¦–å…ˆå€Ÿç”¨saltç«™é•¿çš„é…ç½®æ•™ç¨‹ï¼Œé€‰æ‹©å¤–éƒ¨å­˜å‚¨çš„èŠ‚ç‚¹ã€‚\næ³¨å†Œåï¼Œåˆ›å»º Projectï¼ˆå¯é€‰ï¼Œæˆ–ç›´æ¥ä½¿ç”¨é¢„è®¾projectï¼‰å’ŒBucketï¼Œç„¶åæŒ‰ç…§æ•™ç¨‹è·å– API Keyï¼Œæ³¨æ„æ— è®ºå¦‚ä½•è·å–API Keyçš„projectå’ŒBucketæ‰€åœ¨çš„projectå¿…é¡»ç›¸åŒï¼Œå¦‚æœè·å–çš„æ˜¯mastodon projectçš„API Keyï¼Œè€ŒBucketè®¾ç½®åœ¨default projecté‡Œï¼Œæ˜¯ä¸å¯ä»¥çš„ã€‚\napt install python-pip pip install awscli #å®‰è£…aws-cli aws configure #è°ƒè¯•aws-cli æŒ‰æŒ‡ç¤ºä¾æ¬¡è¾“å…¥Access Keyå’ŒSecret Keyã€‚Regionéƒ¨åˆ†å¡«å†™fr-par/nl-ams/pl-wawã€‚Default output formatç›´æ¥å›è½¦å³å¯ã€‚\nç»§ç»­æŒ‰ç…§saltç«™é•¿çš„æ•™ç¨‹ç»§ç»­ç¼–è¾‘é•¿æ¯›è±¡é…ç½®æ–‡ä»¶.env.productionï¼Œä¿å­˜ã€‚\næ­¤å¤„å‚è€ƒpullopenç«™é•¿åŒæ­¥å·²æœ‰åª’ä½“çš„æ­¥éª¤ï¼Œè¿è¡Œï¼š\naws s3 sync public/system s3://ã€ä½ çš„bucketåã€‘/ --endpoint-url=https://ä½ çš„å‚¨å­˜æ¡¶åœ°åŒºåœ°å€ --acl public-read ç­‰å¾…åª’ä½“æ–‡ä»¶å…¨éƒ¨ä¸Šä¼ è‡³å¤–éƒ¨å­˜å‚¨æœåŠ¡å³å¯ï¼Œåœ¨æ­¤æœŸé—´å¯ä»¥ps -ef | grep awsç”¨screenåšå®ˆæŠ¤è¿›ç¨‹ã€‚å®Œæˆåè¿è¡Œtootctl reloadé‡å¯ MastodonæœåŠ¡ã€‚\næœ€åï¼Œsaltç«™é•¿çš„æ•™ç¨‹ä¸­ç»‘å®š Cloudflareè¿™é‡Œï¼Œæœ€åæ³¨æ„æ·»åŠ ä¸€æ­¥ï¼šAuto Minifyï¼ˆä½ç½®ï¼šspeed\u0026gt;æœ€ä½³åŒ–\u0026gt;è‡ªåŠ¨ç¼©åˆ¶ï¼‰åœ¨3.3.0ç‰ˆæœ¬ä¹‹åä¼šå½±å“ç½‘é¡µæ‰“å¼€ï¼Œè¯·å‹¿å‹¾é€‰ï¼\nç¡®å®šè®¾ç½®æ— è¯¯åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\ntootctl reload #é‡å¯Mastodonçš„dockerå®¹å™¨ rm -rf /opt/mastodon/public/system #æ¸…ç†æœ¬åœ°æ–‡ä»¶ ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥å°†åª’ä½“æ–‡ä»¶åŒæ­¥è‡³s3ï¼Œå¹¶æ¸…ç†æœ¬åœ°ç¡¬ç›˜æ–‡ä»¶ã€‚\nå®šæœŸæ¸…ç†å¤–ç«™åª’ä½“æ–‡ä»¶ æ­¤å¤„ä¾æ—§å‚è€ƒsaltç«™é•¿çš„é…ç½®æ•™ç¨‹ï¼Œä½†å¯¹å‘½ä»¤åšäº†æ”¹åŠ¨ä½¿å…¶èƒ½åœ¨dockerä¸­ä½¿ç”¨ã€‚\ncrontab -e #ç¼–è¾‘å®šæ—¶ä»»åŠ¡ é€‰æ‹©1åå°†ä»¥ä¸‹å†…å®¹å¡«å…¥å¹¶ä¿å­˜ï¼š\n0 3 * * * /opt/mastodon/tootctl.sh media remove --days=14 0 3 * * * /opt/mastodon/tootctl.sh media remove-orphans 0 3 * * * /opt/mastodon/tootctl.sh statuses remove --days=90 å®šæ—¶ä»»åŠ¡ä¼šåœ¨æ¯å¤©æœåŠ¡å™¨æ—¶é—´çš„3ç‚¹æ¸…ç†ç¼“å­˜ 14 å¤©ä»¥ä¸Šçš„å¤–ç«™åª’ä½“æ–‡ä»¶ã€â€œæ— ä¸»â€åª’ä½“æ–‡ä»¶ã€åŒæœ¬ç«™ä»»ä½•ç”¨æˆ·äº§ç”Ÿå…³è”çš„ 90 å¤©ä»¥ä¸Šçš„ tootã€‚\nè½ç¬”æ„Ÿæ‚Ÿ è™½ç„¶æœ¬æ•™ç¨‹åŸºæœ¬éƒ½æ˜¯å…”å­å¤§ä½¬çš„æˆæœï¼Œä½†æ€ä¹ˆè¯´ä»çœ‹æ•™ç¨‹åˆ°æ•´ç†ææ–™è½ç¬”å†™æ•™ç¨‹è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯æœ‰å¾ˆå¤§æ”¶è·çš„ã€‚ä»ç¬¬ä¸€æ¬¡æ¥è§¦Linuxåˆ°ç€æ‰‹è´­ä¹°åŸŸåå¼€å§‹å»ºç«™ä¸€å…±ä¹Ÿå°±ä¸¤ä¸ªæœˆçš„æ—¶é—´ï¼Œåˆ°ç°åœ¨è¿™ç¯‡æ•™ç¨‹å®Œæˆä¹Ÿåªæ˜¯å°†è¿‘ä¸‰ä¸ªæœˆã€‚ä¸‰ä¸ªæœˆä»:wqåˆ°è™šæ‹Ÿæœºå†åˆ°è´­ä¹°ä¸»æœºå¼€å§‹å»ºç«™ï¼Œä»è°·æ­Œå¦‚ä½•ç”¨vmæ‰“å¼€ä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœºåˆ°èƒ½ç”¨å‘½ä»¤è¡ŒåŸºç¡€è¿ç»´ä¸€ä¸ªç½‘ç«™ï¼Œæˆ‘ä¹Ÿæ²¡æƒ³åˆ°æœ‰äº›äº‹æƒ…æˆ‘å°±æ˜¯èƒ½ã€‚è™½ç„¶è¿™ä¸ªè¿‡ç¨‹è¯¥è¸©çš„å‘éƒ½è¸©è¿‡äº†ï¼Œä½†æ¯•ç«Ÿæ˜¯æˆ‘ç»å†çš„ï¼Œé‚£å°±æœ‰è¯å¯è¯´ã€‚\nåœ¨è¿™é‡Œä¹Ÿéå¸¸æ„Ÿè°¢å„ä½ç«™é•¿çš„æ•™ç¨‹ï¼Œbgmeç«™é•¿å¸®æˆ‘è¿ç§»dockerï¼Œè¿˜æœ‰å…”é…±çš„å¯¹æˆ‘æé—®æ‰€åšçš„å›ç­”ï¼Œä»¥åŠtaéå¸¸ä¼˜ç§€çš„è„šæœ¬ã€‚è™½ç„¶æˆ‘ä¾æ—§æ˜¯ä¸ªå°ç™½ï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘èƒ½èµ°ä¸‹å»ã€‚\n","description":"","id":18,"section":"posts","tags":["Mastodon","Docker"],"title":"Mastodon | é‡‡ç”¨dockerå»ºç«™åçš„ä½¿ç”¨ä¸ç»´æŠ¤","uri":"http://blog.tantalum.life/posts/how-to-run-your-mastodon-by-docker/"},{"content":" é˜…è¯»é“¾æ¥ï¼šä¸­å›½æ•°å­—æ—¶ä»£\nåŸæ–‡é“¾æ¥ï¼šè±†ç“£\nauthor: ä¸æ˜é£è¡Œå…”\næœ¬æ¬¡è½¬è½½ç»ä½œè€…æˆæƒã€‚\n å…³äºæ–°ç–†æ£‰ï¼Œçœ‹äº†å‡ åç¯‡ç½‘ä¸Šèƒ½æ¯”è¾ƒæ–¹ä¾¿æ‰¾åˆ°ã€å†…å®¹ä¹Ÿç›¸å¯¹æ­£è§„çš„åª’ä½“æŠ¥é“ã€äº§ä¸šç ”æŠ¥å’Œå­¦æœ¯è®ºæ–‡ï¼Œæ€»ç»“è‹¥å¹²æœ‰æ„æ€çš„äº‹å®ï¼š\n  æ–°ç–†é•¿ç»’æ£‰ä¸æ˜¯æœºé‡‡æ£‰ï¼Œæ–°ç–†æœºé‡‡æ£‰ä¸æ˜¯é•¿ç»’æ£‰èƒ½å¤Ÿæœºé‡‡çš„é•¿ç»’æ£‰å»å¹´ 11æœˆåˆšåˆšè¯•éªŒæˆåŠŸã€‚\n  ç›®å‰æ‰€æœ‰é•¿ç»’æ£‰éƒ½è¦äººå·¥é‡‡æ‘˜ï¼Œå“è´¨è¿œå¥½äºæœºé‡‡æ£‰ï¼Œä½†ç›®å‰é•¿ç»’æ£‰ç§æ¤é¢ç§¯æ˜æ˜¾ä¸‹é™ï¼Œå› ä¸ºåè€…äººåŠ›æˆæœ¬ä½ã€‚è€Œçœäººå·¥çš„æœºé‡‡æ£‰è´¨é‡å…¬è®¤çš„å·®ï¼Œæ‰€ä»¥æ”¶è´­ä»·æ¯”äººå·¥é‡‡æ‘˜çš„æ£‰èŠ±ä½50ï¼…ã€‚\n  æ–°ç–†æ‘˜æ£‰æœºå¸‚åœºçš„éœ¸ä¸»æ˜¯ä¸€å®¶ç¾å›½å…¬å¸ï¼Œå›½äº§æ‘˜æ£‰æœºçš„å¸‚åœºä»½é¢ä» 18 å¹´èµ·å´›èµ·ï¼Œä½†ä¸»åŠ›æœºå‹æ˜¯å°å‹æ‘˜æ£‰æœºï¼Œå¤§å‹æœºçš„æŠ€æœ¯ä¸Šæš‚æ—¶æ— æ³•åŒ¹æ•Œç¾å›½ï¼ŒæŠ€æœ¯é—¨æ§›ç•¥é«˜ã€‚ï¼ˆBç«™ä¸Šæœ‰ä¸ªè§†é¢‘ï¼Œæ–°ç–†æ£‰å†œæŠ±æ€¨ä»–æ–°ä¹°çš„å›½äº§æ‘˜æ£‰æœºå·¥ä½œäº† 30åˆ†é’Ÿå°±åäº†ï¼Œç„¶åä¿®ç†2å°æ—¶ã€‚ï¼‰\n  åŒ—ç–†æ£‰ç”°å¹¿é˜”ï¼Œå—ç–†å¤šå°å†œä½œä¸šï¼Œå¯æ˜¯ï¼Œå›½äº§å°å‹æ‘˜æ£‰æœºåœ¨åŒ—ç–†å–çš„å¾ˆå¥½ã€‚ä¸ºå•¥ï¼Ÿå› ä¸º2018å¹´èµ·å…µå›¢å›¢åœºæ”¹åˆ¶ï¼ŒæŠŠåœŸåœ°åˆ†ç»™å›¢åœºèŒå·¥â€œåŒ…äº§åˆ°æˆ·â€äº†ã€‚\n  ä¸­å›½çº¦80ï¼…å¸‚åœºä»½é¢ï¼ˆ2016å¹´æ•°æ®ï¼‰çš„æ£‰èŠ±æ˜¯è½¬åŸºå› æ£‰ã€‚æœ€æ—©è¿›å…¥ä¸­å›½çš„è½¬åŸºå› æ£‰ç§åˆåŒè½°èšæ¥è‡ªå­Ÿå±±éƒ½ï¼Œä¸­å›½ç§‘å­¦å®¶å…¬å…³å¤šå¹´ç»ˆäºç ”å‘å‡ºæœ‰è‡ªä¸»çŸ¥è¯†äº§æƒçš„è½¬åŸºå› æ£‰ç§ï¼Œé€æ­¥æ›¿ä»£äº†å­Ÿå±±éƒ½çš„ç§å­ã€‚å¦å¤–ï¼Œåœ¨æ¨å¹¿è¿‡ç¨‹ä¸­ï¼Œè¢«å®¡è®¡ç½²å‘ç°æœ‰äººè™šæŠ¥ç§‘ç ”é¡¹ç›®ã€æŒªç”¨å›½å®¶863è®¡åˆ’800ä¸‡ç§‘ç ”èµ„é‡‘å¼€æ£‰ç§å…¬å¸ã€‚\n  æˆ‘å›½è½¬åŸºå› è‚²ç§é€‰ç§æŠ€æœ¯å’Œè‚²ç§å·¥ä¸šåœ¨å›½é™…ä¸Šè½åäºé˜¿æ ¹å»·ï¼Œæ›´ä¸è¦æ¯”ç¾å›½ã€‚ç¾å›½æœ€æ–°çš„è½¬åŸºå› æ£‰ç§å·²å‘å±•åˆ°ç¬¬ä¸‰ä»£ï¼Œèƒ½æŠ—é³ç¿…ç›®ï¼ˆç¬¬ä¸€ä»£ï¼‰ã€é˜ç¿…ç›®ï¼ˆç¬¬äºŒä»£ï¼‰ã€åŠç¿…ç›®ï¼ˆç¬¬ä¸‰ä»£ï¼‰çš„å®³è™«ï¼Œæˆ‘å›½è¿‘äºŒåå¤šå¹´æ¥ä¸€ç›´ç”¨ç¬¬ä¸€ä»£ã€‚\n  ä¸­å›½çš„æ£‰èŠ±æ¶ˆè´¹é‡ä¸–ç•Œç¬¬ä¸€ã€‚2000å¹´ï¼Œä¸­å›½çš„æ£‰èŠ±æ¶ˆè´¹é‡æ˜¯ç¾å›½çš„2.6 å€ï¼Œ2010å¹´ï¼Œè¿™ä¸ªæ•°å­—å·²ç»æ˜¯13.5å€ï¼Œ2020å¹´å¥½åƒè¿˜æ˜¯14å€ã€‚\n  2020å¹´ï¼Œä¸­å›½çš„æ£‰èŠ±äº§é‡å å…¨ä¸–ç•Œçš„24% ï¼Œæ£‰èŠ±æ¶ˆè´¹é‡å å…¨ä¸–ç•Œçš„33% ï¼Œç¼ºå£ä»å“ªé‡Œè¡¥å‘¢ï¼Ÿä»ç¾å›½è¡¥ã€‚ä¸­å›½æ˜¯ç¾å›½æœ€å¤§çš„æ£‰èŠ±å‡ºå£åœ°ï¼Œå»å¹´ï¼Œ36 ï¼…çš„ç¾æ£‰è¾“å…¥åˆ°ä¸­å›½ï¼ˆ) ï¼Œä¸­å›½è¿›å£æ£‰èŠ± 45ï¼…æ¥è‡ªç¾å›½ï¼ˆæµ·å…³æ•°æ®ï¼‰ã€‚\n  ä¸­å›½æ˜¯ä¸–ç•Œæœ€å¤§çš„æ£‰èŠ±è¿›å£å›½ã€‚ä»2016å¹´ä»¥æ¥ï¼Œä¸­å›½çš„æ£‰èŠ±è¿›å£é‡èŠ‚èŠ‚æ”€å‡ï¼Œä»Šå¹´2021å¹´è¿˜è¦ç»§ç»­æ‰©å¤§è¿›å£ã€‚\n  å³ä¾¿ä»å°åº¦ã€ç¾å›½è¿›å£æ£‰èŠ±ï¼Œå›½å‚¨æ£‰ä»åœ¨æŒç»­å‡å°‘ï¼Œæˆ‘å›½çš„æ£‰èŠ±ç¼ºå£æ¯”è¾ƒå¤§ï¼Œå»å¹´æ£‰èŠ±ä»·æ ¼æŒç»­èµ°é«˜ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿‘å‡ å¹´ç¾å›½æ£‰èŠ±ä¸»äº§åŒºæ°”å€™ä¸é€‚ï¼Œå¯¼è‡´æ£‰å†œç§æ£‰ç§¯ææ€§ä¸é«˜ï¼Œä¸€äº›æ£‰å†œæ”¹ç§ç‰ç±³äº†ï¼Œæ£‰äº§é‡å¤§å¹…ä¸‹é™ã€‚\n  ç„¶åï¼Œä¸­å›½åŒæ—¶æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„æ£‰èŠ±åº“å­˜ç§¯å‹å›½â€¦â€¦\n  å› å¤©æ°”ç­‰åŸå› ï¼Œ2020å¹´æ–°ä¸Šå¸‚çš„æ–°ç–†æ£‰â€œæ•´ä½“è´¨é‡â€ , â€œç‰¹åˆ«æ˜¯åŒ—ç–†æ£‰çš„è´¨é‡å·®â€ï¼ˆé“¶æ²³åŸè¯ï¼‰ï¼Œé«˜å¥½é¢œè‰²çš„æ£‰èŠ±äº§é‡è…°æ–©ã€‚åŒæ—¶ï¼Œç”±äºæŠµåˆ¶æ¾³æ´²ä»Šå¹´é«˜ç­‰çº§æ£‰èŠ±ç´§ç¼ºã€‚\n  çœ‹ä¸Šå»å¾ˆçŸ›ç›¾ï¼šä¸­å›½æœ‰æœ€å¤§çš„æ£‰èŠ±åº“å­˜ï¼Œå›½å‚¨æ£‰æŠ•æ”¾åˆ°å¸‚åœºï¼Œä¹Ÿè¡¥ä¸äº†æ£‰èŠ±ç¼ºå£ï¼Œè¿˜è¦è¿›å£ï¼Œå¯ä¸­å›½æ²¡æœ‰å› æ­¤å®ç°å»åº“å­˜ï¼Œè¿˜æ˜¯æœ€å¤§çš„åº“å­˜ç§¯å‹å›½ï¼Œè¿˜åœ¨ä¸€ç›´å»åº“å­˜ã€‚ä¸ºä»€ä¹ˆï¼ŸåŸå› å¯èƒ½æ˜¯ä¸­ç§‘é™¢ç›´å±ã€Šä¸­å›½ç§‘å­¦æŠ¥ã€‹è½½æ–‡åˆ†æçš„â€œçººçº±å‚ç­‰æ£‰èŠ±éœ€æ±‚å¤§æˆ·æ›´å¤šé€‰æ‹©è´¨ä¼˜ä»·å»‰çš„è¿›å£æ£‰ï¼Œå›½äº§æ£‰åˆ™ä»¥æ”¿åºœæ‰˜å¸‚ä»·æ ¼åŸºæœ¬æµå‘äº†å›½å®¶å‚¨å¤‡ä»“åº“â€ã€‚\n  é™¤äº†å›½å®¶å‚¨å¤‡ï¼Œè¿˜æœ‰å¸‚åœºåŒ–çš„å•†ä¸šå‚¨å¤‡ã€‚2012å¹´ï¼Œæ–°ç–†æ£‰æ–°èŠ±åº“å­˜çº¦ä¸º 100ä¸‡å¨ï¼Œåˆ°ç¬¬äºŒå¹´æ–°èŠ±ä¸Šå¸‚å‰å…¨éƒ¨åå‡ºæ²¡æœ‰ç§¯å‹ï¼›2019å¹´ï¼Œæ–°ç–†æ£‰æ–°èŠ±åº“å­˜çº¦ä¸º400ä¸‡å¨ï¼Œåˆ°2020å¹´æ–°èŠ±ä¸Šå¸‚å‰ï¼Œæœ‰äº†150ä¸‡å¨è§„æ¨¡çš„åº“å­˜ç§¯å‹ã€‚\n  æ–°ç–†æ£‰å› ä¸ºæœºæ¢°åŒ–ç¨‹åº¦é«˜ï¼Œäººå·¥æˆæœ¬åªæœ‰ä¸œéƒ¨æ£‰èŠ±çš„ä¸‰åˆ†ä¹‹ä¸€ã€‚åŒæ—¶ï¼Œç¾å›½æ£‰èŠ±çš„äººå·¥æˆæœ¬åªæœ‰æ–°ç–†æ£‰çš„ååˆ†ä¹‹ä¸€ã€‚ï¼ˆæ ¹æ®2014å¹´å‰åçš„æ•°æ®ï¼Œä»Šå¹´æ•°æ®æ²¡æ‰¾åˆ°ï¼Œæ„Ÿè§‰å·®è·åº”è¯¥æœ‰ç¼©å°ï¼‰\n  2011å¹´èµ·ï¼Œä¸œéƒ¨æ£‰èŠ±ç§æ¤é¢ç§¯æš´å‡ï¼ŒååŒ—ã€åä¸œå·²ç»å¿«æ²¡äººç§æ£‰èŠ±äº†ï¼Œä¸æ­¤åŒæ—¶ï¼Œæ–°ç–†æ£‰èŠ±åœ¨å…¨å›½å æ¯”å¼€å§‹ä¸Šå‡ï¼Œåˆ°ç°åœ¨æ¥è¿‘ä¹æˆã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºç§æ£‰èŠ±èµ”é’±ã€‚ç§æ¤æˆæœ¬å¤ªé«˜ï¼Œå¸‚åœºä»·å¤ªä½ã€‚ä¸­å›½æ£‰èŠ±çš„æ¯äº©ç”Ÿäº§æˆæœ¬æ˜¯ç¾å›½çš„ä¸‰å€ï¼Œäº©äº§å€¼ä¹Ÿæ˜¯ç¾å›½çš„ä¸‰å€ï¼Œä½†å¸‚åœºæ”¶è´­ä»·åŸºæœ¬ä¸Šæ˜¯è´´ç€æˆæœ¬ï¼Œç•™ç»™æ£‰å†œçš„æ”¶ç›Šç©ºé—´å¾ˆå°ï¼Œç”šè‡³æ˜¯è´Ÿæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ£‰èŠ±ç§æ¤ç‰¹åˆ«èƒ½å¸®åŠ©å®ƒä¸Šæ¸¸å’Œä¸‹æ¸¸çš„äº§ä¸šé“¾èµšé’±ï¼Œä½†ç§æ£‰èŠ±çš„äººè‡ªå·±èµšä¸åˆ°é’±ã€‚\n  å»å¹´åº•çš„æ•°æ®ï¼šåŒ—ç–†æœºé‡‡æ£‰çš„æˆæœ¬1.4ä¸‡å…ƒï¼å¨ï¼Œå—ç–†æ‰‹æ‘˜æ£‰æˆæœ¬1.5 ä¸‡å…ƒï¼å¨ã€‚åŒæ—¶ï¼Œæ–°ç–†æ£‰å¸‚åœºå¼€ç§¤ä»·æ ¼æ˜¯7.5å…ƒï½8.7/kg ã€‚æ”¿åºœæ”¶è´­ä»·1.9ä¸‡å…ƒï¼å¨ã€‚åŒæœŸæ¾³æ´²è¿›å£æ£‰çº¦1.8ä¸‡å…ƒï¼å¨ï¼Œç¾å›½è¿›å£æ£‰çº¦1.7ä¸‡å…ƒï¼å¨ã€‚æˆ‘ä¸ç¡®å®šè¿™äº›æ•°æ®æ˜¯å¦å¯ä»¥å‹¾å‹’å‡ºä¸‹é¢è¿™å¹…å›¾æ™¯ï¼šè™½ç„¶æœºæ¢°åŒ–æµªæ½®å·²ç»åœ¨é™æœ¬å¢æ•ˆï¼Œæ–°ç–†æ£‰ç”Ÿäº§æˆæœ¬ä»å±…é«˜ä¸ä¸‹ï¼Œä¸å¸‚åœºæ”¶è´­ä»·æ˜¯å€’åŠçš„ï¼Œæ”¿ä¿¯ç”¨ä¸€ä¸ªé«˜äºè¿›å£æ£‰çš„è¡¥è´´ä»·æ ¼å…œåº•ï¼ŒåŒæ—¶ç”¨é™åˆ¶è¿›å£é…é¢ã€åŠ å…³ç¨ç­‰æ‰‹æ®µæŠ¬é«˜æˆæœ¬ä½å¾—å¤šçš„è¿›å£æ£‰çš„ä»·æ ¼ï¼Œä½†å¸‚åœºä»ç„¶é’çè¿›å£æ£‰ï¼Œä¸æ„¿ä¹°æˆæœ¬é«˜å¾—å¤šä½†å”®ä»·ä½å¾—å¤šçš„æ–°ç–†æ£‰ï¼Œç»“æœå¯¼è‡´æ–°ç–†æ£‰åº“å­˜ç§¯å‹ï¼Ÿ\n  è‡ªç„¶ï¼Œå°å†œç»æµä¸­ä¼¼ä¹å­˜åœ¨æŸç§æ£‰ç²®è½®ä½œã€æ°´ã€ç²®é£Ÿå…»åœ°ã€è½®ä½œç­è™«çš„è‡ªå‘ç”Ÿæ€ç§©åºæ£‰èŠ±è“„ï¼ˆè¿™é‡Œæ¦‚æ‹¬è€Œåœ¨ååŒ—ã€åä¸œï¼Œç”±äº09å¹´å‡ºå°çš„ä¸ä¸€å®šå‡†ç¡®ï¼‰ã€‚è€Œåœ¨ååŒ—ã€åä¸œï¼Œç”±äº09å¹´å‡ºå°äº†ç²®é£Ÿç›´è¡¥å¥½æ”¿ç­–ï¼Œæ£‰å†œæ›´æ„¿æ„ç§ç²®é£Ÿã€‚ç„¶åï¼Œç²®é£Ÿç”¨æ°´è¿œé«˜äºæ£‰èŠ±ç”¨æ°´ï¼Œäºæ˜¯ï¼ŒåŠ©é•¿äº†ååŒ—åœ°ä¸‹æ°´å¤§ç©ºæ´ï¼ˆâ€œå†€æ£è¡¡æ¼æ–—â€â€œå¾·å·æ¼æ–—â€â€œæ²§å·æ¼æ–—â€â€œé‚¢å°å·¨æ–°æ¼æ–—â€â€œå¤©æ´¥æ¼æ–—â€ï¼‰ã€‚\n  æ–°ç–†æ£‰ç§æ¤è¿‡ç¨‹ä¸­ï¼Œä¸ºé…åˆå†œæœºåŒ–ï¼Œè¿˜åœ¨å¤§èŒƒå›´å¿«é€Ÿæ¨å¹¿æ¤ä¿æ— äººæœºã€‚æ— äººæœºåœ¨æ£‰èŠ±ç§æ¤ä¸­çš„åŠŸèƒ½ï¼Œä¸€æ˜¯å–·è¯é™¤è™«ï¼ŒäºŒæ˜¯å–·æ´’è„±å¶å‰‚ã€‚è„±å¶å‰‚çš„ä½œç”¨æ˜¯ä¿ƒè¿›æ£‰é“ƒå¤–çš„å¶ç‰‡è„±è½å¹¶æŠ‘åˆ¶å…¶ç”Ÿé•¿ï¼Œæ–¹ä¾¿æœºæ¢°åŒ–é‡‡æ‘˜ã€‚ä½†ç”±äºå–·æ´’ä¸å‡åŒ€ç­‰åŸå› ï¼Œå¯¹ä¸‹å±‚å¶ç‰‡çš„ä½œç”¨æœ‰é™ â€• ç»“æœä¸€å®šç¨‹åº¦ä¸Šå¯¼è‡´å»å¹´æœºé‡‡æ£‰äº©äº§é‡ä¸Šå‡â€¦â€¦ä»¥åŠè´¨é‡ä¸‹é™ã€‚\n  è€Œä¸Šä¸€æ¡çš„é—®é¢˜è¦è§£å†³ï¼Œå…³é”®åœ¨äºé€‰æ‹©é€‚åˆæœºé‡‡çš„æ£‰ç§ã€‚è¿™åˆå›åˆ°äº†æœ¬æ–‡å¼€å¤´çš„é—®é¢˜ï¼šä¸­å›½ç§ä¸šä¸å‘è¾¾ï¼Œå¸‚åœºç§©åºä¸ä½³ï¼ŒæŠ•å…¥å°‘ï¼Œåˆ›æ–°èƒ½åŠ›å¼±ï¼Œè¿˜æœ‰â€åè½¬â€œçš„æ–‡åŒ–èƒŒæ™¯å¯¼è‡´æ–°ç§å®¡è¯„å‘¨æœŸè¾ƒé•¿â€¦â€¦\n  è¯´äº†è¿™ä¹ˆå¤šæ£‰èŠ±ï¼Œå…¶å®æˆ‘å›½åˆç”Ÿäº§ã€åˆå‚¨å¤‡ã€åˆè¿›å£çš„è¿™ä¹ˆå¤šæ£‰èŠ±ï¼Œæœ€åè½è„šç‚¹åœ¨çººç»‡ä¸šï¼Œè€Œæˆ‘å›½çººç»‡ä¸šä»2011å¹´å¼€å§‹é•¿æœŸä¸æ™¯æ°”ï¼Œ2016å¹´ååŠ å‰§ï¼Œè¿™ä¸ªè¿‡ç¨‹å¼€å§‹äºç–«æƒ…å‰ã€è´¸æ˜“æˆ˜å‰æ›´æ—©çš„æ—¶é—´ã€‚å»å¹´æ˜¯æœ€è¿‘å…«å¹´æ¥çººç»‡å“å‡ºå£æœ€å¥½çš„ä¸€å¹´ï¼Œåœ¨å»å¹´ä¹‹å‰ä»2013å¹´ä¸€ç›´åˆ°2019å¹´ï¼Œå‡ºå£é¢ä¸€ç›´æ˜¯ç¨³æ­¥ä¸‹é™çš„ï¼Œå»å¹´ä¸€ä¸‹å­è¶…è¿‡äº†2013å¹´ â€• ä¸è¿‡ï¼Œè¿™ä¸ªå¥½çœ‹çš„æ•°æ®æ˜¯è¢«çººç»‡å“ä¸­ç»³ç´¢ã€æ£‰çº±ã€ç²—å¸ƒç­‰åˆçº§åŠ å·¥å“æ‹‰èµ·æ¥çš„ï¼Œé«˜çº§çººç»‡å“å³æœè£…çš„å‡ºå£é¢åˆ™æ˜¯ 2013 å¹´æ¥æœ€ä½çš„ã€‚\n  Reference:\n  é‚“äºšè¾‰ã€å®ç¡•ï¼šã€Šæ–°ç–†æœºé‡‡æ£‰å‘å±•ç°çŠ¶åŠä¸€äº›é—®é¢˜è§£å†³ä¸å±•æœ›ã€‹ï¼Œæ¥æºï¼šã€Šæ£‰èŠ±ç§‘å­¦ã€‹2020å¹´ç¬¬5æœŸï¼Œhttps://www.163.com/dy/article/FQFPV3O40511CCT0.html\n  åˆ˜å€©æ¥ ï¼šã€Šé“¶æ²³æœŸè´§å†œäº§å“å¹´æŠ¥ã€‹ï¼Œ2020å¹´12æœˆ20æ—¥ï¼Œæ¥æºï¼šé“¶æ²³æœŸè´§ï¼Œhttp://www.cfachina.org/servicesupport/analygarden/ncpl/mh_5786/202012/P020201231566851675493.pdf\n  æ¨é™ã€åˆ˜è‰ºå“ï¼šã€Šä¸­å›½æ£‰èŠ±è´¸æ˜“å½¢åŠ¿ç‰¹ç‚¹åŠå±•æœ›ã€‹ï¼Œ2016å¹´3æœˆï¼Œæ¥æºï¼šå†œä¸šéƒ¨å†œä¸šè´¸æ˜“ä¿ƒè¿›ä¸­å¿ƒï¼Œhttp://www.agri.cn/V20/SC/myyj/201603/t20160307_5042719.htm\n  ç¿Ÿé›ªç²ã€å¼ é›¯ä¸½ï¼šã€Šä¸­å›½æ£‰èŠ±äº§ä¸šç°çŠ¶åŠå¯¹æœªæ¥å‘å±•è¶‹åŠ¿çš„æ€è€ƒå’Œåˆ¤æ–­ã€‹ï¼Œæ¥æºï¼šã€Šå†œä¸šå‘å±•ä¸é‡‘èã€‹ï¼Œ2014å¹´ç¬¬11æœŸã€‚\n  é»„è¹ä¼Ÿï¼šã€Šä¸­ç¾æ£‰èŠ±ç”Ÿäº§æˆæœ¬æ”¶ç›ŠåŠå…¨è¦ç´ ç”Ÿäº§ç‡æ¯”è¾ƒåˆ†æã€‹ï¼Œ2017.5ï¼Œä¸­å—è´¢ç»æ”¿æ³•å¤§å­¦ç¡•å£«æ¯•ä¸šè®ºæ–‡\n  èµµå¹¿ç«‹ï¼šã€Šä¸­å›½æ£‰èŠ±å›°å¢ƒï¼šå¿«æ²¡äººç§äº†ã€‹ï¼Œ2015.8ï¼Œç§‘å­¦ç½‘ï¼Œhttp://news.sciencenet.cn/htmlnews/2015/8/325153.shtm\n  æå…ˆä¸œï¼Œç±³å·§ï¼Œä½™å›½æ–°ï¼šã€Šä¸­å›½æ£‰èŠ±ä¸»äº§åŒºæˆæœ¬æ”¶ç›Šç‰¹å¾ä¸æ¼”å˜è½¨è¿¹ã€‹ï¼Œhttp://ir.nsfc.gov.cn/paperDownload/25294746.pdfï¼Œ2016.6ï¼Œã€Šå¹²æ—±åŒºèµ„æºä¸ç¯å¢ƒã€‹ç¬¬30å·ç¬¬å…­æœŸ\n  é™•è¥¿çœç²®æ²¹ä¿¡æ¯ä¸­å¿ƒè¥¿éƒ¨ç²®æ²¹ä¿¡æ¯ç½‘ï¼šã€Šå¤§è±†ã€æ£‰èŠ±æ”¶å‚¨æ”¹ä¸ºâ€œç›´è¡¥â€ ä¸­å‚¨ç²®ç´§æ€¥â€œç˜¦èº«â€ã€‹http://www.shaangrain.com/index.php?m=content\u0026amp;c=index\u0026amp;a=show\u0026amp;catid=9\u0026amp;id=165\n  é‡‘èç•Œï¼šã€Šæ£‰èŠ±çš„æˆ˜äº‰ï¼šæ£‰ä»·è¿˜å°†å†åˆ›æ–°é«˜å—ï¼Ÿã€‹http://futures.jrj.com.cn/2020/10/25134331122941.shtml\n  ä¸­å›½æ£‰èŠ±ç½‘ï¼šã€Š2020å¹´åº¦æ¾³æ£‰å¯¹ä¸­å›½å‡ºå£æˆ–è§¦åº•åå¼¹ã€‹ï¼Œ2021.3.9ï¼Œhttp://www.texindex.com.cn/Articles/2021-3-9/474709.html\n  ä¸­å›½æ£‰èŠ±ç½‘ï¼šã€Šæ·±åº¦è°ƒæŸ¥ï¼š2020å¹´æ–°ç–†æ£‰å¸‚åœºè§£æã€‹ï¼Œ2020.10ï¼Œhttps://finance.sina.com.cn/money/future/agri/2020-10-30/doc-iiznezxr8900855.shtml\n  åˆ˜å¼ºï¼šã€Š2010-2011å¹´åº¦æ£‰èŠ±æŠ•èµ„åˆ†ææŠ¥å‘Šã€‹ï¼Œå›½æµ·è‰¯æ—¶æœŸè´§ç ”ç©¶æ‰€ï¼Œhttps://wenku.baidu.com/view/0aabc20e76c66137ee06195c?pcf=2\u0026amp;bfetype=new\n  ç”Ÿç‰©è°·ï¼šã€Šè½¬åŸºå› æ£‰æ‚²å–œå‰§ï¼šä¸­å›½æ£‰èŠ±äº§ä¸šæé‡è¹ˆå¤§è±†è¦†è¾™ã€‹ï¼Œ2010.10ï¼Œhttps://news.bioon.com/article/6450377.html\n  ä¸­æ£‰æ‰€ï¼šã€Š2016å¹´å…¨å›½æ£‰èŠ±ç§æ¤å“ç§ç›‘æµ‹æŠ¥å‘Šã€‹ï¼Œhttp://www.cncotton.com/sy_59/gnmh_1388/rdxw/201702/t20170215_567574.html\n  è’‹æ™“ä¿Šã€é¾šå–œæ°ï¼šã€Šæ–°ç–†é¦–ä¸ªæœºé‡‡é•¿ç»’æ£‰å“ç§è¯•ç§æˆåŠŸã€‹ï¼Œ2020å¹´11æœˆï¼Œã€Šé˜¿å…‹è‹æ—¥æŠ¥ã€‹ï¼Œhttp://www.chinaxinjiang.cn/zixun/xjxw/202011/t20201130_654614.htm\n   ","description":"","id":19,"section":"posts","tags":["404"],"title":"RT | è°ˆæ£‰èŠ±","uri":"http://blog.tantalum.life/posts/talking-about-cottons/"}]